(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{2959:function(e,s,t){Promise.resolve().then(t.bind(t,7820))},7820:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ReleasesPage}});var a=t(7437),l=t(2265),r=t(1396),c=t.n(r),i=t(1413),n=t(9162),x=t(6108);function ReleasesPage(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[d,m]=(0,l.useState)(null),[o,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{let loadReleases=async()=>{try{let e=localStorage.getItem("kushtunes_token");if(!e){window.location.href="/login";return}let t=await fetch("/api/releases",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.success?s(e.data):m(e.message||"Failed to load releases")}else m("Failed to load releases")}catch(e){console.error("Releases load error:",e),m("Failed to load releases")}finally{r(!1)}};loadReleases()},[]);let handlePlayPause=e=>{o===e?h(null):h(e)},getStatusColor=e=>{switch(e){case"LIVE":return"bg-green-100 text-green-800";case"PROCESSING":return"bg-yellow-100 text-yellow-800";case"READY":return"bg-blue-100 text-blue-800";case"DRAFT":default:return"bg-gray-100 text-gray-800";case"REJECTED":return"bg-red-100 text-red-800"}},getDistributionStatusColor=e=>{switch(e){case"LIVE":return"bg-green-100 text-green-800";case"PROCESSING":return"bg-yellow-100 text-yellow-800";case"SUBMITTED":return"bg-blue-100 text-blue-800";case"PENDING":default:return"bg-gray-100 text-gray-800";case"REJECTED":case"FAILED":return"bg-red-100 text-red-800"}};return t?(0,a.jsx)(i.o,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(n.TK,{})})}):d?(0,a.jsx)(i.o,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.LP,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Releases"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:d}),(0,a.jsx)(n.DL,{variant:"primary",onClick:()=>window.location.reload(),children:"Try Again"})]})})}):(0,a.jsx)(i.o,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Releases"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage and track your music releases"})]}),(0,a.jsx)(n.DL,{variant:"primary",asChild:!0,children:(0,a.jsxs)(c(),{href:"/upload",children:[(0,a.jsx)(x.pO,{className:"h-5 w-5 mr-2"}),"Upload New Release"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(x.MJ,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Releases"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(x.I_,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Live Releases"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"LIVE"===e.status).length})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(x.DE,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Streams"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((e,s)=>e+s.distributions.reduce((e,s)=>e+(s.streams||0),0),0).toLocaleString()})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(x.Qu,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>{let s=new Date(e.createdAt),t=new Date;return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}).length})]})]})})]}),0===e.length?(0,a.jsxs)(n.ZH,{className:"p-12 text-center",children:[(0,a.jsx)(x.MJ,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Releases Yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Start your music journey by uploading your first release"}),(0,a.jsx)(n.DL,{variant:"primary",asChild:!0,children:(0,a.jsxs)(c(),{href:"/upload",children:[(0,a.jsx)(x.pO,{className:"h-5 w-5 mr-2"}),"Upload Your First Release"]})})]}):(0,a.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.coverUrl?(0,a.jsx)("img",{src:e.coverUrl,alt:e.title,className:"h-24 w-24 rounded-lg object-cover"}):(0,a.jsx)("div",{className:"h-24 w-24 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,a.jsx)(x.MJ,{className:"h-8 w-8 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.artist}),(0,a.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:e.status}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.type," â€¢ ",e.tracks.length," track",1!==e.tracks.length?"s":""]}),e.genre&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.genre})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.DL,{variant:"outline",size:"sm",children:[(0,a.jsx)(x.tE,{className:"h-4 w-4 mr-1"}),"View"]}),(0,a.jsxs)(n.DL,{variant:"outline",size:"sm",children:[(0,a.jsx)(x.LZ,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]}),e.tracks.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Tracks"}),(0,a.jsx)("div",{className:"space-y-2",children:e.tracks.map((e,s)=>(0,a.jsx)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>handlePlayPause(e.id),className:"p-1 hover:bg-gray-200 rounded-full",children:o===e.id?(0,a.jsx)(x.fp,{className:"h-4 w-4 text-gray-600"}):(0,a.jsx)(x.o1,{className:"h-4 w-4 text-gray-600"})}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:s+1}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.title}),e.duration&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]})]})},e.id))})]}),e.distributions.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Distribution"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.distributions.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.dspName}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(getDistributionStatusColor(e.status)),children:e.status}),e.streams&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.streams.toLocaleString()," streams"]})]},e.id))})]})]})]})},e.id))})]})})}}},function(e){e.O(0,[216,592,971,744],function(){return e(e.s=2959)}),_N_E=e.O()}]);