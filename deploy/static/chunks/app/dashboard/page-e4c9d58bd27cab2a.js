(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1776:function(e,s,t){Promise.resolve().then(t.bind(t,227))},227:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return DashboardPage}});var a=t(7437),l=t(2265),r=t(1396),c=t.n(r),i=t(1413),n=t(9162),d=t(6108);function DashboardPage(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[x,m]=(0,l.useState)({totalReleases:0,totalStreams:0,totalRevenue:0,liveDistributions:0,pendingDistributions:0});(0,l.useEffect)(()=>{fetchReleases()},[]);let fetchReleases=async()=>{try{let e=await fetch("/api/upload"),t=await e.json();t.success&&(s(t.data),calculateStats(t.data))}catch(e){console.error("Error fetching releases:",e)}finally{r(!1)}},calculateStats=e=>{let s=0,t=0,a=0,l=0;e.forEach(e=>{e.distributions.forEach(e=>{s+=e.streams||0,t+=e.revenue||0,"LIVE"===e.status?a++:("PENDING"===e.status||"PROCESSING"===e.status)&&l++})}),m({totalReleases:e.length,totalStreams:s,totalRevenue:t,liveDistributions:a,pendingDistributions:l})},getStatusColor=e=>{switch(e){case"LIVE":return"text-green-600 bg-green-100";case"PROCESSING":return"text-yellow-600 bg-yellow-100";case"PENDING":return"text-blue-600 bg-blue-100";case"REJECTED":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},getStatusIcon=e=>{switch(e){case"LIVE":return(0,a.jsx)(d.rE,{className:"h-4 w-4"});case"PROCESSING":return(0,a.jsx)(d.T3,{className:"h-4 w-4"});default:return(0,a.jsx)(d.LP,{className:"h-4 w-4"})}};return t?(0,a.jsx)(i.o,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(n.TK,{})})}):(0,a.jsx)(i.o,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your music releases and distribution"})]}),(0,a.jsx)(n.DL,{variant:"primary",asChild:!0,children:(0,a.jsxs)(c(),{href:"/upload",children:[(0,a.jsx)(d.pO,{className:"h-5 w-5 mr-2"}),"Upload New Release"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(d.MJ,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Releases"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.totalReleases})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(d.o1,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Streams"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.totalStreams.toLocaleString()})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(d.UK,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",x.totalRevenue.toFixed(2)]})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(d.I_,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Live Distributions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.liveDistributions})]})]})}),(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(d.T3,{className:"h-6 w-6 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.pendingDistributions})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Releases"}),0===e.length?(0,a.jsxs)(n.ZH,{className:"p-12 text-center",children:[(0,a.jsx)(d.MJ,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No releases yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload your first track to get started with distribution"}),(0,a.jsx)(n.DL,{variant:"primary",asChild:!0,children:(0,a.jsx)(c(),{href:"/upload",children:"Upload Your First Release"})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(e=>(0,a.jsx)(n.ZH,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[e.coverUrl&&(0,a.jsx)("img",{src:e.coverUrl,alt:e.title,className:"w-16 h-16 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.artist}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:[getStatusIcon(e.status),(0,a.jsx)("span",{className:"ml-1",children:e.status})]}),e.isrc&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["ISRC: ",e.isrc]})]}),e.distributions.length>0&&(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Distributions:"}),e.distributions.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.dspName}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:[getStatusIcon(e.status),(0,a.jsx)("span",{className:"ml-1",children:e.status})]}),e.streams&&e.streams>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.streams.toLocaleString()," streams"]})]})]},e.id))]})]})]})},e.id))})]})]})})}}},function(e){e.O(0,[216,592,971,744],function(){return e(e.s=1776)}),_N_E=e.O()}]);