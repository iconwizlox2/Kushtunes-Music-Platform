"use strict";(()=>{var e={};e.id=2775,e.ids=[2775],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},28498:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>p,originalPathname:()=>w,requestAsyncStorage:()=>u,routeModule:()=>i,serverHooks:()=>l,staticGenerationAsyncStorage:()=>n,staticGenerationBailout:()=>h});var r={};t.r(r),t.d(r,{GET:()=>GET,POST:()=>POST});var a=t(10884),o=t(16132),c=t(95798);let AppleMusicAPI=class AppleMusicAPI{constructor(e,s){this.developerToken=e,this.userToken=s}async searchTracks(e){try{let s=await fetch(`https://api.music.apple.com/v1/catalog/us/search?term=${encodeURIComponent(e)}&types=songs&limit=25`,{headers:{Authorization:`Bearer ${this.developerToken}`,"Music-User-Token":this.userToken||""}});if(!s.ok)throw Error(`Apple Music API error: ${s.status}`);let t=await s.json();return t.results?.songs?.data||[]}catch(e){throw console.error("Apple Music search error:",e),e}}async getTrack(e){try{let s=await fetch(`https://api.music.apple.com/v1/catalog/us/songs/${e}`,{headers:{Authorization:`Bearer ${this.developerToken}`,"Music-User-Token":this.userToken||""}});if(!s.ok)throw Error(`Apple Music API error: ${s.status}`);let t=await s.json();return t.data?.[0]||null}catch(e){throw console.error("Apple Music track fetch error:",e),e}}async getArtistTracks(e){try{let s=await fetch(`https://api.music.apple.com/v1/catalog/us/artists/${e}/songs?limit=25`,{headers:{Authorization:`Bearer ${this.developerToken}`,"Music-User-Token":this.userToken||""}});if(!s.ok)throw Error(`Apple Music API error: ${s.status}`);let t=await s.json();return t.data||[]}catch(e){throw console.error("Apple Music artist tracks error:",e),e}}async getTopTracks(){try{let e=await fetch("https://api.music.apple.com/v1/catalog/us/top-charts/songs?limit=25",{headers:{Authorization:`Bearer ${this.developerToken}`,"Music-User-Token":this.userToken||""}});if(!e.ok)throw Error(`Apple Music API error: ${e.status}`);let s=await e.json();return s.results?.songs||[]}catch(e){throw console.error("Apple Music top tracks error:",e),e}}async getNewReleases(){try{let e=await fetch("https://api.music.apple.com/v1/catalog/us/new-releases/albums?limit=25",{headers:{Authorization:`Bearer ${this.developerToken}`,"Music-User-Token":this.userToken||""}});if(!e.ok)throw Error(`Apple Music API error: ${e.status}`);let s=await e.json();return s.results?.albums||[]}catch(e){throw console.error("Apple Music new releases error:",e),e}}async submitToAppleMusic(e){try{return e.title,e.artist,e.album||e.title,e.genre,e.releaseDate,e.audioFile.name,e.artworkFile.name,new Date().toISOString(),{success:!0,message:"Music submitted to Apple Music successfully! Review process takes 1-2 weeks.",submissionId:`apple_${Date.now()}`}}catch(e){return console.error("Apple Music submission error:",e),{success:!1,message:"Failed to submit to Apple Music. Please try again."}}}};async function getAppleMusicToken(){try{return process.env.APPLE_MUSIC_DEVELOPER_TOKEN||"your-apple-music-token"}catch(e){throw console.error("Apple Music token error:",e),e}}async function POST(e){try{let{action:s,...t}=await e.json();if(!s)return c.Z.json({success:!1,message:"Action is required"},{status:400});let r=await getAppleMusicToken(),a=new AppleMusicAPI(r);switch(s){case"search":let{query:o}=t;if(!o)return c.Z.json({success:!1,message:"Search query is required"},{status:400});let i=await a.searchTracks(o);return c.Z.json({success:!0,data:i});case"getTrack":let{trackId:u}=t;if(!u)return c.Z.json({success:!1,message:"Track ID is required"},{status:400});let n=await a.getTrack(u);return c.Z.json({success:!0,data:n});case"getTopTracks":let l=await a.getTopTracks();return c.Z.json({success:!0,data:l});case"getNewReleases":let p=await a.getNewReleases();return c.Z.json({success:!0,data:p});case"submit":let h=await a.submitToAppleMusic(t);return c.Z.json(h);default:return c.Z.json({success:!1,message:"Invalid action"},{status:400})}}catch(e){return console.error("Apple Music API error:",e),c.Z.json({success:!1,message:"Internal server error"},{status:500})}}async function GET(e){try{let{searchParams:s}=new URL(e.url),t=s.get("action");if(!t)return c.Z.json({success:!1,message:"Action is required"},{status:400});let r=await getAppleMusicToken(),a=new AppleMusicAPI(r);switch(t){case"topTracks":let o=await a.getTopTracks();return c.Z.json({success:!0,data:o});case"newReleases":let i=await a.getNewReleases();return c.Z.json({success:!0,data:i});default:return c.Z.json({success:!1,message:"Invalid action"},{status:400})}}catch(e){return console.error("Apple Music API error:",e),c.Z.json({success:!1,message:"Internal server error"},{status:500})}}let i=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/apple-music/route",pathname:"/api/apple-music",filename:"route",bundlePath:"app/api/apple-music/route"},resolvedPagePath:"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/apple-music/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:n,serverHooks:l,headerHooks:p,staticGenerationBailout:h}=i,w="/api/apple-music/route"}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[729,6449,5798],()=>__webpack_exec__(28498));module.exports=t})();