"use strict";(()=>{var e={};e.id=3584,e.ids=[3584],e.modules={97352:e=>{e.exports=require("@prisma/client/runtime/library.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},858:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>h,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>y});var s={};r.r(s),r.d(s,{GET:()=>GET,PUT:()=>PUT});var a=r(10884),i=r(16132),o=r(95798),u=r(96810),n=r(8192);let c=new u.PrismaClient;async function GET(e){try{let t=e.headers.get("authorization");if(!t)return o.Z.json({success:!1,message:"Authorization header required"},{status:401});let r=t.replace("Bearer ",""),s=(0,n.WX)(r);if(!s)return o.Z.json({success:!1,message:"Invalid token"},{status:401});let a=await c.artist.findUnique({where:{email:s.email}});if(!a)return o.Z.json({success:!1,message:"Artist profile not found"},{status:404});return o.Z.json({success:!0,data:{id:a.id,name:a.name,legalName:a.legalName,country:a.country,email:a.email,payoutMethod:a.payoutMethod,kycStatus:a.kycStatus,kycDocuments:a.kycDocuments,createdAt:a.createdAt,updatedAt:a.updatedAt}})}catch(e){return console.error("Get artist profile error:",e),o.Z.json({success:!1,message:"Internal server error"},{status:500})}}async function PUT(e){try{let t=e.headers.get("authorization");if(!t)return o.Z.json({success:!1,message:"Authorization header required"},{status:401});let r=t.replace("Bearer ",""),s=(0,n.WX)(r);if(!s)return o.Z.json({success:!1,message:"Invalid token"},{status:401});let a=await e.json(),i=await c.artist.findUnique({where:{email:s.email}});if(!i)return o.Z.json({success:!1,message:"Artist profile not found"},{status:404});let u=await c.artist.update({where:{id:i.id},data:{...a,updatedAt:new Date}});return o.Z.json({success:!0,message:"Profile updated successfully",data:{id:u.id,name:u.name,legalName:u.legalName,country:u.country,email:u.email,payoutMethod:u.payoutMethod,kycStatus:u.kycStatus,kycDocuments:u.kycDocuments,updatedAt:u.updatedAt}})}catch(e){return console.error("Update artist profile error:",e),o.Z.json({success:!1,message:"Internal server error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/artist/profile/route",pathname:"/api/artist/profile",filename:"route",bundlePath:"app/api/artist/profile/route"},resolvedPagePath:"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/artist/profile/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m,headerHooks:f,staticGenerationBailout:y}=l,h="/api/artist/profile/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[729,6449,5798,6810,8752,8192],()=>__webpack_exec__(858));module.exports=r})();