"use strict";(()=>{var e={};e.id=3322,e.ids=[3322],e.modules={97352:e=>{e.exports=require("@prisma/client/runtime/library.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},15458:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>x,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>y});var s={};t.r(s),t.d(s,{POST:()=>POST});var a=t(10884),o=t(16132),u=t(95798),i=t(96810),n=t(8192);let p=new i.PrismaClient;async function POST(e,{params:r}){try{let t=e.headers.get("authorization");if(!t)return u.Z.json({success:!1,message:"Authorization header required"},{status:401});let s=t.replace("Bearer ",""),a=(0,n.WX)(s);if(!a)return u.Z.json({success:!1,message:"Invalid token"},{status:401});if("ADMIN"!==a.role)return u.Z.json({success:!1,message:"Admin access required"},{status:403});let{id:o}=r,{approved:i,notes:d}=await e.json(),c=await p.payout.update({where:{id:o},data:{status:i?"APPROVED":"FAILED",processedAt:i?new Date:null}});return i&&(console.log(`Processing payout ${c.id} for ${c.amount} via ${c.method}`),await p.payout.update({where:{id:o},data:{status:"PROCESSED",processedAt:new Date}})),u.Z.json({success:!0,message:`Payout ${i?"approved and processed":"failed"} successfully`,data:{id:c.id,status:i?"PROCESSED":"FAILED"}})}catch(e){return console.error("Approve payout error:",e),u.Z.json({success:!1,message:"Internal server error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/payouts/[id]/approve/route",pathname:"/api/admin/payouts/[id]/approve",filename:"route",bundlePath:"app/api/admin/payouts/[id]/approve/route"},resolvedPagePath:"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/admin/payouts/[id]/approve/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m,headerHooks:v,staticGenerationBailout:y}=d,x="/api/admin/payouts/[id]/approve/route"}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[729,6449,5798,6810,8752,8192],()=>__webpack_exec__(15458));module.exports=t})();