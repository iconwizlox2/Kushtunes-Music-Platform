(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{5816:function(e,s,i){Promise.resolve().then(i.bind(i,3326))},3326:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return VerifyEmailPage}});var a=i(7437),l=i(2265),t=i(4033),r=i(1396),n=i.n(r),c=i(1413),o=i(9162),d=i(6108);function VerifyEmailPage(){let e=(0,t.useSearchParams)(),s=e.get("token"),i=e.get("email"),[r,m]=(0,l.useState)("loading"),[x,f]=(0,l.useState)(""),[h,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!s||!i){m("missing"),f("Missing verification token or email");return}handleVerification()},[s,i]);let handleVerification=async()=>{if(s&&i){u(!0);try{let e=await fetch("/api/auth/verify-email",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,email:i})}),a=await e.json();a.success?(m("success"),f("Your email has been verified successfully!")):(m("error"),f(a.message||"Email verification failed"))}catch(e){console.error("Verification error:",e),m("error"),f("Email verification failed. Please try again.")}finally{u(!1)}}},resendVerification=async()=>{if(i){u(!0);try{let e=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})}),s=await e.json();s.success?f("Verification email sent! Please check your inbox."):f(s.message||"Failed to send verification email")}catch(e){console.error("Resend error:",e),f("Failed to send verification email. Please try again.")}finally{u(!1)}}};return(0,a.jsx)(c.o,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsx)(o.ZH,{className:"p-8",children:(()=>{switch(r){case"loading":return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(o.TK,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Email"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Please wait while we verify your email address..."})]});case"success":return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(d.rE,{className:"h-8 w-8 text-green-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your email address has been successfully verified. You can now access all features of Kushtunes."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:()=>window.location.href="/dashboard",children:["Go to Dashboard",(0,a.jsx)(d.LZ,{className:"ml-2 h-5 w-5"})]}),(0,a.jsx)(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/upload",children:"Upload Music"})]})]});case"error":return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(d.LP,{className:"h-8 w-8 text-red-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:x}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:resendVerification,disabled:h,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.TK,{className:"mr-2"}),"Sending..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.bV,{className:"mr-2 h-5 w-5"}),"Resend Verification Email"]})}),(0,a.jsx)(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/login",children:"Back to Login"})]})]});case"missing":return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(d.LP,{className:"h-8 w-8 text-yellow-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Link"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This verification link is invalid or has expired. Please request a new verification email."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:()=>window.location.href="/login",children:"Go to Login"}),(0,a.jsx)(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/register",children:"Create New Account"})]})]});default:return null}})()}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Need help?"," ",(0,a.jsx)(n(),{href:"/support",className:"font-medium text-blue-600 hover:text-blue-500",children:"Contact Support"})]})})]})})})}},4033:function(e,s,i){e.exports=i(94)}},function(e){e.O(0,[176,879,694,744],function(){return e(e.s=5816)}),_N_E=e.O()}]);