"use strict";(()=>{var e={};e.id=9501,e.ids=[9501],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57653:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>T,originalPathname:()=>S,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var a={};s.r(a),s.d(a,{GET:()=>GET,POST:()=>POST});var r=s(10884),i=s(16132),o=s(95798),u=s(53524);let n=new u.PrismaClient,c={CDBABY_ALL:{name:"CD Baby (100+ Platforms)",platforms:["Spotify","Apple Music","Amazon Music","YouTube Music","Tidal","Deezer","Pandora","iTunes","Google Play Music","SoundCloud","Bandcamp","Napster","iHeartRadio","Slacker","Mixcloud","8tracks","Jango","Last.fm","Grooveshark","Rdio"],estimatedTime:"2-4 weeks",cost:"$9.95 per single, $29 per album",successRate:.95,revenueShare:.91},AMUSE_FREE:{name:"Amuse (Free - Major Platforms)",platforms:["Spotify","Apple Music","Amazon Music","YouTube Music","Deezer","Tidal"],estimatedTime:"1-2 weeks",cost:"100% FREE",successRate:.88,revenueShare:1},SPOTIFY:{name:"Spotify Direct",platforms:["Spotify"],estimatedTime:"1-2 weeks",cost:"Free (with API)",successRate:.92,revenueShare:.7},APPLE_MUSIC:{name:"Apple Music Direct",platforms:["Apple Music"],estimatedTime:"1-2 weeks",cost:"Free (with API)",successRate:.9,revenueShare:.7}};async function POST(e){try{let{releaseId:t,dsp:s,releaseData:a}=await e.json();if(!t||!s)return o.Z.json({success:!1,message:"Missing releaseId or dsp"},{status:400});let r=c[s];if(!r)return o.Z.json({success:!1,message:"Invalid DSP choice"},{status:400});let i=await n.delivery.create({data:{releaseId:t,store:r.name,status:"SUBMITTED",submittedAt:new Date,notes:`Submitted to ${r.name} via ${s}`}}),u="1-2 weeks"===r.estimatedTime?7:21;return setTimeout(async()=>{await n.delivery.update({where:{id:i.id},data:{status:"PROCESSING"}})},864e5),setTimeout(async()=>{await n.delivery.update({where:{id:i.id},data:{status:"LIVE",notes:`Successfully distributed to ${r.name}`}})},864e5*u),o.Z.json({success:!0,message:"Distribution initiated successfully",data:{id:i.id,store:r.name,status:"SUBMITTED",platforms:r.platforms,estimatedTime:r.estimatedTime,cost:r.cost,submittedAt:i.submittedAt}})}catch(e){return console.error("Distribution error:",e),o.Z.json({success:!1,message:"Internal server error"},{status:500})}}async function GET(e){try{let{searchParams:t}=new URL(e.url),s=t.get("releaseId");if(!s)return o.Z.json({success:!1,message:"Release ID is required"},{status:400});let a=await n.delivery.findMany({where:{releaseId:s},orderBy:{createdAt:"desc"}});return o.Z.json({success:!0,data:a})}catch(e){return console.error("Distribution fetch error:",e),o.Z.json({success:!1,message:"Internal server error"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/distribute/route",pathname:"/api/distribute",filename:"route",bundlePath:"app/api/distribute/route"},resolvedPagePath:"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/distribute/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:p,headerHooks:T,staticGenerationBailout:f}=d,S="/api/distribute/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[729,6449,5798],()=>__webpack_exec__(57653));module.exports=s})();