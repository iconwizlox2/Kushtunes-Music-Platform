"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analytics/route";
exports.ids = ["app/api/analytics/route"];
exports.modules = {

/***/ "@prisma/client/runtime/library.js":
/*!****************************************************!*\
  !*** external "@prisma/client/runtime/library.js" ***!
  \****************************************************/
/***/ ((module) => {

module.exports = require("@prisma/client/runtime/library.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_wizloxssd_Downloads_kushtunes_starter_app_api_analytics_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/analytics/route.ts */ \"(rsc)/./app/api/analytics/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analytics/route\",\n        pathname: \"/api/analytics\",\n        filename: \"route\",\n        bundlePath: \"app/api/analytics/route\"\n    },\n    resolvedPagePath: \"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/analytics/route.ts\",\n    nextConfigOutput,\n    userland: _Users_wizloxssd_Downloads_kushtunes_starter_app_api_analytics_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analytics/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXRpY3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFuYWx5dGljcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5dGljcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRndpemxveHNzZCUyRkRvd25sb2FkcyUyRmt1c2h0dW5lcy1zdGFydGVyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRndpemxveHNzZCUyRkRvd25sb2FkcyUyRmt1c2h0dW5lcy1zdGFydGVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNxQztBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rdXNodHVuZXMtbW9iaWxlLWFwcC8/OGMzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvd2l6bG94c3NkL0Rvd25sb2Fkcy9rdXNodHVuZXMtc3RhcnRlci9hcHAvYXBpL2FuYWx5dGljcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl0aWNzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl0aWNzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXRpY3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvd2l6bG94c3NkL0Rvd25sb2Fkcy9rdXNodHVuZXMtc3RhcnRlci9hcHAvYXBpL2FuYWx5dGljcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hbmFseXRpY3Mvcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analytics/route.ts":
/*!************************************!*\
  !*** ./app/api/analytics/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=PrismaClient!=!@prisma/client */ \"(rsc)/./node_modules/@prisma/client/default.js\");\n/* harmony import */ var _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/analytics-logic */ \"(rsc)/./lib/analytics-logic.ts\");\n\n\n\n\nconst prisma = new _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_3__.PrismaClient();\nasync function GET(request) {\n    try {\n        // Extract and verify authentication token\n        const authHeader = request.headers.get(\"authorization\");\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.extractTokenFromHeader)(authHeader);\n        if (!token) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(token);\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Invalid authentication token\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const releaseId = searchParams.get(\"releaseId\");\n        const trackId = searchParams.get(\"trackId\");\n        const period = searchParams.get(\"period\") || \"monthly\";\n        const startDate = searchParams.get(\"startDate\");\n        const endDate = searchParams.get(\"endDate\");\n        // Build date filter\n        const dateFilter = {};\n        if (startDate) {\n            dateFilter.gte = new Date(startDate);\n        }\n        if (endDate) {\n            dateFilter.lte = new Date(endDate);\n        }\n        // Get user's releases\n        const releases = await prisma.release.findMany({\n            where: {\n                primaryArtistId: user.id\n            },\n            include: {\n                tracks: true\n            }\n        });\n        const releaseIds = releases.map((r)=>r.id);\n        const trackIds = releases.flatMap((r)=>r.tracks.map((t)=>t.id));\n        if (releaseId) {\n            // Get analytics for specific release\n            const release = releases.find((r)=>r.id === releaseId);\n            if (!release) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    message: \"Release not found\"\n                }, {\n                    status: 404\n                });\n            }\n            // Mock stream data for the release\n            const streamData = generateMockStreamData(releaseId, trackIds, dateFilter);\n            const analytics = (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.calculateReleaseAnalytics)(releaseId, streamData, release);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: {\n                    release: {\n                        id: release.id,\n                        title: release.title,\n                        releaseDate: release.releaseDate,\n                        status: release.status\n                    },\n                    analytics: {\n                        ...analytics,\n                        insights: (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.generatePerformanceInsights)({\n                            totalStreams: analytics.totalStreams,\n                            totalRevenue: analytics.totalRevenue,\n                            totalTracks: analytics.trackCount,\n                            totalReleases: 1,\n                            topCountries: analytics.tracks.reduce((acc, track)=>[\n                                    ...acc,\n                                    ...track.topCountries\n                                ], []),\n                            topPlatforms: analytics.tracks.reduce((acc, track)=>[\n                                    ...acc,\n                                    ...track.topPlatforms\n                                ], []),\n                            monthlyGrowth: []\n                        })\n                    }\n                }\n            });\n        }\n        if (trackId) {\n            // Get analytics for specific track\n            const track = releases.flatMap((r)=>r.tracks).find((t)=>t.id === trackId);\n            if (!track) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    message: \"Track not found\"\n                }, {\n                    status: 404\n                });\n            }\n            // Mock stream data for the track\n            const streamData = generateMockStreamData(releaseId, [\n                trackId\n            ], dateFilter);\n            const analytics = (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.calculateTrackAnalytics)(trackId, streamData, track.title);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: {\n                    track: {\n                        id: track.id,\n                        title: track.title,\n                        releaseId: track.releaseId\n                    },\n                    analytics\n                }\n            });\n        }\n        // Get overall analytics for user\n        const streamData = generateMockStreamData(null, trackIds, dateFilter);\n        const analytics = (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.generateAnalyticsSummary)(streamData, releases, releases.flatMap((r)=>r.tracks));\n        const insights = (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.generatePerformanceInsights)(analytics);\n        const timeBasedAnalytics = (0,_lib_analytics_logic__WEBPACK_IMPORTED_MODULE_2__.getTimeBasedAnalytics)(streamData, period);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: {\n                summary: {\n                    ...analytics,\n                    insights,\n                    timeBasedAnalytics\n                },\n                releases: releases.map((release)=>({\n                        id: release.id,\n                        title: release.title,\n                        status: release.status,\n                        trackCount: release.tracks.length,\n                        releaseDate: release.releaseDate\n                    }))\n            }\n        });\n    } catch (error) {\n        console.error(\"Analytics error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            message: \"Failed to fetch analytics\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate mock stream data for demonstration\nfunction generateMockStreamData(releaseId, trackIds, dateFilter) {\n    const platforms = [\n        \"spotify\",\n        \"apple-music\",\n        \"youtube-music\",\n        \"amazon-music\",\n        \"deezer\"\n    ];\n    const countries = [\n        \"US\",\n        \"GB\",\n        \"CA\",\n        \"AU\",\n        \"DE\",\n        \"FR\",\n        \"IT\",\n        \"ES\",\n        \"NL\",\n        \"SE\"\n    ];\n    const streamData = [];\n    const startDate = dateFilter.gte || new Date(Date.now() - 90 * 24 * 60 * 60 * 1000); // 90 days ago\n    const endDate = dateFilter.lte || new Date();\n    // Generate data for each track\n    trackIds.forEach((trackId)=>{\n        if (releaseId && !trackId.startsWith(releaseId)) return;\n        // Generate daily data for the last 90 days\n        for(let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)){\n            platforms.forEach((platform)=>{\n                countries.forEach((country)=>{\n                    const streams = Math.floor(Math.random() * 1000) + 100;\n                    const revenue = streams * (Math.random() * 0.01 + 0.003); // $0.003-$0.013 per stream\n                    streamData.push({\n                        id: `${trackId}_${platform}_${country}_${d.toISOString().split(\"T\")[0]}`,\n                        releaseId: releaseId || trackId.split(\"_\")[0],\n                        trackId,\n                        platform,\n                        country,\n                        date: new Date(d),\n                        streams,\n                        revenue: Math.round(revenue * 100) / 100,\n                        currency: \"USD\"\n                    });\n                });\n            });\n        }\n    });\n    return streamData;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssT0FBTyxjQUFjO0lBQ25HLE1BQU03QyxVQUFVQyxXQUFXRyxHQUFHLElBQUksSUFBSUQ7SUFFdEMsK0JBQStCO0lBQy9CYSxTQUFTOEIsT0FBTyxDQUFDakQsQ0FBQUE7UUFDZixJQUFJRCxhQUFhLENBQUNDLFFBQVFrRCxVQUFVLENBQUNuRCxZQUFZO1FBRWpELDJDQUEyQztRQUMzQyxJQUFLLElBQUlvRCxJQUFJLElBQUk3QyxLQUFLSixZQUFZaUQsS0FBS2hELFNBQVNnRCxFQUFFQyxPQUFPLENBQUNELEVBQUVFLE9BQU8sS0FBSyxHQUFJO1lBQzFFUCxVQUFVRyxPQUFPLENBQUNLLENBQUFBO2dCQUNoQlAsVUFBVUUsT0FBTyxDQUFDTSxDQUFBQTtvQkFDaEIsTUFBTUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUssUUFBUTtvQkFDbkQsTUFBTUMsVUFBVUosVUFBV0MsQ0FBQUEsS0FBS0UsTUFBTSxLQUFLLE9BQU8sS0FBSSxHQUFJLDJCQUEyQjtvQkFFckZwQyxXQUFXc0MsSUFBSSxDQUFDO3dCQUNkaEQsSUFBSSxDQUFDLEVBQUViLFFBQVEsQ0FBQyxFQUFFc0QsU0FBUyxDQUFDLEVBQUVDLFFBQVEsQ0FBQyxFQUFFSixFQUFFVyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3hFaEUsV0FBV0EsYUFBYUMsUUFBUStELEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTt3QkFDN0MvRDt3QkFDQXNEO3dCQUNBQzt3QkFDQVMsTUFBTSxJQUFJMUQsS0FBSzZDO3dCQUNmSzt3QkFDQUksU0FBU0gsS0FBS1EsS0FBSyxDQUFDTCxVQUFVLE9BQU87d0JBQ3JDTSxVQUFVO29CQUNaO2dCQUNGO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsT0FBTzNDO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rdXNodHVuZXMtbW9iaWxlLWFwcC8uL2FwcC9hcGkvYW5hbHl0aWNzL3JvdXRlLnRzPzg5YWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IGV4dHJhY3RUb2tlbkZyb21IZWFkZXIsIHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5pbXBvcnQgeyBcbiAgZ2VuZXJhdGVBbmFseXRpY3NTdW1tYXJ5LFxuICBjYWxjdWxhdGVUcmFja0FuYWx5dGljcyxcbiAgY2FsY3VsYXRlUmVsZWFzZUFuYWx5dGljcyxcbiAgZ2VuZXJhdGVQZXJmb3JtYW5jZUluc2lnaHRzLFxuICBnZXRUaW1lQmFzZWRBbmFseXRpY3MsXG4gIGNhbGN1bGF0ZVRvdGFsU3RyZWFtcyxcbiAgY2FsY3VsYXRlVG90YWxSZXZlbnVlLFxuICBmb3JtYXRDdXJyZW5jeSxcbiAgZm9ybWF0TnVtYmVyXG59IGZyb20gJ0AvbGliL2FuYWx5dGljcy1sb2dpYyc7XG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEV4dHJhY3QgYW5kIHZlcmlmeSBhdXRoZW50aWNhdGlvbiB0b2tlblxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgY29uc3QgdG9rZW4gPSBleHRyYWN0VG9rZW5Gcm9tSGVhZGVyKGF1dGhIZWFkZXIpO1xuICAgIFxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHZlcmlmeVRva2VuKHRva2VuKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ludmFsaWQgYXV0aGVudGljYXRpb24gdG9rZW4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgcmVsZWFzZUlkID0gc2VhcmNoUGFyYW1zLmdldCgncmVsZWFzZUlkJyk7XG4gICAgY29uc3QgdHJhY2tJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3RyYWNrSWQnKTtcbiAgICBjb25zdCBwZXJpb2QgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwZXJpb2QnKSBhcyAnZGFpbHknIHwgJ3dlZWtseScgfCAnbW9udGhseScgfHwgJ21vbnRobHknO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXJ0RGF0ZScpO1xuICAgIGNvbnN0IGVuZERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdlbmREYXRlJyk7XG5cbiAgICAvLyBCdWlsZCBkYXRlIGZpbHRlclxuICAgIGNvbnN0IGRhdGVGaWx0ZXI6IGFueSA9IHt9O1xuICAgIGlmIChzdGFydERhdGUpIHtcbiAgICAgIGRhdGVGaWx0ZXIuZ3RlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICB9XG4gICAgaWYgKGVuZERhdGUpIHtcbiAgICAgIGRhdGVGaWx0ZXIubHRlID0gbmV3IERhdGUoZW5kRGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHVzZXIncyByZWxlYXNlc1xuICAgIGNvbnN0IHJlbGVhc2VzID0gYXdhaXQgcHJpc21hLnJlbGVhc2UuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgcHJpbWFyeUFydGlzdElkOiB1c2VyLmlkXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB0cmFja3M6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHJlbGVhc2VJZHMgPSByZWxlYXNlcy5tYXAociA9PiByLmlkKTtcbiAgICBjb25zdCB0cmFja0lkcyA9IHJlbGVhc2VzLmZsYXRNYXAociA9PiByLnRyYWNrcy5tYXAodCA9PiB0LmlkKSk7XG5cbiAgICBpZiAocmVsZWFzZUlkKSB7XG4gICAgICAvLyBHZXQgYW5hbHl0aWNzIGZvciBzcGVjaWZpYyByZWxlYXNlXG4gICAgICBjb25zdCByZWxlYXNlID0gcmVsZWFzZXMuZmluZChyID0+IHIuaWQgPT09IHJlbGVhc2VJZCk7XG4gICAgICBpZiAoIXJlbGVhc2UpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdSZWxlYXNlIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gTW9jayBzdHJlYW0gZGF0YSBmb3IgdGhlIHJlbGVhc2VcbiAgICAgIGNvbnN0IHN0cmVhbURhdGEgPSBnZW5lcmF0ZU1vY2tTdHJlYW1EYXRhKHJlbGVhc2VJZCwgdHJhY2tJZHMsIGRhdGVGaWx0ZXIpO1xuICAgICAgY29uc3QgYW5hbHl0aWNzID0gY2FsY3VsYXRlUmVsZWFzZUFuYWx5dGljcyhyZWxlYXNlSWQsIHN0cmVhbURhdGEsIHJlbGVhc2UpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcmVsZWFzZToge1xuICAgICAgICAgICAgaWQ6IHJlbGVhc2UuaWQsXG4gICAgICAgICAgICB0aXRsZTogcmVsZWFzZS50aXRsZSxcbiAgICAgICAgICAgIHJlbGVhc2VEYXRlOiByZWxlYXNlLnJlbGVhc2VEYXRlLFxuICAgICAgICAgICAgc3RhdHVzOiByZWxlYXNlLnN0YXR1c1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgICAgICAuLi5hbmFseXRpY3MsXG4gICAgICAgICAgICBpbnNpZ2h0czogZ2VuZXJhdGVQZXJmb3JtYW5jZUluc2lnaHRzKHtcbiAgICAgICAgICAgICAgdG90YWxTdHJlYW1zOiBhbmFseXRpY3MudG90YWxTdHJlYW1zLFxuICAgICAgICAgICAgICB0b3RhbFJldmVudWU6IGFuYWx5dGljcy50b3RhbFJldmVudWUsXG4gICAgICAgICAgICAgIHRvdGFsVHJhY2tzOiBhbmFseXRpY3MudHJhY2tDb3VudCxcbiAgICAgICAgICAgICAgdG90YWxSZWxlYXNlczogMSxcbiAgICAgICAgICAgICAgdG9wQ291bnRyaWVzOiBhbmFseXRpY3MudHJhY2tzLnJlZHVjZSgoYWNjLCB0cmFjaykgPT4gWy4uLmFjYywgLi4udHJhY2sudG9wQ291bnRyaWVzXSwgW10pLFxuICAgICAgICAgICAgICB0b3BQbGF0Zm9ybXM6IGFuYWx5dGljcy50cmFja3MucmVkdWNlKChhY2MsIHRyYWNrKSA9PiBbLi4uYWNjLCAuLi50cmFjay50b3BQbGF0Zm9ybXNdLCBbXSksXG4gICAgICAgICAgICAgIG1vbnRobHlHcm93dGg6IFtdXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRyYWNrSWQpIHtcbiAgICAgIC8vIEdldCBhbmFseXRpY3MgZm9yIHNwZWNpZmljIHRyYWNrXG4gICAgICBjb25zdCB0cmFjayA9IHJlbGVhc2VzLmZsYXRNYXAociA9PiByLnRyYWNrcykuZmluZCh0ID0+IHQuaWQgPT09IHRyYWNrSWQpO1xuICAgICAgaWYgKCF0cmFjaykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ1RyYWNrIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gTW9jayBzdHJlYW0gZGF0YSBmb3IgdGhlIHRyYWNrXG4gICAgICBjb25zdCBzdHJlYW1EYXRhID0gZ2VuZXJhdGVNb2NrU3RyZWFtRGF0YShyZWxlYXNlSWQsIFt0cmFja0lkXSwgZGF0ZUZpbHRlcik7XG4gICAgICBjb25zdCBhbmFseXRpY3MgPSBjYWxjdWxhdGVUcmFja0FuYWx5dGljcyh0cmFja0lkLCBzdHJlYW1EYXRhLCB0cmFjay50aXRsZSk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0cmFjazoge1xuICAgICAgICAgICAgaWQ6IHRyYWNrLmlkLFxuICAgICAgICAgICAgdGl0bGU6IHRyYWNrLnRpdGxlLFxuICAgICAgICAgICAgcmVsZWFzZUlkOiB0cmFjay5yZWxlYXNlSWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuYWx5dGljc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgb3ZlcmFsbCBhbmFseXRpY3MgZm9yIHVzZXJcbiAgICBjb25zdCBzdHJlYW1EYXRhID0gZ2VuZXJhdGVNb2NrU3RyZWFtRGF0YShudWxsLCB0cmFja0lkcywgZGF0ZUZpbHRlcik7XG4gICAgY29uc3QgYW5hbHl0aWNzID0gZ2VuZXJhdGVBbmFseXRpY3NTdW1tYXJ5KHN0cmVhbURhdGEsIHJlbGVhc2VzLCByZWxlYXNlcy5mbGF0TWFwKHIgPT4gci50cmFja3MpKTtcbiAgICBjb25zdCBpbnNpZ2h0cyA9IGdlbmVyYXRlUGVyZm9ybWFuY2VJbnNpZ2h0cyhhbmFseXRpY3MpO1xuICAgIGNvbnN0IHRpbWVCYXNlZEFuYWx5dGljcyA9IGdldFRpbWVCYXNlZEFuYWx5dGljcyhzdHJlYW1EYXRhLCBwZXJpb2QpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAuLi5hbmFseXRpY3MsXG4gICAgICAgICAgaW5zaWdodHMsXG4gICAgICAgICAgdGltZUJhc2VkQW5hbHl0aWNzXG4gICAgICAgIH0sXG4gICAgICAgIHJlbGVhc2VzOiByZWxlYXNlcy5tYXAocmVsZWFzZSA9PiAoe1xuICAgICAgICAgIGlkOiByZWxlYXNlLmlkLFxuICAgICAgICAgIHRpdGxlOiByZWxlYXNlLnRpdGxlLFxuICAgICAgICAgIHN0YXR1czogcmVsZWFzZS5zdGF0dXMsXG4gICAgICAgICAgdHJhY2tDb3VudDogcmVsZWFzZS50cmFja3MubGVuZ3RoLFxuICAgICAgICAgIHJlbGVhc2VEYXRlOiByZWxlYXNlLnJlbGVhc2VEYXRlXG4gICAgICAgIH0pKVxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQW5hbHl0aWNzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGFuYWx5dGljcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gR2VuZXJhdGUgbW9jayBzdHJlYW0gZGF0YSBmb3IgZGVtb25zdHJhdGlvblxuZnVuY3Rpb24gZ2VuZXJhdGVNb2NrU3RyZWFtRGF0YShyZWxlYXNlSWQ6IHN0cmluZyB8IG51bGwsIHRyYWNrSWRzOiBzdHJpbmdbXSwgZGF0ZUZpbHRlcjogYW55KSB7XG4gIGNvbnN0IHBsYXRmb3JtcyA9IFsnc3BvdGlmeScsICdhcHBsZS1tdXNpYycsICd5b3V0dWJlLW11c2ljJywgJ2FtYXpvbi1tdXNpYycsICdkZWV6ZXInXTtcbiAgY29uc3QgY291bnRyaWVzID0gWydVUycsICdHQicsICdDQScsICdBVScsICdERScsICdGUicsICdJVCcsICdFUycsICdOTCcsICdTRSddO1xuICBcbiAgY29uc3Qgc3RyZWFtRGF0YSA9IFtdO1xuICBjb25zdCBzdGFydERhdGUgPSBkYXRlRmlsdGVyLmd0ZSB8fCBuZXcgRGF0ZShEYXRlLm5vdygpIC0gOTAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gOTAgZGF5cyBhZ29cbiAgY29uc3QgZW5kRGF0ZSA9IGRhdGVGaWx0ZXIubHRlIHx8IG5ldyBEYXRlKCk7XG4gIFxuICAvLyBHZW5lcmF0ZSBkYXRhIGZvciBlYWNoIHRyYWNrXG4gIHRyYWNrSWRzLmZvckVhY2godHJhY2tJZCA9PiB7XG4gICAgaWYgKHJlbGVhc2VJZCAmJiAhdHJhY2tJZC5zdGFydHNXaXRoKHJlbGVhc2VJZCkpIHJldHVybjtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBkYWlseSBkYXRhIGZvciB0aGUgbGFzdCA5MCBkYXlzXG4gICAgZm9yIChsZXQgZCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7IGQgPD0gZW5kRGF0ZTsgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSkpIHtcbiAgICAgIHBsYXRmb3Jtcy5mb3JFYWNoKHBsYXRmb3JtID0+IHtcbiAgICAgICAgY291bnRyaWVzLmZvckVhY2goY291bnRyeSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RyZWFtcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApICsgMTAwO1xuICAgICAgICAgIGNvbnN0IHJldmVudWUgPSBzdHJlYW1zICogKE1hdGgucmFuZG9tKCkgKiAwLjAxICsgMC4wMDMpOyAvLyAkMC4wMDMtJDAuMDEzIHBlciBzdHJlYW1cbiAgICAgICAgICBcbiAgICAgICAgICBzdHJlYW1EYXRhLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGAke3RyYWNrSWR9XyR7cGxhdGZvcm19XyR7Y291bnRyeX1fJHtkLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gLFxuICAgICAgICAgICAgcmVsZWFzZUlkOiByZWxlYXNlSWQgfHwgdHJhY2tJZC5zcGxpdCgnXycpWzBdLFxuICAgICAgICAgICAgdHJhY2tJZCxcbiAgICAgICAgICAgIHBsYXRmb3JtLFxuICAgICAgICAgICAgY291bnRyeSxcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKGQpLFxuICAgICAgICAgICAgc3RyZWFtcyxcbiAgICAgICAgICAgIHJldmVudWU6IE1hdGgucm91bmQocmV2ZW51ZSAqIDEwMCkgLyAxMDAsXG4gICAgICAgICAgICBjdXJyZW5jeTogJ1VTRCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgcmV0dXJuIHN0cmVhbURhdGE7XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlByaXNtYUNsaWVudCIsImV4dHJhY3RUb2tlbkZyb21IZWFkZXIiLCJ2ZXJpZnlUb2tlbiIsImdlbmVyYXRlQW5hbHl0aWNzU3VtbWFyeSIsImNhbGN1bGF0ZVRyYWNrQW5hbHl0aWNzIiwiY2FsY3VsYXRlUmVsZWFzZUFuYWx5dGljcyIsImdlbmVyYXRlUGVyZm9ybWFuY2VJbnNpZ2h0cyIsImdldFRpbWVCYXNlZEFuYWx5dGljcyIsInByaXNtYSIsIkdFVCIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInRva2VuIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic3RhdHVzIiwidXNlciIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInJlbGVhc2VJZCIsInRyYWNrSWQiLCJwZXJpb2QiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZGF0ZUZpbHRlciIsImd0ZSIsIkRhdGUiLCJsdGUiLCJyZWxlYXNlcyIsInJlbGVhc2UiLCJmaW5kTWFueSIsIndoZXJlIiwicHJpbWFyeUFydGlzdElkIiwiaWQiLCJpbmNsdWRlIiwidHJhY2tzIiwicmVsZWFzZUlkcyIsIm1hcCIsInIiLCJ0cmFja0lkcyIsImZsYXRNYXAiLCJ0IiwiZmluZCIsInN0cmVhbURhdGEiLCJnZW5lcmF0ZU1vY2tTdHJlYW1EYXRhIiwiYW5hbHl0aWNzIiwiZGF0YSIsInRpdGxlIiwicmVsZWFzZURhdGUiLCJpbnNpZ2h0cyIsInRvdGFsU3RyZWFtcyIsInRvdGFsUmV2ZW51ZSIsInRvdGFsVHJhY2tzIiwidHJhY2tDb3VudCIsInRvdGFsUmVsZWFzZXMiLCJ0b3BDb3VudHJpZXMiLCJyZWR1Y2UiLCJhY2MiLCJ0cmFjayIsInRvcFBsYXRmb3JtcyIsIm1vbnRobHlHcm93dGgiLCJ0aW1lQmFzZWRBbmFseXRpY3MiLCJzdW1tYXJ5IiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwicGxhdGZvcm1zIiwiY291bnRyaWVzIiwibm93IiwiZm9yRWFjaCIsInN0YXJ0c1dpdGgiLCJkIiwic2V0RGF0ZSIsImdldERhdGUiLCJwbGF0Zm9ybSIsImNvdW50cnkiLCJzdHJlYW1zIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmV2ZW51ZSIsInB1c2giLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiZGF0ZSIsInJvdW5kIiwiY3VycmVuY3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analytics/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/analytics-logic.ts":
/*!********************************!*\
  !*** ./lib/analytics-logic.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateAverageStreamsPerDay: () => (/* binding */ calculateAverageStreamsPerDay),\n/* harmony export */   calculateConversionRate: () => (/* binding */ calculateConversionRate),\n/* harmony export */   calculateGrowthPercentage: () => (/* binding */ calculateGrowthPercentage),\n/* harmony export */   calculateMonthlyGrowth: () => (/* binding */ calculateMonthlyGrowth),\n/* harmony export */   calculateReleaseAnalytics: () => (/* binding */ calculateReleaseAnalytics),\n/* harmony export */   calculateRevenuePerStream: () => (/* binding */ calculateRevenuePerStream),\n/* harmony export */   calculateTotalRevenue: () => (/* binding */ calculateTotalRevenue),\n/* harmony export */   calculateTotalStreams: () => (/* binding */ calculateTotalStreams),\n/* harmony export */   calculateTrackAnalytics: () => (/* binding */ calculateTrackAnalytics),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatNumber: () => (/* binding */ formatNumber),\n/* harmony export */   generateAnalyticsSummary: () => (/* binding */ generateAnalyticsSummary),\n/* harmony export */   generatePerformanceInsights: () => (/* binding */ generatePerformanceInsights),\n/* harmony export */   getTimeBasedAnalytics: () => (/* binding */ getTimeBasedAnalytics),\n/* harmony export */   getTopCountries: () => (/* binding */ getTopCountries),\n/* harmony export */   getTopPlatforms: () => (/* binding */ getTopPlatforms)\n/* harmony export */ });\n// Calculate total streams\nfunction calculateTotalStreams(streamData) {\n    return streamData.reduce((total, stream)=>total + stream.streams, 0);\n}\n// Calculate total revenue\nfunction calculateTotalRevenue(streamData) {\n    return streamData.reduce((total, stream)=>total + stream.revenue, 0);\n}\n// Get top countries by streams\nfunction getTopCountries(streamData, limit = 10) {\n    const countryMap = new Map();\n    streamData.forEach((stream)=>{\n        const existing = countryMap.get(stream.country) || {\n            streams: 0,\n            revenue: 0\n        };\n        countryMap.set(stream.country, {\n            streams: existing.streams + stream.streams,\n            revenue: existing.revenue + stream.revenue\n        });\n    });\n    return Array.from(countryMap.entries()).map(([country, data])=>({\n            country,\n            ...data\n        })).sort((a, b)=>b.streams - a.streams).slice(0, limit);\n}\n// Get top platforms by streams\nfunction getTopPlatforms(streamData, limit = 10) {\n    const platformMap = new Map();\n    streamData.forEach((stream)=>{\n        const existing = platformMap.get(stream.platform) || {\n            streams: 0,\n            revenue: 0\n        };\n        platformMap.set(stream.platform, {\n            streams: existing.streams + stream.streams,\n            revenue: existing.revenue + stream.revenue\n        });\n    });\n    return Array.from(platformMap.entries()).map(([platform, data])=>({\n            platform,\n            ...data\n        })).sort((a, b)=>b.streams - a.streams).slice(0, limit);\n}\n// Calculate monthly growth\nfunction calculateMonthlyGrowth(streamData) {\n    const monthMap = new Map();\n    streamData.forEach((stream)=>{\n        const month = stream.date.toISOString().substring(0, 7); // YYYY-MM format\n        const existing = monthMap.get(month) || {\n            streams: 0,\n            revenue: 0\n        };\n        monthMap.set(month, {\n            streams: existing.streams + stream.streams,\n            revenue: existing.revenue + stream.revenue\n        });\n    });\n    return Array.from(monthMap.entries()).map(([month, data])=>({\n            month,\n            ...data\n        })).sort((a, b)=>a.month.localeCompare(b.month));\n}\n// Calculate growth percentage\nfunction calculateGrowthPercentage(current, previous) {\n    if (previous === 0) return current > 0 ? 100 : 0;\n    return Math.round((current - previous) / previous * 100);\n}\n// Format currency\nfunction formatCurrency(amount, currency = \"USD\") {\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: currency,\n        minimumFractionDigits: 2\n    }).format(amount);\n}\n// Format number with commas\nfunction formatNumber(num) {\n    return new Intl.NumberFormat(\"en-US\").format(num);\n}\n// Calculate average streams per day\nfunction calculateAverageStreamsPerDay(streamData) {\n    if (streamData.length === 0) return 0;\n    const dates = new Set(streamData.map((s)=>s.date.toISOString().split(\"T\")[0]));\n    const totalStreams = calculateTotalStreams(streamData);\n    return Math.round(totalStreams / dates.size);\n}\n// Calculate revenue per stream\nfunction calculateRevenuePerStream(streamData) {\n    const totalStreams = calculateTotalStreams(streamData);\n    const totalRevenue = calculateTotalRevenue(streamData);\n    return totalStreams > 0 ? totalRevenue / totalStreams : 0;\n}\n// Get analytics summary\nfunction generateAnalyticsSummary(streamData, releases, tracks) {\n    const totalStreams = calculateTotalStreams(streamData);\n    const totalRevenue = calculateTotalRevenue(streamData);\n    const totalTracks = tracks.length;\n    const totalReleases = releases.length;\n    const topCountries = getTopCountries(streamData, 10);\n    const topPlatforms = getTopPlatforms(streamData, 10);\n    const monthlyGrowth = calculateMonthlyGrowth(streamData);\n    return {\n        totalStreams,\n        totalRevenue,\n        totalTracks,\n        totalReleases,\n        topCountries,\n        topPlatforms,\n        monthlyGrowth\n    };\n}\n// Calculate track analytics\nfunction calculateTrackAnalytics(trackId, streamData, trackTitle) {\n    const trackStreams = streamData.filter((s)=>s.trackId === trackId);\n    const totalStreams = calculateTotalStreams(trackStreams);\n    const totalRevenue = calculateTotalRevenue(trackStreams);\n    const topCountries = getTopCountries(trackStreams, 5);\n    const topPlatforms = getTopPlatforms(trackStreams, 5);\n    // Group by date for daily streams\n    const dailyMap = new Map();\n    trackStreams.forEach((stream)=>{\n        const date = stream.date.toISOString().split(\"T\")[0];\n        dailyMap.set(date, (dailyMap.get(date) || 0) + stream.streams);\n    });\n    const dailyStreams = Array.from(dailyMap.entries()).map(([date, streams])=>({\n            date,\n            streams\n        })).sort((a, b)=>a.date.localeCompare(b.date));\n    return {\n        trackId,\n        trackTitle,\n        totalStreams,\n        totalRevenue,\n        topCountries,\n        topPlatforms,\n        dailyStreams\n    };\n}\n// Calculate release analytics\nfunction calculateReleaseAnalytics(releaseId, streamData, release) {\n    const releaseStreams = streamData.filter((s)=>s.releaseId === releaseId);\n    const totalStreams = calculateTotalStreams(releaseStreams);\n    const totalRevenue = calculateTotalRevenue(releaseStreams);\n    // Calculate analytics for each track\n    const tracks = release.tracks.map((track)=>calculateTrackAnalytics(track.id, releaseStreams, track.title));\n    return {\n        releaseId,\n        releaseTitle: release.metadata.title,\n        totalStreams,\n        totalRevenue,\n        trackCount: release.tracks.length,\n        tracks,\n        releaseDate: new Date(release.metadata.releaseDate),\n        distributionDate: release.distributionDate ? new Date(release.distributionDate) : undefined\n    };\n}\n// Generate performance insights\nfunction generatePerformanceInsights(analytics) {\n    const insights = [];\n    // Growth insights\n    if (analytics.monthlyGrowth.length >= 2) {\n        const latest = analytics.monthlyGrowth[analytics.monthlyGrowth.length - 1];\n        const previous = analytics.monthlyGrowth[analytics.monthlyGrowth.length - 2];\n        const streamGrowth = calculateGrowthPercentage(latest.streams, previous.streams);\n        const revenueGrowth = calculateGrowthPercentage(latest.revenue, previous.revenue);\n        if (streamGrowth > 0) {\n            insights.push(`Streams increased by ${streamGrowth}% this month`);\n        }\n        if (revenueGrowth > 0) {\n            insights.push(`Revenue increased by ${revenueGrowth}% this month`);\n        }\n    }\n    // Top performer insights\n    if (analytics.topCountries.length > 0) {\n        const topCountry = analytics.topCountries[0];\n        insights.push(`${topCountry.country} is your top market with ${formatNumber(topCountry.streams)} streams`);\n    }\n    if (analytics.topPlatforms.length > 0) {\n        const topPlatform = analytics.topPlatforms[0];\n        insights.push(`${topPlatform.platform} generates the most streams with ${formatNumber(topPlatform.streams)}`);\n    }\n    return insights;\n}\n// Calculate conversion rate\nfunction calculateConversionRate(streams, listeners) {\n    return listeners > 0 ? Math.round(streams / listeners * 100) / 100 : 0;\n}\n// Get time-based analytics\nfunction getTimeBasedAnalytics(streamData, period) {\n    const periodMap = new Map();\n    streamData.forEach((stream)=>{\n        let periodKey;\n        switch(period){\n            case \"daily\":\n                periodKey = stream.date.toISOString().split(\"T\")[0];\n                break;\n            case \"weekly\":\n                const weekStart = new Date(stream.date);\n                weekStart.setDate(weekStart.getDate() - weekStart.getDay());\n                periodKey = weekStart.toISOString().split(\"T\")[0];\n                break;\n            case \"monthly\":\n                periodKey = stream.date.toISOString().substring(0, 7);\n                break;\n            default:\n                periodKey = stream.date.toISOString().split(\"T\")[0];\n        }\n        const existing = periodMap.get(periodKey) || {\n            streams: 0,\n            revenue: 0\n        };\n        periodMap.set(periodKey, {\n            streams: existing.streams + stream.streams,\n            revenue: existing.revenue + stream.revenue\n        });\n    });\n    return Array.from(periodMap.entries()).map(([period, data])=>({\n            period,\n            ...data\n        })).sort((a, b)=>a.period.localeCompare(b.period));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUUrRSxNQUFNLENBQUNuRSxhQUFhLENBQUNYLEVBQUU4RSxNQUFNO0FBQ25EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3VzaHR1bmVzLW1vYmlsZS1hcHAvLi9saWIvYW5hbHl0aWNzLWxvZ2ljLnRzPzA1YWIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBTdHJlYW1EYXRhIHtcbiAgaWQ6IHN0cmluZztcbiAgcmVsZWFzZUlkOiBzdHJpbmc7XG4gIHRyYWNrSWQ6IHN0cmluZztcbiAgcGxhdGZvcm06IHN0cmluZztcbiAgY291bnRyeTogc3RyaW5nO1xuICBkYXRlOiBEYXRlO1xuICBzdHJlYW1zOiBudW1iZXI7XG4gIHJldmVudWU6IG51bWJlcjtcbiAgY3VycmVuY3k6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmFseXRpY3NTdW1tYXJ5IHtcbiAgdG90YWxTdHJlYW1zOiBudW1iZXI7XG4gIHRvdGFsUmV2ZW51ZTogbnVtYmVyO1xuICB0b3RhbFRyYWNrczogbnVtYmVyO1xuICB0b3RhbFJlbGVhc2VzOiBudW1iZXI7XG4gIHRvcENvdW50cmllczogQXJyYXk8eyBjb3VudHJ5OiBzdHJpbmc7IHN0cmVhbXM6IG51bWJlcjsgcmV2ZW51ZTogbnVtYmVyIH0+O1xuICB0b3BQbGF0Zm9ybXM6IEFycmF5PHsgcGxhdGZvcm06IHN0cmluZzsgc3RyZWFtczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT47XG4gIG1vbnRobHlHcm93dGg6IEFycmF5PHsgbW9udGg6IHN0cmluZzsgc3RyZWFtczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tBbmFseXRpY3Mge1xuICB0cmFja0lkOiBzdHJpbmc7XG4gIHRyYWNrVGl0bGU6IHN0cmluZztcbiAgdG90YWxTdHJlYW1zOiBudW1iZXI7XG4gIHRvdGFsUmV2ZW51ZTogbnVtYmVyO1xuICB0b3BDb3VudHJpZXM6IEFycmF5PHsgY291bnRyeTogc3RyaW5nOyBzdHJlYW1zOiBudW1iZXIgfT47XG4gIHRvcFBsYXRmb3JtczogQXJyYXk8eyBwbGF0Zm9ybTogc3RyaW5nOyBzdHJlYW1zOiBudW1iZXIgfT47XG4gIGRhaWx5U3RyZWFtczogQXJyYXk8eyBkYXRlOiBzdHJpbmc7IHN0cmVhbXM6IG51bWJlciB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlQW5hbHl0aWNzIHtcbiAgcmVsZWFzZUlkOiBzdHJpbmc7XG4gIHJlbGVhc2VUaXRsZTogc3RyaW5nO1xuICB0b3RhbFN0cmVhbXM6IG51bWJlcjtcbiAgdG90YWxSZXZlbnVlOiBudW1iZXI7XG4gIHRyYWNrQ291bnQ6IG51bWJlcjtcbiAgdHJhY2tzOiBUcmFja0FuYWx5dGljc1tdO1xuICByZWxlYXNlRGF0ZTogRGF0ZTtcbiAgZGlzdHJpYnV0aW9uRGF0ZT86IERhdGU7XG59XG5cbi8vIENhbGN1bGF0ZSB0b3RhbCBzdHJlYW1zXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxTdHJlYW1zKHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSk6IG51bWJlciB7XG4gIHJldHVybiBzdHJlYW1EYXRhLnJlZHVjZSgodG90YWwsIHN0cmVhbSkgPT4gdG90YWwgKyBzdHJlYW0uc3RyZWFtcywgMCk7XG59XG5cbi8vIENhbGN1bGF0ZSB0b3RhbCByZXZlbnVlXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxSZXZlbnVlKHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSk6IG51bWJlciB7XG4gIHJldHVybiBzdHJlYW1EYXRhLnJlZHVjZSgodG90YWwsIHN0cmVhbSkgPT4gdG90YWwgKyBzdHJlYW0ucmV2ZW51ZSwgMCk7XG59XG5cbi8vIEdldCB0b3AgY291bnRyaWVzIGJ5IHN0cmVhbXNcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BDb3VudHJpZXMoc3RyZWFtRGF0YTogU3RyZWFtRGF0YVtdLCBsaW1pdDogbnVtYmVyID0gMTApOiBBcnJheTx7IGNvdW50cnk6IHN0cmluZzsgc3RyZWFtczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT4ge1xuICBjb25zdCBjb3VudHJ5TWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgc3RyZWFtczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT4oKTtcbiAgXG4gIHN0cmVhbURhdGEuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gY291bnRyeU1hcC5nZXQoc3RyZWFtLmNvdW50cnkpIHx8IHsgc3RyZWFtczogMCwgcmV2ZW51ZTogMCB9O1xuICAgIGNvdW50cnlNYXAuc2V0KHN0cmVhbS5jb3VudHJ5LCB7XG4gICAgICBzdHJlYW1zOiBleGlzdGluZy5zdHJlYW1zICsgc3RyZWFtLnN0cmVhbXMsXG4gICAgICByZXZlbnVlOiBleGlzdGluZy5yZXZlbnVlICsgc3RyZWFtLnJldmVudWVcbiAgICB9KTtcbiAgfSk7XG4gIFxuICByZXR1cm4gQXJyYXkuZnJvbShjb3VudHJ5TWFwLmVudHJpZXMoKSlcbiAgICAubWFwKChbY291bnRyeSwgZGF0YV0pID0+ICh7IGNvdW50cnksIC4uLmRhdGEgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuc3RyZWFtcyAtIGEuc3RyZWFtcylcbiAgICAuc2xpY2UoMCwgbGltaXQpO1xufVxuXG4vLyBHZXQgdG9wIHBsYXRmb3JtcyBieSBzdHJlYW1zXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wUGxhdGZvcm1zKHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSwgbGltaXQ6IG51bWJlciA9IDEwKTogQXJyYXk8eyBwbGF0Zm9ybTogc3RyaW5nOyBzdHJlYW1zOiBudW1iZXI7IHJldmVudWU6IG51bWJlciB9PiB7XG4gIGNvbnN0IHBsYXRmb3JtTWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgc3RyZWFtczogbnVtYmVyOyByZXZlbnVlOiBudW1iZXIgfT4oKTtcbiAgXG4gIHN0cmVhbURhdGEuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gcGxhdGZvcm1NYXAuZ2V0KHN0cmVhbS5wbGF0Zm9ybSkgfHwgeyBzdHJlYW1zOiAwLCByZXZlbnVlOiAwIH07XG4gICAgcGxhdGZvcm1NYXAuc2V0KHN0cmVhbS5wbGF0Zm9ybSwge1xuICAgICAgc3RyZWFtczogZXhpc3Rpbmcuc3RyZWFtcyArIHN0cmVhbS5zdHJlYW1zLFxuICAgICAgcmV2ZW51ZTogZXhpc3RpbmcucmV2ZW51ZSArIHN0cmVhbS5yZXZlbnVlXG4gICAgfSk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIEFycmF5LmZyb20ocGxhdGZvcm1NYXAuZW50cmllcygpKVxuICAgIC5tYXAoKFtwbGF0Zm9ybSwgZGF0YV0pID0+ICh7IHBsYXRmb3JtLCAuLi5kYXRhIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0cmVhbXMgLSBhLnN0cmVhbXMpXG4gICAgLnNsaWNlKDAsIGxpbWl0KTtcbn1cblxuLy8gQ2FsY3VsYXRlIG1vbnRobHkgZ3Jvd3RoXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTW9udGhseUdyb3d0aChzdHJlYW1EYXRhOiBTdHJlYW1EYXRhW10pOiBBcnJheTx7IG1vbnRoOiBzdHJpbmc7IHN0cmVhbXM6IG51bWJlcjsgcmV2ZW51ZTogbnVtYmVyIH0+IHtcbiAgY29uc3QgbW9udGhNYXAgPSBuZXcgTWFwPHN0cmluZywgeyBzdHJlYW1zOiBudW1iZXI7IHJldmVudWU6IG51bWJlciB9PigpO1xuICBcbiAgc3RyZWFtRGF0YS5mb3JFYWNoKHN0cmVhbSA9PiB7XG4gICAgY29uc3QgbW9udGggPSBzdHJlYW0uZGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCA3KTsgLy8gWVlZWS1NTSBmb3JtYXRcbiAgICBjb25zdCBleGlzdGluZyA9IG1vbnRoTWFwLmdldChtb250aCkgfHwgeyBzdHJlYW1zOiAwLCByZXZlbnVlOiAwIH07XG4gICAgbW9udGhNYXAuc2V0KG1vbnRoLCB7XG4gICAgICBzdHJlYW1zOiBleGlzdGluZy5zdHJlYW1zICsgc3RyZWFtLnN0cmVhbXMsXG4gICAgICByZXZlbnVlOiBleGlzdGluZy5yZXZlbnVlICsgc3RyZWFtLnJldmVudWVcbiAgICB9KTtcbiAgfSk7XG4gIFxuICByZXR1cm4gQXJyYXkuZnJvbShtb250aE1hcC5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW21vbnRoLCBkYXRhXSkgPT4gKHsgbW9udGgsIC4uLmRhdGEgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGEubW9udGgubG9jYWxlQ29tcGFyZShiLm1vbnRoKSk7XG59XG5cbi8vIENhbGN1bGF0ZSBncm93dGggcGVyY2VudGFnZVxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUdyb3d0aFBlcmNlbnRhZ2UoY3VycmVudDogbnVtYmVyLCBwcmV2aW91czogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHByZXZpb3VzID09PSAwKSByZXR1cm4gY3VycmVudCA+IDAgPyAxMDAgOiAwO1xuICByZXR1cm4gTWF0aC5yb3VuZCgoKGN1cnJlbnQgLSBwcmV2aW91cykgLyBwcmV2aW91cykgKiAxMDApO1xufVxuXG4vLyBGb3JtYXQgY3VycmVuY3lcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShhbW91bnQ6IG51bWJlciwgY3VycmVuY3k6IHN0cmluZyA9ICdVU0QnKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6IGN1cnJlbmN5LFxuICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMlxuICB9KS5mb3JtYXQoYW1vdW50KTtcbn1cblxuLy8gRm9ybWF0IG51bWJlciB3aXRoIGNvbW1hc1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW06IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLVVTJykuZm9ybWF0KG51bSk7XG59XG5cbi8vIENhbGN1bGF0ZSBhdmVyYWdlIHN0cmVhbXMgcGVyIGRheVxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUF2ZXJhZ2VTdHJlYW1zUGVyRGF5KHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSk6IG51bWJlciB7XG4gIGlmIChzdHJlYW1EYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG4gIFxuICBjb25zdCBkYXRlcyA9IG5ldyBTZXQoc3RyZWFtRGF0YS5tYXAocyA9PiBzLmRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdKSk7XG4gIGNvbnN0IHRvdGFsU3RyZWFtcyA9IGNhbGN1bGF0ZVRvdGFsU3RyZWFtcyhzdHJlYW1EYXRhKTtcbiAgXG4gIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsU3RyZWFtcyAvIGRhdGVzLnNpemUpO1xufVxuXG4vLyBDYWxjdWxhdGUgcmV2ZW51ZSBwZXIgc3RyZWFtXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUmV2ZW51ZVBlclN0cmVhbShzdHJlYW1EYXRhOiBTdHJlYW1EYXRhW10pOiBudW1iZXIge1xuICBjb25zdCB0b3RhbFN0cmVhbXMgPSBjYWxjdWxhdGVUb3RhbFN0cmVhbXMoc3RyZWFtRGF0YSk7XG4gIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IGNhbGN1bGF0ZVRvdGFsUmV2ZW51ZShzdHJlYW1EYXRhKTtcbiAgXG4gIHJldHVybiB0b3RhbFN0cmVhbXMgPiAwID8gdG90YWxSZXZlbnVlIC8gdG90YWxTdHJlYW1zIDogMDtcbn1cblxuLy8gR2V0IGFuYWx5dGljcyBzdW1tYXJ5XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBbmFseXRpY3NTdW1tYXJ5KHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSwgcmVsZWFzZXM6IGFueVtdLCB0cmFja3M6IGFueVtdKTogQW5hbHl0aWNzU3VtbWFyeSB7XG4gIGNvbnN0IHRvdGFsU3RyZWFtcyA9IGNhbGN1bGF0ZVRvdGFsU3RyZWFtcyhzdHJlYW1EYXRhKTtcbiAgY29uc3QgdG90YWxSZXZlbnVlID0gY2FsY3VsYXRlVG90YWxSZXZlbnVlKHN0cmVhbURhdGEpO1xuICBjb25zdCB0b3RhbFRyYWNrcyA9IHRyYWNrcy5sZW5ndGg7XG4gIGNvbnN0IHRvdGFsUmVsZWFzZXMgPSByZWxlYXNlcy5sZW5ndGg7XG4gIFxuICBjb25zdCB0b3BDb3VudHJpZXMgPSBnZXRUb3BDb3VudHJpZXMoc3RyZWFtRGF0YSwgMTApO1xuICBjb25zdCB0b3BQbGF0Zm9ybXMgPSBnZXRUb3BQbGF0Zm9ybXMoc3RyZWFtRGF0YSwgMTApO1xuICBjb25zdCBtb250aGx5R3Jvd3RoID0gY2FsY3VsYXRlTW9udGhseUdyb3d0aChzdHJlYW1EYXRhKTtcbiAgXG4gIHJldHVybiB7XG4gICAgdG90YWxTdHJlYW1zLFxuICAgIHRvdGFsUmV2ZW51ZSxcbiAgICB0b3RhbFRyYWNrcyxcbiAgICB0b3RhbFJlbGVhc2VzLFxuICAgIHRvcENvdW50cmllcyxcbiAgICB0b3BQbGF0Zm9ybXMsXG4gICAgbW9udGhseUdyb3d0aFxuICB9O1xufVxuXG4vLyBDYWxjdWxhdGUgdHJhY2sgYW5hbHl0aWNzXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVHJhY2tBbmFseXRpY3ModHJhY2tJZDogc3RyaW5nLCBzdHJlYW1EYXRhOiBTdHJlYW1EYXRhW10sIHRyYWNrVGl0bGU6IHN0cmluZyk6IFRyYWNrQW5hbHl0aWNzIHtcbiAgY29uc3QgdHJhY2tTdHJlYW1zID0gc3RyZWFtRGF0YS5maWx0ZXIocyA9PiBzLnRyYWNrSWQgPT09IHRyYWNrSWQpO1xuICBcbiAgY29uc3QgdG90YWxTdHJlYW1zID0gY2FsY3VsYXRlVG90YWxTdHJlYW1zKHRyYWNrU3RyZWFtcyk7XG4gIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IGNhbGN1bGF0ZVRvdGFsUmV2ZW51ZSh0cmFja1N0cmVhbXMpO1xuICBcbiAgY29uc3QgdG9wQ291bnRyaWVzID0gZ2V0VG9wQ291bnRyaWVzKHRyYWNrU3RyZWFtcywgNSk7XG4gIGNvbnN0IHRvcFBsYXRmb3JtcyA9IGdldFRvcFBsYXRmb3Jtcyh0cmFja1N0cmVhbXMsIDUpO1xuICBcbiAgLy8gR3JvdXAgYnkgZGF0ZSBmb3IgZGFpbHkgc3RyZWFtc1xuICBjb25zdCBkYWlseU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIHRyYWNrU3RyZWFtcy5mb3JFYWNoKHN0cmVhbSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IHN0cmVhbS5kYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICBkYWlseU1hcC5zZXQoZGF0ZSwgKGRhaWx5TWFwLmdldChkYXRlKSB8fCAwKSArIHN0cmVhbS5zdHJlYW1zKTtcbiAgfSk7XG4gIFxuICBjb25zdCBkYWlseVN0cmVhbXMgPSBBcnJheS5mcm9tKGRhaWx5TWFwLmVudHJpZXMoKSlcbiAgICAubWFwKChbZGF0ZSwgc3RyZWFtc10pID0+ICh7IGRhdGUsIHN0cmVhbXMgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSkpO1xuICBcbiAgcmV0dXJuIHtcbiAgICB0cmFja0lkLFxuICAgIHRyYWNrVGl0bGUsXG4gICAgdG90YWxTdHJlYW1zLFxuICAgIHRvdGFsUmV2ZW51ZSxcbiAgICB0b3BDb3VudHJpZXMsXG4gICAgdG9wUGxhdGZvcm1zLFxuICAgIGRhaWx5U3RyZWFtc1xuICB9O1xufVxuXG4vLyBDYWxjdWxhdGUgcmVsZWFzZSBhbmFseXRpY3NcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVSZWxlYXNlQW5hbHl0aWNzKHJlbGVhc2VJZDogc3RyaW5nLCBzdHJlYW1EYXRhOiBTdHJlYW1EYXRhW10sIHJlbGVhc2U6IGFueSk6IFJlbGVhc2VBbmFseXRpY3Mge1xuICBjb25zdCByZWxlYXNlU3RyZWFtcyA9IHN0cmVhbURhdGEuZmlsdGVyKHMgPT4gcy5yZWxlYXNlSWQgPT09IHJlbGVhc2VJZCk7XG4gIFxuICBjb25zdCB0b3RhbFN0cmVhbXMgPSBjYWxjdWxhdGVUb3RhbFN0cmVhbXMocmVsZWFzZVN0cmVhbXMpO1xuICBjb25zdCB0b3RhbFJldmVudWUgPSBjYWxjdWxhdGVUb3RhbFJldmVudWUocmVsZWFzZVN0cmVhbXMpO1xuICBcbiAgLy8gQ2FsY3VsYXRlIGFuYWx5dGljcyBmb3IgZWFjaCB0cmFja1xuICBjb25zdCB0cmFja3MgPSByZWxlYXNlLnRyYWNrcy5tYXAoKHRyYWNrOiBhbnkpID0+IFxuICAgIGNhbGN1bGF0ZVRyYWNrQW5hbHl0aWNzKHRyYWNrLmlkLCByZWxlYXNlU3RyZWFtcywgdHJhY2sudGl0bGUpXG4gICk7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlbGVhc2VJZCxcbiAgICByZWxlYXNlVGl0bGU6IHJlbGVhc2UubWV0YWRhdGEudGl0bGUsXG4gICAgdG90YWxTdHJlYW1zLFxuICAgIHRvdGFsUmV2ZW51ZSxcbiAgICB0cmFja0NvdW50OiByZWxlYXNlLnRyYWNrcy5sZW5ndGgsXG4gICAgdHJhY2tzLFxuICAgIHJlbGVhc2VEYXRlOiBuZXcgRGF0ZShyZWxlYXNlLm1ldGFkYXRhLnJlbGVhc2VEYXRlKSxcbiAgICBkaXN0cmlidXRpb25EYXRlOiByZWxlYXNlLmRpc3RyaWJ1dGlvbkRhdGUgPyBuZXcgRGF0ZShyZWxlYXNlLmRpc3RyaWJ1dGlvbkRhdGUpIDogdW5kZWZpbmVkXG4gIH07XG59XG5cbi8vIEdlbmVyYXRlIHBlcmZvcm1hbmNlIGluc2lnaHRzXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQZXJmb3JtYW5jZUluc2lnaHRzKGFuYWx5dGljczogQW5hbHl0aWNzU3VtbWFyeSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgaW5zaWdodHM6IHN0cmluZ1tdID0gW107XG4gIFxuICAvLyBHcm93dGggaW5zaWdodHNcbiAgaWYgKGFuYWx5dGljcy5tb250aGx5R3Jvd3RoLmxlbmd0aCA+PSAyKSB7XG4gICAgY29uc3QgbGF0ZXN0ID0gYW5hbHl0aWNzLm1vbnRobHlHcm93dGhbYW5hbHl0aWNzLm1vbnRobHlHcm93dGgubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgcHJldmlvdXMgPSBhbmFseXRpY3MubW9udGhseUdyb3d0aFthbmFseXRpY3MubW9udGhseUdyb3d0aC5sZW5ndGggLSAyXTtcbiAgICBcbiAgICBjb25zdCBzdHJlYW1Hcm93dGggPSBjYWxjdWxhdGVHcm93dGhQZXJjZW50YWdlKGxhdGVzdC5zdHJlYW1zLCBwcmV2aW91cy5zdHJlYW1zKTtcbiAgICBjb25zdCByZXZlbnVlR3Jvd3RoID0gY2FsY3VsYXRlR3Jvd3RoUGVyY2VudGFnZShsYXRlc3QucmV2ZW51ZSwgcHJldmlvdXMucmV2ZW51ZSk7XG4gICAgXG4gICAgaWYgKHN0cmVhbUdyb3d0aCA+IDApIHtcbiAgICAgIGluc2lnaHRzLnB1c2goYFN0cmVhbXMgaW5jcmVhc2VkIGJ5ICR7c3RyZWFtR3Jvd3RofSUgdGhpcyBtb250aGApO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmV2ZW51ZUdyb3d0aCA+IDApIHtcbiAgICAgIGluc2lnaHRzLnB1c2goYFJldmVudWUgaW5jcmVhc2VkIGJ5ICR7cmV2ZW51ZUdyb3d0aH0lIHRoaXMgbW9udGhgKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFRvcCBwZXJmb3JtZXIgaW5zaWdodHNcbiAgaWYgKGFuYWx5dGljcy50b3BDb3VudHJpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHRvcENvdW50cnkgPSBhbmFseXRpY3MudG9wQ291bnRyaWVzWzBdO1xuICAgIGluc2lnaHRzLnB1c2goYCR7dG9wQ291bnRyeS5jb3VudHJ5fSBpcyB5b3VyIHRvcCBtYXJrZXQgd2l0aCAke2Zvcm1hdE51bWJlcih0b3BDb3VudHJ5LnN0cmVhbXMpfSBzdHJlYW1zYCk7XG4gIH1cbiAgXG4gIGlmIChhbmFseXRpY3MudG9wUGxhdGZvcm1zLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB0b3BQbGF0Zm9ybSA9IGFuYWx5dGljcy50b3BQbGF0Zm9ybXNbMF07XG4gICAgaW5zaWdodHMucHVzaChgJHt0b3BQbGF0Zm9ybS5wbGF0Zm9ybX0gZ2VuZXJhdGVzIHRoZSBtb3N0IHN0cmVhbXMgd2l0aCAke2Zvcm1hdE51bWJlcih0b3BQbGF0Zm9ybS5zdHJlYW1zKX1gKTtcbiAgfVxuICBcbiAgcmV0dXJuIGluc2lnaHRzO1xufVxuXG4vLyBDYWxjdWxhdGUgY29udmVyc2lvbiByYXRlXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQ29udmVyc2lvblJhdGUoc3RyZWFtczogbnVtYmVyLCBsaXN0ZW5lcnM6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBsaXN0ZW5lcnMgPiAwID8gTWF0aC5yb3VuZCgoc3RyZWFtcyAvIGxpc3RlbmVycykgKiAxMDApIC8gMTAwIDogMDtcbn1cblxuLy8gR2V0IHRpbWUtYmFzZWQgYW5hbHl0aWNzXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZUJhc2VkQW5hbHl0aWNzKHN0cmVhbURhdGE6IFN0cmVhbURhdGFbXSwgcGVyaW9kOiAnZGFpbHknIHwgJ3dlZWtseScgfCAnbW9udGhseScpOiBBcnJheTx7IHBlcmlvZDogc3RyaW5nOyBzdHJlYW1zOiBudW1iZXI7IHJldmVudWU6IG51bWJlciB9PiB7XG4gIGNvbnN0IHBlcmlvZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCB7IHN0cmVhbXM6IG51bWJlcjsgcmV2ZW51ZTogbnVtYmVyIH0+KCk7XG4gIFxuICBzdHJlYW1EYXRhLmZvckVhY2goc3RyZWFtID0+IHtcbiAgICBsZXQgcGVyaW9kS2V5OiBzdHJpbmc7XG4gICAgXG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2RhaWx5JzpcbiAgICAgICAgcGVyaW9kS2V5ID0gc3RyZWFtLmRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgICAgIGNvbnN0IHdlZWtTdGFydCA9IG5ldyBEYXRlKHN0cmVhbS5kYXRlKTtcbiAgICAgICAgd2Vla1N0YXJ0LnNldERhdGUod2Vla1N0YXJ0LmdldERhdGUoKSAtIHdlZWtTdGFydC5nZXREYXkoKSk7XG4gICAgICAgIHBlcmlvZEtleSA9IHdlZWtTdGFydC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbW9udGhseSc6XG4gICAgICAgIHBlcmlvZEtleSA9IHN0cmVhbS5kYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHBlcmlvZEtleSA9IHN0cmVhbS5kYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZXhpc3RpbmcgPSBwZXJpb2RNYXAuZ2V0KHBlcmlvZEtleSkgfHwgeyBzdHJlYW1zOiAwLCByZXZlbnVlOiAwIH07XG4gICAgcGVyaW9kTWFwLnNldChwZXJpb2RLZXksIHtcbiAgICAgIHN0cmVhbXM6IGV4aXN0aW5nLnN0cmVhbXMgKyBzdHJlYW0uc3RyZWFtcyxcbiAgICAgIHJldmVudWU6IGV4aXN0aW5nLnJldmVudWUgKyBzdHJlYW0ucmV2ZW51ZVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIHJldHVybiBBcnJheS5mcm9tKHBlcmlvZE1hcC5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW3BlcmlvZCwgZGF0YV0pID0+ICh7IHBlcmlvZCwgLi4uZGF0YSB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYS5wZXJpb2QubG9jYWxlQ29tcGFyZShiLnBlcmlvZCkpO1xufVxuIl0sIm5hbWVzIjpbImNhbGN1bGF0ZVRvdGFsU3RyZWFtcyIsInN0cmVhbURhdGEiLCJyZWR1Y2UiLCJ0b3RhbCIsInN0cmVhbSIsInN0cmVhbXMiLCJjYWxjdWxhdGVUb3RhbFJldmVudWUiLCJyZXZlbnVlIiwiZ2V0VG9wQ291bnRyaWVzIiwibGltaXQiLCJjb3VudHJ5TWFwIiwiTWFwIiwiZm9yRWFjaCIsImV4aXN0aW5nIiwiZ2V0IiwiY291bnRyeSIsInNldCIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJtYXAiLCJkYXRhIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJnZXRUb3BQbGF0Zm9ybXMiLCJwbGF0Zm9ybU1hcCIsInBsYXRmb3JtIiwiY2FsY3VsYXRlTW9udGhseUdyb3d0aCIsIm1vbnRoTWFwIiwibW9udGgiLCJkYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJsb2NhbGVDb21wYXJlIiwiY2FsY3VsYXRlR3Jvd3RoUGVyY2VudGFnZSIsImN1cnJlbnQiLCJwcmV2aW91cyIsIk1hdGgiLCJyb3VuZCIsImZvcm1hdEN1cnJlbmN5IiwiYW1vdW50IiwiY3VycmVuY3kiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJmb3JtYXQiLCJmb3JtYXROdW1iZXIiLCJudW0iLCJjYWxjdWxhdGVBdmVyYWdlU3RyZWFtc1BlckRheSIsImxlbmd0aCIsImRhdGVzIiwiU2V0IiwicyIsInNwbGl0IiwidG90YWxTdHJlYW1zIiwic2l6ZSIsImNhbGN1bGF0ZVJldmVudWVQZXJTdHJlYW0iLCJ0b3RhbFJldmVudWUiLCJnZW5lcmF0ZUFuYWx5dGljc1N1bW1hcnkiLCJyZWxlYXNlcyIsInRyYWNrcyIsInRvdGFsVHJhY2tzIiwidG90YWxSZWxlYXNlcyIsInRvcENvdW50cmllcyIsInRvcFBsYXRmb3JtcyIsIm1vbnRobHlHcm93dGgiLCJjYWxjdWxhdGVUcmFja0FuYWx5dGljcyIsInRyYWNrSWQiLCJ0cmFja1RpdGxlIiwidHJhY2tTdHJlYW1zIiwiZmlsdGVyIiwiZGFpbHlNYXAiLCJkYWlseVN0cmVhbXMiLCJjYWxjdWxhdGVSZWxlYXNlQW5hbHl0aWNzIiwicmVsZWFzZUlkIiwicmVsZWFzZSIsInJlbGVhc2VTdHJlYW1zIiwidHJhY2siLCJpZCIsInRpdGxlIiwicmVsZWFzZVRpdGxlIiwibWV0YWRhdGEiLCJ0cmFja0NvdW50IiwicmVsZWFzZURhdGUiLCJEYXRlIiwiZGlzdHJpYnV0aW9uRGF0ZSIsInVuZGVmaW5lZCIsImdlbmVyYXRlUGVyZm9ybWFuY2VJbnNpZ2h0cyIsImFuYWx5dGljcyIsImluc2lnaHRzIiwibGF0ZXN0Iiwic3RyZWFtR3Jvd3RoIiwicmV2ZW51ZUdyb3d0aCIsInB1c2giLCJ0b3BDb3VudHJ5IiwidG9wUGxhdGZvcm0iLCJjYWxjdWxhdGVDb252ZXJzaW9uUmF0ZSIsImxpc3RlbmVycyIsImdldFRpbWVCYXNlZEFuYWx5dGljcyIsInBlcmlvZCIsInBlcmlvZE1hcCIsInBlcmlvZEtleSIsIndlZWtTdGFydCIsInNldERhdGUiLCJnZXREYXRlIiwiZ2V0RGF5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/analytics-logic.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthResponse: () => (/* binding */ createAuthResponse),\n/* harmony export */   extractTokenFromHeader: () => (/* binding */ extractTokenFromHeader),\n/* harmony export */   generateEmailVerificationToken: () => (/* binding */ generateEmailVerificationToken),\n/* harmony export */   generatePasswordResetToken: () => (/* binding */ generatePasswordResetToken),\n/* harmony export */   generateSessionToken: () => (/* binding */ generateSessionToken),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail),\n/* harmony export */   isValidPassword: () => (/* binding */ isValidPassword),\n/* harmony export */   isValidUsername: () => (/* binding */ isValidUsername),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-super-secret-jwt-key-change-in-production\";\nconst JWT_EXPIRES_IN = \"7d\";\n// Hash password\nasync function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, saltRounds);\n}\n// Verify password\nasync function verifyPassword(password, hashedPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n}\n// Generate JWT token\nfunction generateToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\n// Verify JWT token\nfunction verifyToken(token) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n    } catch (error) {\n        return undefined;\n    }\n}\n// Generate session token\nfunction generateSessionToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Validate email format\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n// Validate password strength\nfunction isValidPassword(password) {\n    if (password.length < 8) {\n        return {\n            valid: false,\n            message: \"Password must be at least 8 characters long\"\n        };\n    }\n    if (!/(?=.*[a-z])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one lowercase letter\"\n        };\n    }\n    if (!/(?=.*[A-Z])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one uppercase letter\"\n        };\n    }\n    if (!/(?=.*\\d)/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one number\"\n        };\n    }\n    if (!/(?=.*[@$!%*?&])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one special character (@$!%*?&)\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// Validate username format\nfunction isValidUsername(username) {\n    if (username.length < 3) {\n        return {\n            valid: false,\n            message: \"Username must be at least 3 characters long\"\n        };\n    }\n    if (username.length > 20) {\n        return {\n            valid: false,\n            message: \"Username must be less than 20 characters long\"\n        };\n    }\n    if (!/^[a-zA-Z0-9_]+$/.test(username)) {\n        return {\n            valid: false,\n            message: \"Username can only contain letters, numbers, and underscores\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// Generate password reset token\nfunction generatePasswordResetToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Generate email verification token\nfunction generateEmailVerificationToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Extract token from Authorization header\nfunction extractTokenFromHeader(authHeader) {\n    if (!authHeader) return null;\n    const parts = authHeader.split(\" \");\n    if (parts.length !== 2 || parts[0] !== \"Bearer\") return null;\n    return parts[1];\n}\n// Create auth response\nfunction createAuthResponse(user, token) {\n    return {\n        success: true,\n        message: \"Authentication successful\",\n        data: {\n            user: {\n                id: user.id,\n                email: user.email,\n                username: user.username || user.email.split(\"@\")[0],\n                firstName: user.firstName,\n                lastName: user.lastName,\n                avatar: user.avatar,\n                bio: user.bio,\n                website: user.website,\n                location: user.location,\n                role: user.role,\n                isEmailVerified: user.isEmailVerified,\n                createdAt: user.createdAt\n            },\n            token,\n            expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVUsT0FBTztJQUV4RCxPQUFPQSxLQUFLLENBQUMsRUFBRTtBQUNqQjtBQUVBLHVCQUF1QjtBQUNoQixTQUFTRSxtQkFBbUJDLElBQVMsRUFBRXZCLEtBQWE7SUFDekQsT0FBTztRQUNMd0IsU0FBUztRQUNUWCxTQUFTO1FBQ1RZLE1BQU07WUFDSkYsTUFBTTtnQkFDSkcsSUFBSUgsS0FBS0csRUFBRTtnQkFDWG5CLE9BQU9nQixLQUFLaEIsS0FBSztnQkFDakJRLFVBQVVRLEtBQUtSLFFBQVEsSUFBSVEsS0FBS2hCLEtBQUssQ0FBQ2MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNuRE0sV0FBV0osS0FBS0ksU0FBUztnQkFDekJDLFVBQVVMLEtBQUtLLFFBQVE7Z0JBQ3ZCQyxRQUFRTixLQUFLTSxNQUFNO2dCQUNuQkMsS0FBS1AsS0FBS08sR0FBRztnQkFDYkMsU0FBU1IsS0FBS1EsT0FBTztnQkFDckJDLFVBQVVULEtBQUtTLFFBQVE7Z0JBQ3ZCQyxNQUFNVixLQUFLVSxJQUFJO2dCQUNmQyxpQkFBaUJYLEtBQUtXLGVBQWU7Z0JBQ3JDQyxXQUFXWixLQUFLWSxTQUFTO1lBQzNCO1lBQ0FuQztZQUNBb0MsV0FBVyxJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSyxNQUFNLFNBQVM7UUFDckU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3VzaHR1bmVzLW1vYmlsZS1hcHAvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgcmFuZG9tQnl0ZXMgfSBmcm9tICdjcnlwdG8nO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zdXBlci1zZWNyZXQtand0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbic7XG5jb25zdCBKV1RfRVhQSVJFU19JTiA9ICc3ZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclBheWxvYWQge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgZmlyc3ROYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgbGFzdE5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICBiaW8/OiBzdHJpbmcgfCBudWxsO1xuICB3ZWJzaXRlPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9jYXRpb24/OiBzdHJpbmcgfCBudWxsO1xuICBhdmF0YXI/OiBzdHJpbmcgfCBudWxsO1xuICBpc0VtYWlsVmVyaWZpZWQ6IGJvb2xlYW47XG4gIHJvbGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoVG9rZW4ge1xuICB0b2tlbjogc3RyaW5nO1xuICBleHBpcmVzQXQ6IERhdGU7XG59XG5cbi8vIEhhc2ggcGFzc3dvcmRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMjtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcbn1cblxuLy8gVmVyaWZ5IHBhc3N3b3JkXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbn1cblxuLy8gR2VuZXJhdGUgSldUIHRva2VuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbihwYXlsb2FkOiBVc2VyUGF5bG9hZCk6IHN0cmluZyB7XG4gIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogSldUX0VYUElSRVNfSU4gfSk7XG59XG5cbi8vIFZlcmlmeSBKV1QgdG9rZW5cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogVXNlclBheWxvYWQgfCB1bmRlZmluZWQge1xuICB0cnkge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBVc2VyUGF5bG9hZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIHNlc3Npb24gdG9rZW5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25Ub2tlbigpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLy8gVmFsaWRhdGUgZW1haWwgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcbn1cblxuLy8gVmFsaWRhdGUgcGFzc3dvcmQgc3RyZW5ndGhcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IG1lc3NhZ2U/OiBzdHJpbmcgfSB7XG4gIGlmIChwYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZycgfTtcbiAgfVxuICBcbiAgaWYgKCEvKD89LipbYS16XSkvLnRlc3QocGFzc3dvcmQpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJyB9O1xuICB9XG4gIFxuICBpZiAoIS8oPz0uKltBLVpdKS8udGVzdChwYXNzd29yZCkpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6ICdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInIH07XG4gIH1cbiAgXG4gIGlmICghLyg/PS4qXFxkKS8udGVzdChwYXNzd29yZCkpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6ICdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIG51bWJlcicgfTtcbiAgfVxuICBcbiAgaWYgKCEvKD89LipbQCQhJSo/Jl0pLy50ZXN0KHBhc3N3b3JkKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogJ1Bhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgKEAkISUqPyYpJyB9O1xuICB9XG4gIFxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xufVxuXG4vLyBWYWxpZGF0ZSB1c2VybmFtZSBmb3JtYXRcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkVXNlcm5hbWUodXNlcm5hbWU6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IG1lc3NhZ2U/OiBzdHJpbmcgfSB7XG4gIGlmICh1c2VybmFtZS5sZW5ndGggPCAzKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgbXVzdCBiZSBhdCBsZWFzdCAzIGNoYXJhY3RlcnMgbG9uZycgfTtcbiAgfVxuICBcbiAgaWYgKHVzZXJuYW1lLmxlbmd0aCA+IDIwKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMjAgY2hhcmFjdGVycyBsb25nJyB9O1xuICB9XG4gIFxuICBpZiAoIS9eW2EtekEtWjAtOV9dKyQvLnRlc3QodXNlcm5hbWUpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdW5kZXJzY29yZXMnIH07XG4gIH1cbiAgXG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59XG5cbi8vIEdlbmVyYXRlIHBhc3N3b3JkIHJlc2V0IHRva2VuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0VG9rZW4oKTogc3RyaW5nIHtcbiAgcmV0dXJuIHJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7XG59XG5cbi8vIEdlbmVyYXRlIGVtYWlsIHZlcmlmaWNhdGlvbiB0b2tlblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbigpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLy8gRXh0cmFjdCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFRva2VuRnJvbUhlYWRlcihhdXRoSGVhZGVyOiBzdHJpbmcgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghYXV0aEhlYWRlcikgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCBwYXJ0cyA9IGF1dGhIZWFkZXIuc3BsaXQoJyAnKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMiB8fCBwYXJ0c1swXSAhPT0gJ0JlYXJlcicpIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIHBhcnRzWzFdO1xufVxuXG4vLyBDcmVhdGUgYXV0aCByZXNwb25zZVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUF1dGhSZXNwb25zZSh1c2VyOiBhbnksIHRva2VuOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsJyxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfHwgdXNlci5lbWFpbC5zcGxpdCgnQCcpWzBdLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcbiAgICAgICAgYXZhdGFyOiB1c2VyLmF2YXRhcixcbiAgICAgICAgYmlvOiB1c2VyLmJpbyxcbiAgICAgICAgd2Vic2l0ZTogdXNlci53ZWJzaXRlLFxuICAgICAgICBsb2NhdGlvbjogdXNlci5sb2NhdGlvbixcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICBpc0VtYWlsVmVyaWZpZWQ6IHVzZXIuaXNFbWFpbFZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHVzZXIuY3JlYXRlZEF0XG4gICAgICB9LFxuICAgICAgdG9rZW4sXG4gICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkgLy8gNyBkYXlzXG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsInJhbmRvbUJ5dGVzIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfRVhQSVJFU19JTiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJwYXlsb2FkIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ2ZXJpZnkiLCJlcnJvciIsInVuZGVmaW5lZCIsImdlbmVyYXRlU2Vzc2lvblRva2VuIiwidG9TdHJpbmciLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwiaXNWYWxpZFBhc3N3b3JkIiwibGVuZ3RoIiwidmFsaWQiLCJtZXNzYWdlIiwiaXNWYWxpZFVzZXJuYW1lIiwidXNlcm5hbWUiLCJnZW5lcmF0ZVBhc3N3b3JkUmVzZXRUb2tlbiIsImdlbmVyYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiIsImV4dHJhY3RUb2tlbkZyb21IZWFkZXIiLCJhdXRoSGVhZGVyIiwicGFydHMiLCJzcGxpdCIsImNyZWF0ZUF1dGhSZXNwb25zZSIsInVzZXIiLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhdmF0YXIiLCJiaW8iLCJ3ZWJzaXRlIiwibG9jYXRpb24iLCJyb2xlIiwiaXNFbWFpbFZlcmlmaWVkIiwiY3JlYXRlZEF0IiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/prisma","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/@prisma"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();