"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "@prisma/client/runtime/library.js":
/*!****************************************************!*\
  !*** external "@prisma/client/runtime/library.js" ***!
  \****************************************************/
/***/ ((module) => {

module.exports = require("@prisma/client/runtime/library.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_wizloxssd_Downloads_kushtunes_starter_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/upload/route.ts */ \"(rsc)/./app/api/upload/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/wizloxssd/Downloads/kushtunes-starter/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_wizloxssd_Downloads_kushtunes_starter_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/upload/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRndpemxveHNzZCUyRkRvd25sb2FkcyUyRmt1c2h0dW5lcy1zdGFydGVyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRndpemxveHNzZCUyRkRvd25sb2FkcyUyRmt1c2h0dW5lcy1zdGFydGVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNrQztBQUNqRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rdXNodHVuZXMtbW9iaWxlLWFwcC8/MWJkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvd2l6bG94c3NkL0Rvd25sb2Fkcy9rdXNodHVuZXMtc3RhcnRlci9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvd2l6bG94c3NkL0Rvd25sb2Fkcy9rdXNodHVuZXMtc3RhcnRlci9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS91cGxvYWQvcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/upload/route.ts":
/*!*********************************!*\
  !*** ./app/api/upload/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=PrismaClient!=!@prisma/client */ \"(rsc)/./node_modules/@prisma/client/default.js\");\n/* harmony import */ var _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/upload-logic */ \"(rsc)/./lib/upload-logic.ts\");\n/* harmony import */ var _lib_release_logic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/release-logic */ \"(rsc)/./lib/release-logic.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\n\n\n\nconst prisma = new _barrel_optimize_names_PrismaClient_prisma_client__WEBPACK_IMPORTED_MODULE_5__.PrismaClient();\n// Optimize image - Standard cover art dimensions\nasync function optimizeImage(buffer) {\n    return await sharp__WEBPACK_IMPORTED_MODULE_1___default()(buffer).resize(3000, 3000, {\n        fit: \"cover\",\n        withoutEnlargement: true\n    }).jpeg({\n        quality: 85,\n        progressive: true,\n        mozjpeg: true // Better compression\n    }).toBuffer();\n}\nasync function POST(request) {\n    try {\n        // Extract and verify authentication token\n        const authHeader = request.headers.get(\"authorization\");\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_4__.extractTokenFromHeader)(authHeader);\n        if (!token) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_4__.verifyToken)(token);\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Invalid authentication token\"\n            }, {\n                status: 401\n            });\n        }\n        const formData = await request.formData();\n        // Extract track data\n        const tracks = [];\n        let trackIndex = 0;\n        while(formData.has(`track_${trackIndex}`)){\n            const audioFile = formData.get(`track_${trackIndex}`);\n            const title = formData.get(`track_${trackIndex}_title`);\n            if (audioFile && title) {\n                tracks.push({\n                    title,\n                    audioFile\n                });\n            }\n            trackIndex++;\n        }\n        // Extract metadata\n        const metadata = {\n            title: formData.get(\"title\"),\n            artist: formData.get(\"artist\"),\n            releaseDate: formData.get(\"releaseDate\"),\n            genre: formData.get(\"genre\"),\n            language: formData.get(\"language\"),\n            type: formData.get(\"type\") || \"SINGLE\"\n        };\n        const artworkFile = formData.get(\"artwork\");\n        // Validate required fields\n        if (!tracks.length || !metadata.title || !metadata.artist || !artworkFile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate release metadata\n        const metadataValidation = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.validateReleaseMetadata)(metadata);\n        if (!metadataValidation.valid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: metadataValidation.errors.join(\", \")\n            }, {\n                status: 400\n            });\n        }\n        // Validate all audio files\n        const audioValidations = tracks.map((track)=>(0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.validateAudioFile)(track.audioFile));\n        const invalidAudio = audioValidations.find((v)=>!v.valid);\n        if (invalidAudio) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: invalidAudio.error\n            }, {\n                status: 400\n            });\n        }\n        // Validate artwork file\n        const imageValidation = (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.validateImageFile)(artworkFile);\n        if (!imageValidation.valid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: imageValidation.error\n            }, {\n                status: 400\n            });\n        }\n        // Generate unique IDs\n        const releaseId = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.generateReleaseId)();\n        const upc = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.generateUPC)();\n        const tempFilePaths = [];\n        try {\n            // Process and save artwork\n            const artworkBuffer = Buffer.from(await artworkFile.arrayBuffer());\n            const optimizedImage = await optimizeImage(artworkBuffer);\n            const artworkFileId = (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.generateFileId)();\n            const artworkFilename = (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.generateSafeFilename)(artworkFile.name, artworkFileId);\n            // Save artwork (in production, upload to cloud storage)\n            const artworkPath = `/uploads/${user.id}/images/${artworkFilename}`;\n            tempFilePaths.push(artworkPath);\n            // Process artwork metadata\n            const artworkMetadata = await (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.processImageMetadata)(artworkPath);\n            // Create release in database\n            const release = await prisma.release.create({\n                data: {\n                    id: releaseId,\n                    primaryArtistId: user.id,\n                    title: metadata.title,\n                    releaseDate: new Date(metadata.releaseDate),\n                    status: \"DRAFT\",\n                    coverUrl: `https://kushtunes-storage.com/artwork/${artworkFileId}.jpg`,\n                    genre: metadata.genre,\n                    territories: JSON.stringify([\n                        \"US\"\n                    ]),\n                    upc: upc,\n                    language: metadata.language,\n                    releaseType: metadata.type\n                }\n            });\n            // Process and save tracks\n            const trackRecords = [];\n            for(let i = 0; i < tracks.length; i++){\n                const track = tracks[i];\n                const trackId = (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.generateFileId)();\n                const isrc = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.generateISRC)();\n                // Save audio file (in production, upload to cloud storage)\n                const audioPath = `/uploads/${user.id}/audio/${(0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.generateSafeFilename)(track.audioFile.name, trackId)}`;\n                tempFilePaths.push(audioPath);\n                // Process audio metadata\n                const audioMetadata = await (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.processAudioMetadata)(audioPath);\n                // Create track record\n                const trackRecord = await prisma.track.create({\n                    data: {\n                        id: trackId,\n                        releaseId,\n                        title: track.title,\n                        trackNumber: i + 1,\n                        isrc,\n                        audioUrl: `https://kushtunes-storage.com/audio/${trackId}.${track.audioFile.name.split(\".\").pop()}`,\n                        duration: audioMetadata.duration || 180,\n                        language: metadata.language,\n                        bitrate: audioMetadata.bitrate,\n                        sampleRate: audioMetadata.sampleRate,\n                        channels: audioMetadata.channels\n                    }\n                });\n                trackRecords.push(trackRecord);\n            }\n            // Calculate release duration\n            const totalDuration = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.calculateReleaseDuration)(trackRecords.map((t)=>({\n                    duration: t.duration\n                })));\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                message: \"Release uploaded successfully\",\n                data: {\n                    releaseId: release.id,\n                    title: release.title,\n                    status: release.status,\n                    coverUrl: release.coverUrl,\n                    upc: release.upc,\n                    uploadedAt: release.createdAt,\n                    tracks: trackRecords.map((track)=>({\n                            id: track.id,\n                            title: track.title,\n                            trackNumber: track.trackNumber,\n                            duration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(track.duration),\n                            isrc: track.isrc\n                        })),\n                    summary: {\n                        trackCount: trackRecords.length,\n                        totalDuration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(totalDuration),\n                        releaseType: metadata.type\n                    },\n                    fileInfo: {\n                        audioFiles: tracks.map((t)=>({\n                                name: t.audioFile.name,\n                                size: t.audioFile.size,\n                                type: t.audioFile.type\n                            })),\n                        artwork: {\n                            name: artworkFile.name,\n                            size: optimizedImage.length,\n                            type: \"image/jpeg\",\n                            dimensions: `${artworkMetadata.width}x${artworkMetadata.height}`\n                        }\n                    }\n                }\n            });\n        } catch (error) {\n            // Clean up temporary files on error\n            await (0,_lib_upload_logic__WEBPACK_IMPORTED_MODULE_2__.cleanupTempFiles)(tempFilePaths);\n            throw error;\n        }\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            message: \"Upload failed. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        // Extract and verify authentication token\n        const authHeader = request.headers.get(\"authorization\");\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_4__.extractTokenFromHeader)(authHeader);\n        if (!token) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_4__.verifyToken)(token);\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"Invalid authentication token\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const releaseId = searchParams.get(\"releaseId\");\n        if (releaseId) {\n            // Get specific release for authenticated user\n            const release = await prisma.release.findFirst({\n                where: {\n                    id: releaseId,\n                    primaryArtistId: user.id\n                },\n                include: {\n                    tracks: {\n                        orderBy: {\n                            trackNumber: \"asc\"\n                        }\n                    },\n                    deliveries: true\n                }\n            });\n            if (!release) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    message: \"Release not found\"\n                }, {\n                    status: 404\n                });\n            }\n            // Calculate release analytics\n            const totalDuration = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.calculateReleaseDuration)(release.tracks.map((t)=>({\n                    duration: t.duration\n                })));\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: {\n                    ...release,\n                    summary: {\n                        trackCount: release.tracks.length,\n                        totalDuration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(totalDuration),\n                        releaseType: release.releaseType || \"SINGLE\"\n                    },\n                    tracks: release.tracks.map((track)=>({\n                            ...track,\n                            duration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(track.duration)\n                        }))\n                }\n            });\n        } else {\n            // Get all releases for authenticated user\n            const releases = await prisma.release.findMany({\n                where: {\n                    primaryArtistId: user.id\n                },\n                include: {\n                    tracks: {\n                        orderBy: {\n                            trackNumber: \"asc\"\n                        }\n                    },\n                    deliveries: true\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n            // Add summary data to each release\n            const releasesWithSummary = releases.map((release)=>{\n                const totalDuration = (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.calculateReleaseDuration)(release.tracks.map((t)=>({\n                        duration: t.duration\n                    })));\n                return {\n                    ...release,\n                    summary: {\n                        trackCount: release.tracks.length,\n                        totalDuration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(totalDuration),\n                        releaseType: release.releaseType || \"SINGLE\"\n                    },\n                    tracks: release.tracks.map((track)=>({\n                            ...track,\n                            duration: (0,_lib_release_logic__WEBPACK_IMPORTED_MODULE_3__.formatDuration)(track.duration)\n                        }))\n                };\n            });\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: releasesWithSummary,\n                count: releases.length\n            });\n        }\n    } catch (error) {\n        console.error(\"Release fetch error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            message: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUK0MsTUFBTWdEO2dCQUNOQyxPQUFPSCxTQUFTM0UsTUFBTTtZQUN4QjtRQUNGO0lBRUYsRUFBRSxPQUFPVyxPQUFPO1FBQ2RzRCxRQUFRdEQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBT2pFLGtGQUFZQSxDQUFDbUMsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9DLFNBQVM7UUFBd0IsR0FDbkQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rdXNodHVuZXMtbW9iaWxlLWFwcC8uL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzP2E4OGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IHNoYXJwIGZyb20gJ3NoYXJwJztcbmltcG9ydCB7IFxuICB2YWxpZGF0ZUF1ZGlvRmlsZSwgXG4gIHZhbGlkYXRlSW1hZ2VGaWxlLCBcbiAgZ2VuZXJhdGVGaWxlSWQsIFxuICBnZW5lcmF0ZVNhZmVGaWxlbmFtZSxcbiAgc2F2ZVVwbG9hZGVkRmlsZSxcbiAgcHJvY2Vzc0F1ZGlvTWV0YWRhdGEsXG4gIHByb2Nlc3NJbWFnZU1ldGFkYXRhLFxuICBnZW5lcmF0ZUZpbGVIYXNoLFxuICBjaGVja0ZpbGVFeGlzdHMsXG4gIGNsZWFudXBUZW1wRmlsZXNcbn0gZnJvbSAnQC9saWIvdXBsb2FkLWxvZ2ljJztcbmltcG9ydCB7IFxuICBnZW5lcmF0ZVJlbGVhc2VJZCwgXG4gIGdlbmVyYXRlVVBDLCBcbiAgZ2VuZXJhdGVJU1JDLFxuICB2YWxpZGF0ZVJlbGVhc2VNZXRhZGF0YSxcbiAgdmFsaWRhdGVUcmFjayxcbiAgdmFsaWRhdGVSZWxlYXNlRm9yRGlzdHJpYnV0aW9uLFxuICBjYWxjdWxhdGVSZWxlYXNlRHVyYXRpb24sXG4gIGZvcm1hdER1cmF0aW9uXG59IGZyb20gJ0AvbGliL3JlbGVhc2UtbG9naWMnO1xuaW1wb3J0IHsgZXh0cmFjdFRva2VuRnJvbUhlYWRlciwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG4vLyBPcHRpbWl6ZSBpbWFnZSAtIFN0YW5kYXJkIGNvdmVyIGFydCBkaW1lbnNpb25zXG5hc3luYyBmdW5jdGlvbiBvcHRpbWl6ZUltYWdlKGJ1ZmZlcjogQnVmZmVyKTogUHJvbWlzZTxCdWZmZXI+IHtcbiAgcmV0dXJuIGF3YWl0IHNoYXJwKGJ1ZmZlcilcbiAgICAucmVzaXplKDMwMDAsIDMwMDAsIHsgXG4gICAgICBmaXQ6ICdjb3ZlcicsIC8vIEVuc3VyZSBzcXVhcmUgYXNwZWN0IHJhdGlvXG4gICAgICB3aXRob3V0RW5sYXJnZW1lbnQ6IHRydWUgXG4gICAgfSlcbiAgICAuanBlZyh7IFxuICAgICAgcXVhbGl0eTogODUsIC8vIFJlZHVjZWQgZm9yIHNtYWxsZXIgZmlsZSBzaXplXG4gICAgICBwcm9ncmVzc2l2ZTogdHJ1ZSxcbiAgICAgIG1vempwZWc6IHRydWUgLy8gQmV0dGVyIGNvbXByZXNzaW9uXG4gICAgfSlcbiAgICAudG9CdWZmZXIoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IGFuZCB2ZXJpZnkgYXV0aGVudGljYXRpb24gdG9rZW5cbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xuICAgIGNvbnN0IHRva2VuID0gZXh0cmFjdFRva2VuRnJvbUhlYWRlcihhdXRoSGVhZGVyKTtcbiAgICBcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB2ZXJpZnlUb2tlbih0b2tlbik7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdJbnZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0cmFjayBkYXRhXG4gICAgY29uc3QgdHJhY2tzOiBBcnJheTx7IHRpdGxlOiBzdHJpbmc7IGF1ZGlvRmlsZTogRmlsZSB9PiA9IFtdO1xuICAgIGxldCB0cmFja0luZGV4ID0gMDtcbiAgICB3aGlsZSAoZm9ybURhdGEuaGFzKGB0cmFja18ke3RyYWNrSW5kZXh9YCkpIHtcbiAgICAgIGNvbnN0IGF1ZGlvRmlsZSA9IGZvcm1EYXRhLmdldChgdHJhY2tfJHt0cmFja0luZGV4fWApIGFzIEZpbGU7XG4gICAgICBjb25zdCB0aXRsZSA9IGZvcm1EYXRhLmdldChgdHJhY2tfJHt0cmFja0luZGV4fV90aXRsZWApIGFzIHN0cmluZztcbiAgICAgIFxuICAgICAgaWYgKGF1ZGlvRmlsZSAmJiB0aXRsZSkge1xuICAgICAgICB0cmFja3MucHVzaCh7IHRpdGxlLCBhdWRpb0ZpbGUgfSk7XG4gICAgICB9XG4gICAgICB0cmFja0luZGV4Kys7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBtZXRhZGF0YVxuICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgdGl0bGU6IGZvcm1EYXRhLmdldCgndGl0bGUnKSBhcyBzdHJpbmcsXG4gICAgICBhcnRpc3Q6IGZvcm1EYXRhLmdldCgnYXJ0aXN0JykgYXMgc3RyaW5nLFxuICAgICAgcmVsZWFzZURhdGU6IGZvcm1EYXRhLmdldCgncmVsZWFzZURhdGUnKSBhcyBzdHJpbmcsXG4gICAgICBnZW5yZTogZm9ybURhdGEuZ2V0KCdnZW5yZScpIGFzIHN0cmluZyxcbiAgICAgIGxhbmd1YWdlOiBmb3JtRGF0YS5nZXQoJ2xhbmd1YWdlJykgYXMgc3RyaW5nLFxuICAgICAgdHlwZTogKGZvcm1EYXRhLmdldCgndHlwZScpIGFzIHN0cmluZykgfHwgJ1NJTkdMRSdcbiAgICB9O1xuXG4gICAgY29uc3QgYXJ0d29ya0ZpbGUgPSBmb3JtRGF0YS5nZXQoJ2FydHdvcmsnKSBhcyBGaWxlO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCF0cmFja3MubGVuZ3RoIHx8ICFtZXRhZGF0YS50aXRsZSB8fCAhbWV0YWRhdGEuYXJ0aXN0IHx8ICFhcnR3b3JrRmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSByZWxlYXNlIG1ldGFkYXRhXG4gICAgY29uc3QgbWV0YWRhdGFWYWxpZGF0aW9uID0gdmFsaWRhdGVSZWxlYXNlTWV0YWRhdGEobWV0YWRhdGEpO1xuICAgIGlmICghbWV0YWRhdGFWYWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IG1ldGFkYXRhVmFsaWRhdGlvbi5lcnJvcnMuam9pbignLCAnKSB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgYWxsIGF1ZGlvIGZpbGVzXG4gICAgY29uc3QgYXVkaW9WYWxpZGF0aW9ucyA9IHRyYWNrcy5tYXAodHJhY2sgPT4gdmFsaWRhdGVBdWRpb0ZpbGUodHJhY2suYXVkaW9GaWxlKSk7XG4gICAgY29uc3QgaW52YWxpZEF1ZGlvID0gYXVkaW9WYWxpZGF0aW9ucy5maW5kKHYgPT4gIXYudmFsaWQpO1xuICAgIGlmIChpbnZhbGlkQXVkaW8pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogaW52YWxpZEF1ZGlvLmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBhcnR3b3JrIGZpbGVcbiAgICBjb25zdCBpbWFnZVZhbGlkYXRpb24gPSB2YWxpZGF0ZUltYWdlRmlsZShhcnR3b3JrRmlsZSk7XG4gICAgaWYgKCFpbWFnZVZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogaW1hZ2VWYWxpZGF0aW9uLmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzXG4gICAgY29uc3QgcmVsZWFzZUlkID0gZ2VuZXJhdGVSZWxlYXNlSWQoKTtcbiAgICBjb25zdCB1cGMgPSBnZW5lcmF0ZVVQQygpO1xuICAgIGNvbnN0IHRlbXBGaWxlUGF0aHM6IHN0cmluZ1tdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJvY2VzcyBhbmQgc2F2ZSBhcnR3b3JrXG4gICAgICBjb25zdCBhcnR3b3JrQnVmZmVyID0gQnVmZmVyLmZyb20oYXdhaXQgYXJ0d29ya0ZpbGUuYXJyYXlCdWZmZXIoKSk7XG4gICAgICBjb25zdCBvcHRpbWl6ZWRJbWFnZSA9IGF3YWl0IG9wdGltaXplSW1hZ2UoYXJ0d29ya0J1ZmZlcik7XG4gICAgICBjb25zdCBhcnR3b3JrRmlsZUlkID0gZ2VuZXJhdGVGaWxlSWQoKTtcbiAgICAgIGNvbnN0IGFydHdvcmtGaWxlbmFtZSA9IGdlbmVyYXRlU2FmZUZpbGVuYW1lKGFydHdvcmtGaWxlLm5hbWUsIGFydHdvcmtGaWxlSWQpO1xuICAgICAgXG4gICAgICAvLyBTYXZlIGFydHdvcmsgKGluIHByb2R1Y3Rpb24sIHVwbG9hZCB0byBjbG91ZCBzdG9yYWdlKVxuICAgICAgY29uc3QgYXJ0d29ya1BhdGggPSBgL3VwbG9hZHMvJHt1c2VyLmlkfS9pbWFnZXMvJHthcnR3b3JrRmlsZW5hbWV9YDtcbiAgICAgIHRlbXBGaWxlUGF0aHMucHVzaChhcnR3b3JrUGF0aCk7XG5cbiAgICAgIC8vIFByb2Nlc3MgYXJ0d29yayBtZXRhZGF0YVxuICAgICAgY29uc3QgYXJ0d29ya01ldGFkYXRhID0gYXdhaXQgcHJvY2Vzc0ltYWdlTWV0YWRhdGEoYXJ0d29ya1BhdGgpO1xuXG4gICAgICAvLyBDcmVhdGUgcmVsZWFzZSBpbiBkYXRhYmFzZVxuICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHByaXNtYS5yZWxlYXNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogcmVsZWFzZUlkLFxuICAgICAgICAgIHByaW1hcnlBcnRpc3RJZDogdXNlci5pZCxcbiAgICAgICAgICB0aXRsZTogbWV0YWRhdGEudGl0bGUsXG4gICAgICAgICAgcmVsZWFzZURhdGU6IG5ldyBEYXRlKG1ldGFkYXRhLnJlbGVhc2VEYXRlKSxcbiAgICAgICAgICBzdGF0dXM6ICdEUkFGVCcsXG4gICAgICAgICAgY292ZXJVcmw6IGBodHRwczovL2t1c2h0dW5lcy1zdG9yYWdlLmNvbS9hcnR3b3JrLyR7YXJ0d29ya0ZpbGVJZH0uanBnYCxcbiAgICAgICAgICBnZW5yZTogbWV0YWRhdGEuZ2VucmUsXG4gICAgICAgICAgdGVycml0b3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnVVMnXSksXG4gICAgICAgICAgdXBjOiB1cGMsXG4gICAgICAgICAgbGFuZ3VhZ2U6IG1ldGFkYXRhLmxhbmd1YWdlLFxuICAgICAgICAgIHJlbGVhc2VUeXBlOiBtZXRhZGF0YS50eXBlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcm9jZXNzIGFuZCBzYXZlIHRyYWNrc1xuICAgICAgY29uc3QgdHJhY2tSZWNvcmRzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0cmFjayA9IHRyYWNrc1tpXTtcbiAgICAgICAgY29uc3QgdHJhY2tJZCA9IGdlbmVyYXRlRmlsZUlkKCk7XG4gICAgICAgIGNvbnN0IGlzcmMgPSBnZW5lcmF0ZUlTUkMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNhdmUgYXVkaW8gZmlsZSAoaW4gcHJvZHVjdGlvbiwgdXBsb2FkIHRvIGNsb3VkIHN0b3JhZ2UpXG4gICAgICAgIGNvbnN0IGF1ZGlvUGF0aCA9IGAvdXBsb2Fkcy8ke3VzZXIuaWR9L2F1ZGlvLyR7Z2VuZXJhdGVTYWZlRmlsZW5hbWUodHJhY2suYXVkaW9GaWxlLm5hbWUsIHRyYWNrSWQpfWA7XG4gICAgICAgIHRlbXBGaWxlUGF0aHMucHVzaChhdWRpb1BhdGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzcyBhdWRpbyBtZXRhZGF0YVxuICAgICAgICBjb25zdCBhdWRpb01ldGFkYXRhID0gYXdhaXQgcHJvY2Vzc0F1ZGlvTWV0YWRhdGEoYXVkaW9QYXRoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0cmFjayByZWNvcmRcbiAgICAgICAgY29uc3QgdHJhY2tSZWNvcmQgPSBhd2FpdCBwcmlzbWEudHJhY2suY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogdHJhY2tJZCxcbiAgICAgICAgICAgIHJlbGVhc2VJZCxcbiAgICAgICAgICAgIHRpdGxlOiB0cmFjay50aXRsZSxcbiAgICAgICAgICAgIHRyYWNrTnVtYmVyOiBpICsgMSxcbiAgICAgICAgICAgIGlzcmMsXG4gICAgICAgICAgICBhdWRpb1VybDogYGh0dHBzOi8va3VzaHR1bmVzLXN0b3JhZ2UuY29tL2F1ZGlvLyR7dHJhY2tJZH0uJHt0cmFjay5hdWRpb0ZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpfWAsXG4gICAgICAgICAgICBkdXJhdGlvbjogYXVkaW9NZXRhZGF0YS5kdXJhdGlvbiB8fCAxODAsXG4gICAgICAgICAgICBsYW5ndWFnZTogbWV0YWRhdGEubGFuZ3VhZ2UsXG4gICAgICAgICAgICBiaXRyYXRlOiBhdWRpb01ldGFkYXRhLmJpdHJhdGUsXG4gICAgICAgICAgICBzYW1wbGVSYXRlOiBhdWRpb01ldGFkYXRhLnNhbXBsZVJhdGUsXG4gICAgICAgICAgICBjaGFubmVsczogYXVkaW9NZXRhZGF0YS5jaGFubmVsc1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0cmFja1JlY29yZHMucHVzaCh0cmFja1JlY29yZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSByZWxlYXNlIGR1cmF0aW9uXG4gICAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gY2FsY3VsYXRlUmVsZWFzZUR1cmF0aW9uKHRyYWNrUmVjb3Jkcy5tYXAodCA9PiAoeyBkdXJhdGlvbjogdC5kdXJhdGlvbiB9KSkpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUmVsZWFzZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcmVsZWFzZUlkOiByZWxlYXNlLmlkLFxuICAgICAgICAgIHRpdGxlOiByZWxlYXNlLnRpdGxlLFxuICAgICAgICAgIHN0YXR1czogcmVsZWFzZS5zdGF0dXMsXG4gICAgICAgICAgY292ZXJVcmw6IHJlbGVhc2UuY292ZXJVcmwsXG4gICAgICAgICAgdXBjOiByZWxlYXNlLnVwYyxcbiAgICAgICAgICB1cGxvYWRlZEF0OiByZWxlYXNlLmNyZWF0ZWRBdCxcbiAgICAgICAgICB0cmFja3M6IHRyYWNrUmVjb3Jkcy5tYXAodHJhY2sgPT4gKHtcbiAgICAgICAgICAgIGlkOiB0cmFjay5pZCxcbiAgICAgICAgICAgIHRpdGxlOiB0cmFjay50aXRsZSxcbiAgICAgICAgICAgIHRyYWNrTnVtYmVyOiB0cmFjay50cmFja051bWJlcixcbiAgICAgICAgICAgIGR1cmF0aW9uOiBmb3JtYXREdXJhdGlvbih0cmFjay5kdXJhdGlvbiksXG4gICAgICAgICAgICBpc3JjOiB0cmFjay5pc3JjXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgIHRyYWNrQ291bnQ6IHRyYWNrUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBmb3JtYXREdXJhdGlvbih0b3RhbER1cmF0aW9uKSxcbiAgICAgICAgICAgIHJlbGVhc2VUeXBlOiBtZXRhZGF0YS50eXBlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmaWxlSW5mbzoge1xuICAgICAgICAgICAgYXVkaW9GaWxlczogdHJhY2tzLm1hcCh0ID0+ICh7XG4gICAgICAgICAgICAgIG5hbWU6IHQuYXVkaW9GaWxlLm5hbWUsXG4gICAgICAgICAgICAgIHNpemU6IHQuYXVkaW9GaWxlLnNpemUsXG4gICAgICAgICAgICAgIHR5cGU6IHQuYXVkaW9GaWxlLnR5cGVcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGFydHdvcms6IHtcbiAgICAgICAgICAgICAgbmFtZTogYXJ0d29ya0ZpbGUubmFtZSxcbiAgICAgICAgICAgICAgc2l6ZTogb3B0aW1pemVkSW1hZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZycsXG4gICAgICAgICAgICAgIGRpbWVuc2lvbnM6IGAke2FydHdvcmtNZXRhZGF0YS53aWR0aH14JHthcnR3b3JrTWV0YWRhdGEuaGVpZ2h0fWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIENsZWFuIHVwIHRlbXBvcmFyeSBmaWxlcyBvbiBlcnJvclxuICAgICAgYXdhaXQgY2xlYW51cFRlbXBGaWxlcyh0ZW1wRmlsZVBhdGhzKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ1VwbG9hZCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gRXh0cmFjdCBhbmQgdmVyaWZ5IGF1dGhlbnRpY2F0aW9uIHRva2VuXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKTtcbiAgICBjb25zdCB0b2tlbiA9IGV4dHJhY3RUb2tlbkZyb21IZWFkZXIoYXV0aEhlYWRlcik7XG4gICAgXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdmVyaWZ5VG9rZW4odG9rZW4pO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnSW52YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCByZWxlYXNlSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdyZWxlYXNlSWQnKTtcblxuICAgIGlmIChyZWxlYXNlSWQpIHtcbiAgICAgIC8vIEdldCBzcGVjaWZpYyByZWxlYXNlIGZvciBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCBwcmlzbWEucmVsZWFzZS5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICBpZDogcmVsZWFzZUlkLFxuICAgICAgICAgIHByaW1hcnlBcnRpc3RJZDogdXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdHJhY2tzOiB7XG4gICAgICAgICAgICBvcmRlckJ5OiB7IHRyYWNrTnVtYmVyOiAnYXNjJyB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWxpdmVyaWVzOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlbGVhc2UpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdSZWxlYXNlIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIHJlbGVhc2UgYW5hbHl0aWNzXG4gICAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gY2FsY3VsYXRlUmVsZWFzZUR1cmF0aW9uKHJlbGVhc2UudHJhY2tzLm1hcCh0ID0+ICh7IGR1cmF0aW9uOiB0LmR1cmF0aW9uIH0pKSk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5yZWxlYXNlLFxuICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgIHRyYWNrQ291bnQ6IHJlbGVhc2UudHJhY2tzLmxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IGZvcm1hdER1cmF0aW9uKHRvdGFsRHVyYXRpb24pLFxuICAgICAgICAgICAgcmVsZWFzZVR5cGU6IHJlbGVhc2UucmVsZWFzZVR5cGUgfHwgJ1NJTkdMRSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYWNrczogcmVsZWFzZS50cmFja3MubWFwKHRyYWNrID0+ICh7XG4gICAgICAgICAgICAuLi50cmFjayxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBmb3JtYXREdXJhdGlvbih0cmFjay5kdXJhdGlvbilcbiAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBhbGwgcmVsZWFzZXMgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgICAgY29uc3QgcmVsZWFzZXMgPSBhd2FpdCBwcmlzbWEucmVsZWFzZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJpbWFyeUFydGlzdElkOiB1c2VyLmlkXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB0cmFja3M6IHtcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgdHJhY2tOdW1iZXI6ICdhc2MnIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbGl2ZXJpZXM6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIHN1bW1hcnkgZGF0YSB0byBlYWNoIHJlbGVhc2VcbiAgICAgIGNvbnN0IHJlbGVhc2VzV2l0aFN1bW1hcnkgPSByZWxlYXNlcy5tYXAocmVsZWFzZSA9PiB7XG4gICAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBjYWxjdWxhdGVSZWxlYXNlRHVyYXRpb24ocmVsZWFzZS50cmFja3MubWFwKHQgPT4gKHsgZHVyYXRpb246IHQuZHVyYXRpb24gfSkpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVsZWFzZSxcbiAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICB0cmFja0NvdW50OiByZWxlYXNlLnRyYWNrcy5sZW5ndGgsXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBmb3JtYXREdXJhdGlvbih0b3RhbER1cmF0aW9uKSxcbiAgICAgICAgICAgIHJlbGVhc2VUeXBlOiByZWxlYXNlLnJlbGVhc2VUeXBlIHx8ICdTSU5HTEUnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFja3M6IHJlbGVhc2UudHJhY2tzLm1hcCh0cmFjayA9PiAoe1xuICAgICAgICAgICAgLi4udHJhY2ssXG4gICAgICAgICAgICBkdXJhdGlvbjogZm9ybWF0RHVyYXRpb24odHJhY2suZHVyYXRpb24pXG4gICAgICAgICAgfSkpXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogcmVsZWFzZXNXaXRoU3VtbWFyeSxcbiAgICAgICAgY291bnQ6IHJlbGVhc2VzLmxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVsZWFzZSBmZXRjaCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUHJpc21hQ2xpZW50Iiwic2hhcnAiLCJ2YWxpZGF0ZUF1ZGlvRmlsZSIsInZhbGlkYXRlSW1hZ2VGaWxlIiwiZ2VuZXJhdGVGaWxlSWQiLCJnZW5lcmF0ZVNhZmVGaWxlbmFtZSIsInByb2Nlc3NBdWRpb01ldGFkYXRhIiwicHJvY2Vzc0ltYWdlTWV0YWRhdGEiLCJjbGVhbnVwVGVtcEZpbGVzIiwiZ2VuZXJhdGVSZWxlYXNlSWQiLCJnZW5lcmF0ZVVQQyIsImdlbmVyYXRlSVNSQyIsInZhbGlkYXRlUmVsZWFzZU1ldGFkYXRhIiwiY2FsY3VsYXRlUmVsZWFzZUR1cmF0aW9uIiwiZm9ybWF0RHVyYXRpb24iLCJleHRyYWN0VG9rZW5Gcm9tSGVhZGVyIiwidmVyaWZ5VG9rZW4iLCJwcmlzbWEiLCJvcHRpbWl6ZUltYWdlIiwiYnVmZmVyIiwicmVzaXplIiwiZml0Iiwid2l0aG91dEVubGFyZ2VtZW50IiwianBlZyIsInF1YWxpdHkiLCJwcm9ncmVzc2l2ZSIsIm1vempwZWciLCJ0b0J1ZmZlciIsIlBPU1QiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJ0b2tlbiIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsInN0YXR1cyIsInVzZXIiLCJmb3JtRGF0YSIsInRyYWNrcyIsInRyYWNrSW5kZXgiLCJoYXMiLCJhdWRpb0ZpbGUiLCJ0aXRsZSIsInB1c2giLCJtZXRhZGF0YSIsImFydGlzdCIsInJlbGVhc2VEYXRlIiwiZ2VucmUiLCJsYW5ndWFnZSIsInR5cGUiLCJhcnR3b3JrRmlsZSIsImxlbmd0aCIsIm1ldGFkYXRhVmFsaWRhdGlvbiIsInZhbGlkIiwiZXJyb3JzIiwiam9pbiIsImF1ZGlvVmFsaWRhdGlvbnMiLCJtYXAiLCJ0cmFjayIsImludmFsaWRBdWRpbyIsImZpbmQiLCJ2IiwiZXJyb3IiLCJpbWFnZVZhbGlkYXRpb24iLCJyZWxlYXNlSWQiLCJ1cGMiLCJ0ZW1wRmlsZVBhdGhzIiwiYXJ0d29ya0J1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJhcnJheUJ1ZmZlciIsIm9wdGltaXplZEltYWdlIiwiYXJ0d29ya0ZpbGVJZCIsImFydHdvcmtGaWxlbmFtZSIsIm5hbWUiLCJhcnR3b3JrUGF0aCIsImlkIiwiYXJ0d29ya01ldGFkYXRhIiwicmVsZWFzZSIsImNyZWF0ZSIsImRhdGEiLCJwcmltYXJ5QXJ0aXN0SWQiLCJEYXRlIiwiY292ZXJVcmwiLCJ0ZXJyaXRvcmllcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWxlYXNlVHlwZSIsInRyYWNrUmVjb3JkcyIsImkiLCJ0cmFja0lkIiwiaXNyYyIsImF1ZGlvUGF0aCIsImF1ZGlvTWV0YWRhdGEiLCJ0cmFja1JlY29yZCIsInRyYWNrTnVtYmVyIiwiYXVkaW9VcmwiLCJzcGxpdCIsInBvcCIsImR1cmF0aW9uIiwiYml0cmF0ZSIsInNhbXBsZVJhdGUiLCJjaGFubmVscyIsInRvdGFsRHVyYXRpb24iLCJ0IiwidXBsb2FkZWRBdCIsImNyZWF0ZWRBdCIsInN1bW1hcnkiLCJ0cmFja0NvdW50IiwiZmlsZUluZm8iLCJhdWRpb0ZpbGVzIiwic2l6ZSIsImFydHdvcmsiLCJkaW1lbnNpb25zIiwid2lkdGgiLCJoZWlnaHQiLCJjb25zb2xlIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJpbmNsdWRlIiwib3JkZXJCeSIsImRlbGl2ZXJpZXMiLCJyZWxlYXNlcyIsImZpbmRNYW55IiwicmVsZWFzZXNXaXRoU3VtbWFyeSIsImNvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthResponse: () => (/* binding */ createAuthResponse),\n/* harmony export */   extractTokenFromHeader: () => (/* binding */ extractTokenFromHeader),\n/* harmony export */   generateEmailVerificationToken: () => (/* binding */ generateEmailVerificationToken),\n/* harmony export */   generatePasswordResetToken: () => (/* binding */ generatePasswordResetToken),\n/* harmony export */   generateSessionToken: () => (/* binding */ generateSessionToken),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail),\n/* harmony export */   isValidPassword: () => (/* binding */ isValidPassword),\n/* harmony export */   isValidUsername: () => (/* binding */ isValidUsername),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-super-secret-jwt-key-change-in-production\";\nconst JWT_EXPIRES_IN = \"7d\";\n// Hash password\nasync function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, saltRounds);\n}\n// Verify password\nasync function verifyPassword(password, hashedPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n}\n// Generate JWT token\nfunction generateToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\n// Verify JWT token\nfunction verifyToken(token) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n    } catch (error) {\n        return undefined;\n    }\n}\n// Generate session token\nfunction generateSessionToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Validate email format\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n// Validate password strength\nfunction isValidPassword(password) {\n    if (password.length < 8) {\n        return {\n            valid: false,\n            message: \"Password must be at least 8 characters long\"\n        };\n    }\n    if (!/(?=.*[a-z])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one lowercase letter\"\n        };\n    }\n    if (!/(?=.*[A-Z])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one uppercase letter\"\n        };\n    }\n    if (!/(?=.*\\d)/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one number\"\n        };\n    }\n    if (!/(?=.*[@$!%*?&])/.test(password)) {\n        return {\n            valid: false,\n            message: \"Password must contain at least one special character (@$!%*?&)\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// Validate username format\nfunction isValidUsername(username) {\n    if (username.length < 3) {\n        return {\n            valid: false,\n            message: \"Username must be at least 3 characters long\"\n        };\n    }\n    if (username.length > 20) {\n        return {\n            valid: false,\n            message: \"Username must be less than 20 characters long\"\n        };\n    }\n    if (!/^[a-zA-Z0-9_]+$/.test(username)) {\n        return {\n            valid: false,\n            message: \"Username can only contain letters, numbers, and underscores\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// Generate password reset token\nfunction generatePasswordResetToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Generate email verification token\nfunction generateEmailVerificationToken() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32).toString(\"hex\");\n}\n// Extract token from Authorization header\nfunction extractTokenFromHeader(authHeader) {\n    if (!authHeader) return null;\n    const parts = authHeader.split(\" \");\n    if (parts.length !== 2 || parts[0] !== \"Bearer\") return null;\n    return parts[1];\n}\n// Create auth response\nfunction createAuthResponse(user, token) {\n    return {\n        success: true,\n        message: \"Authentication successful\",\n        data: {\n            user: {\n                id: user.id,\n                email: user.email,\n                username: user.username || user.email.split(\"@\")[0],\n                firstName: user.firstName,\n                lastName: user.lastName,\n                avatar: user.avatar,\n                bio: user.bio,\n                website: user.website,\n                location: user.location,\n                role: user.role,\n                isEmailVerified: user.isEmailVerified,\n                createdAt: user.createdAt\n            },\n            token,\n            expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVUsT0FBTztJQUV4RCxPQUFPQSxLQUFLLENBQUMsRUFBRTtBQUNqQjtBQUVBLHVCQUF1QjtBQUNoQixTQUFTRSxtQkFBbUJDLElBQVMsRUFBRXZCLEtBQWE7SUFDekQsT0FBTztRQUNMd0IsU0FBUztRQUNUWCxTQUFTO1FBQ1RZLE1BQU07WUFDSkYsTUFBTTtnQkFDSkcsSUFBSUgsS0FBS0csRUFBRTtnQkFDWG5CLE9BQU9nQixLQUFLaEIsS0FBSztnQkFDakJRLFVBQVVRLEtBQUtSLFFBQVEsSUFBSVEsS0FBS2hCLEtBQUssQ0FBQ2MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNuRE0sV0FBV0osS0FBS0ksU0FBUztnQkFDekJDLFVBQVVMLEtBQUtLLFFBQVE7Z0JBQ3ZCQyxRQUFRTixLQUFLTSxNQUFNO2dCQUNuQkMsS0FBS1AsS0FBS08sR0FBRztnQkFDYkMsU0FBU1IsS0FBS1EsT0FBTztnQkFDckJDLFVBQVVULEtBQUtTLFFBQVE7Z0JBQ3ZCQyxNQUFNVixLQUFLVSxJQUFJO2dCQUNmQyxpQkFBaUJYLEtBQUtXLGVBQWU7Z0JBQ3JDQyxXQUFXWixLQUFLWSxTQUFTO1lBQzNCO1lBQ0FuQztZQUNBb0MsV0FBVyxJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSyxNQUFNLFNBQVM7UUFDckU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3VzaHR1bmVzLW1vYmlsZS1hcHAvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgcmFuZG9tQnl0ZXMgfSBmcm9tICdjcnlwdG8nO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zdXBlci1zZWNyZXQtand0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbic7XG5jb25zdCBKV1RfRVhQSVJFU19JTiA9ICc3ZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclBheWxvYWQge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgZmlyc3ROYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgbGFzdE5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICBiaW8/OiBzdHJpbmcgfCBudWxsO1xuICB3ZWJzaXRlPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9jYXRpb24/OiBzdHJpbmcgfCBudWxsO1xuICBhdmF0YXI/OiBzdHJpbmcgfCBudWxsO1xuICBpc0VtYWlsVmVyaWZpZWQ6IGJvb2xlYW47XG4gIHJvbGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoVG9rZW4ge1xuICB0b2tlbjogc3RyaW5nO1xuICBleHBpcmVzQXQ6IERhdGU7XG59XG5cbi8vIEhhc2ggcGFzc3dvcmRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMjtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcbn1cblxuLy8gVmVyaWZ5IHBhc3N3b3JkXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbn1cblxuLy8gR2VuZXJhdGUgSldUIHRva2VuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbihwYXlsb2FkOiBVc2VyUGF5bG9hZCk6IHN0cmluZyB7XG4gIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogSldUX0VYUElSRVNfSU4gfSk7XG59XG5cbi8vIFZlcmlmeSBKV1QgdG9rZW5cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogVXNlclBheWxvYWQgfCB1bmRlZmluZWQge1xuICB0cnkge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBVc2VyUGF5bG9hZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIHNlc3Npb24gdG9rZW5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25Ub2tlbigpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLy8gVmFsaWRhdGUgZW1haWwgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcbn1cblxuLy8gVmFsaWRhdGUgcGFzc3dvcmQgc3RyZW5ndGhcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IG1lc3NhZ2U/OiBzdHJpbmcgfSB7XG4gIGlmIChwYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZycgfTtcbiAgfVxuICBcbiAgaWYgKCEvKD89LipbYS16XSkvLnRlc3QocGFzc3dvcmQpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJyB9O1xuICB9XG4gIFxuICBpZiAoIS8oPz0uKltBLVpdKS8udGVzdChwYXNzd29yZCkpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6ICdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInIH07XG4gIH1cbiAgXG4gIGlmICghLyg/PS4qXFxkKS8udGVzdChwYXNzd29yZCkpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6ICdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIG51bWJlcicgfTtcbiAgfVxuICBcbiAgaWYgKCEvKD89LipbQCQhJSo/Jl0pLy50ZXN0KHBhc3N3b3JkKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogJ1Bhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgKEAkISUqPyYpJyB9O1xuICB9XG4gIFxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xufVxuXG4vLyBWYWxpZGF0ZSB1c2VybmFtZSBmb3JtYXRcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkVXNlcm5hbWUodXNlcm5hbWU6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IG1lc3NhZ2U/OiBzdHJpbmcgfSB7XG4gIGlmICh1c2VybmFtZS5sZW5ndGggPCAzKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgbXVzdCBiZSBhdCBsZWFzdCAzIGNoYXJhY3RlcnMgbG9uZycgfTtcbiAgfVxuICBcbiAgaWYgKHVzZXJuYW1lLmxlbmd0aCA+IDIwKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMjAgY2hhcmFjdGVycyBsb25nJyB9O1xuICB9XG4gIFxuICBpZiAoIS9eW2EtekEtWjAtOV9dKyQvLnRlc3QodXNlcm5hbWUpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdW5kZXJzY29yZXMnIH07XG4gIH1cbiAgXG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59XG5cbi8vIEdlbmVyYXRlIHBhc3N3b3JkIHJlc2V0IHRva2VuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0VG9rZW4oKTogc3RyaW5nIHtcbiAgcmV0dXJuIHJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7XG59XG5cbi8vIEdlbmVyYXRlIGVtYWlsIHZlcmlmaWNhdGlvbiB0b2tlblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbigpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLy8gRXh0cmFjdCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFRva2VuRnJvbUhlYWRlcihhdXRoSGVhZGVyOiBzdHJpbmcgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghYXV0aEhlYWRlcikgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCBwYXJ0cyA9IGF1dGhIZWFkZXIuc3BsaXQoJyAnKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMiB8fCBwYXJ0c1swXSAhPT0gJ0JlYXJlcicpIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIHBhcnRzWzFdO1xufVxuXG4vLyBDcmVhdGUgYXV0aCByZXNwb25zZVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUF1dGhSZXNwb25zZSh1c2VyOiBhbnksIHRva2VuOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsJyxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfHwgdXNlci5lbWFpbC5zcGxpdCgnQCcpWzBdLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcbiAgICAgICAgYXZhdGFyOiB1c2VyLmF2YXRhcixcbiAgICAgICAgYmlvOiB1c2VyLmJpbyxcbiAgICAgICAgd2Vic2l0ZTogdXNlci53ZWJzaXRlLFxuICAgICAgICBsb2NhdGlvbjogdXNlci5sb2NhdGlvbixcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICBpc0VtYWlsVmVyaWZpZWQ6IHVzZXIuaXNFbWFpbFZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHVzZXIuY3JlYXRlZEF0XG4gICAgICB9LFxuICAgICAgdG9rZW4sXG4gICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkgLy8gNyBkYXlzXG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsInJhbmRvbUJ5dGVzIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfRVhQSVJFU19JTiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJwYXlsb2FkIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ2ZXJpZnkiLCJlcnJvciIsInVuZGVmaW5lZCIsImdlbmVyYXRlU2Vzc2lvblRva2VuIiwidG9TdHJpbmciLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwiaXNWYWxpZFBhc3N3b3JkIiwibGVuZ3RoIiwidmFsaWQiLCJtZXNzYWdlIiwiaXNWYWxpZFVzZXJuYW1lIiwidXNlcm5hbWUiLCJnZW5lcmF0ZVBhc3N3b3JkUmVzZXRUb2tlbiIsImdlbmVyYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiIsImV4dHJhY3RUb2tlbkZyb21IZWFkZXIiLCJhdXRoSGVhZGVyIiwicGFydHMiLCJzcGxpdCIsImNyZWF0ZUF1dGhSZXNwb25zZSIsInVzZXIiLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhdmF0YXIiLCJiaW8iLCJ3ZWJzaXRlIiwibG9jYXRpb24iLCJyb2xlIiwiaXNFbWFpbFZlcmlmaWVkIiwiY3JlYXRlZEF0IiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/release-logic.ts":
/*!******************************!*\
  !*** ./lib/release-logic.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateDistributionProgress: () => (/* binding */ calculateDistributionProgress),\n/* harmony export */   calculateReleaseDuration: () => (/* binding */ calculateReleaseDuration),\n/* harmony export */   canDeleteRelease: () => (/* binding */ canDeleteRelease),\n/* harmony export */   canEditRelease: () => (/* binding */ canEditRelease),\n/* harmony export */   formatDuration: () => (/* binding */ formatDuration),\n/* harmony export */   generateISRC: () => (/* binding */ generateISRC),\n/* harmony export */   generateReleaseFilename: () => (/* binding */ generateReleaseFilename),\n/* harmony export */   generateReleaseId: () => (/* binding */ generateReleaseId),\n/* harmony export */   generateReleaseSummary: () => (/* binding */ generateReleaseSummary),\n/* harmony export */   generateUPC: () => (/* binding */ generateUPC),\n/* harmony export */   getReleaseStatusColor: () => (/* binding */ getReleaseStatusColor),\n/* harmony export */   getReleaseStatusText: () => (/* binding */ getReleaseStatusText),\n/* harmony export */   getReleaseTypeDisplayName: () => (/* binding */ getReleaseTypeDisplayName),\n/* harmony export */   validateReleaseDate: () => (/* binding */ validateReleaseDate),\n/* harmony export */   validateReleaseForDistribution: () => (/* binding */ validateReleaseForDistribution),\n/* harmony export */   validateReleaseMetadata: () => (/* binding */ validateReleaseMetadata),\n/* harmony export */   validateTrack: () => (/* binding */ validateTrack)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n// Generate release ID\nfunction generateReleaseId() {\n    return \"REL_\" + (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(8).toString(\"hex\").toUpperCase();\n}\n// Generate UPC (Universal Product Code)\nfunction generateUPC() {\n    // Generate a 12-digit UPC\n    const upc = Math.floor(Math.random() * 1000000000000).toString().padStart(12, \"0\");\n    return upc;\n}\n// Generate ISRC (International Standard Recording Code)\nfunction generateISRC(countryCode = \"US\") {\n    const year = new Date().getFullYear().toString().slice(-2);\n    const registrant = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(3).toString(\"hex\").toUpperCase();\n    const designation = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(3).toString(\"hex\").toUpperCase();\n    return `${countryCode}${year}${registrant}${designation}`;\n}\n// Validate release metadata\nfunction validateReleaseMetadata(metadata) {\n    const errors = [];\n    if (!metadata.title || metadata.title.trim().length < 1) {\n        errors.push(\"Release title is required\");\n    }\n    if (!metadata.artist || metadata.artist.trim().length < 1) {\n        errors.push(\"Artist name is required\");\n    }\n    if (!metadata.releaseDate) {\n        errors.push(\"Release date is required\");\n    } else {\n        const releaseDate = new Date(metadata.releaseDate);\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        if (releaseDate < today) {\n            errors.push(\"Release date cannot be in the past\");\n        }\n    }\n    if (!metadata.genre) {\n        errors.push(\"Genre is required\");\n    }\n    if (!metadata.language) {\n        errors.push(\"Language is required\");\n    }\n    if (![\n        \"SINGLE\",\n        \"EP\",\n        \"ALBUM\"\n    ].includes(metadata.type)) {\n        errors.push(\"Invalid release type\");\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\n// Validate track data\nfunction validateTrack(track) {\n    const errors = [];\n    if (!track.title || track.title.trim().length < 1) {\n        errors.push(\"Track title is required\");\n    }\n    if (track.trackNumber < 1) {\n        errors.push(\"Track number must be at least 1\");\n    }\n    if (track.duration < 30) {\n        errors.push(\"Track duration must be at least 30 seconds\");\n    }\n    if (!track.filePath) {\n        errors.push(\"Audio file is required\");\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\n// Validate release for distribution\nfunction validateReleaseForDistribution(release) {\n    const errors = [];\n    // Validate metadata\n    const metadataValidation = validateReleaseMetadata(release.metadata);\n    if (!metadataValidation.valid) {\n        errors.push(...metadataValidation.errors);\n    }\n    // Validate tracks\n    if (release.tracks.length === 0) {\n        errors.push(\"At least one track is required\");\n    }\n    release.tracks.forEach((track, index)=>{\n        const trackValidation = validateTrack(track);\n        if (!trackValidation.valid) {\n            errors.push(`Track ${index + 1}: ${trackValidation.errors.join(\", \")}`);\n        }\n    });\n    // Validate artwork\n    if (!release.artworkPath) {\n        errors.push(\"Cover artwork is required\");\n    }\n    // Validate release type vs track count\n    if (release.metadata.type === \"SINGLE\" && release.tracks.length !== 1) {\n        errors.push(\"Single releases must have exactly 1 track\");\n    }\n    if (release.metadata.type === \"EP\" && (release.tracks.length < 2 || release.tracks.length > 6)) {\n        errors.push(\"EP releases must have 2-6 tracks\");\n    }\n    if (release.metadata.type === \"ALBUM\" && release.tracks.length < 7) {\n        errors.push(\"Album releases must have at least 7 tracks\");\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\n// Calculate release duration\nfunction calculateReleaseDuration(tracks) {\n    return tracks.reduce((total, track)=>total + track.duration, 0);\n}\n// Format duration in MM:SS format\nfunction formatDuration(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}:${remainingSeconds.toString().padStart(2, \"0\")}`;\n}\n// Get release status color\nfunction getReleaseStatusColor(status) {\n    switch(status){\n        case \"DRAFT\":\n            return \"gray\";\n        case \"SUBMITTED\":\n            return \"blue\";\n        case \"PROCESSING\":\n            return \"yellow\";\n        case \"DISTRIBUTED\":\n            return \"green\";\n        case \"REJECTED\":\n            return \"red\";\n        default:\n            return \"gray\";\n    }\n}\n// Get release status text\nfunction getReleaseStatusText(status) {\n    switch(status){\n        case \"DRAFT\":\n            return \"Draft\";\n        case \"SUBMITTED\":\n            return \"Submitted\";\n        case \"PROCESSING\":\n            return \"Processing\";\n        case \"DISTRIBUTED\":\n            return \"Live\";\n        case \"REJECTED\":\n            return \"Rejected\";\n        default:\n            return \"Unknown\";\n    }\n}\n// Calculate distribution progress\nfunction calculateDistributionProgress(platforms) {\n    const total = platforms.length;\n    const completed = platforms.filter((p)=>p.status === \"LIVE\").length;\n    const percentage = total > 0 ? Math.round(completed / total * 100) : 0;\n    return {\n        total,\n        completed,\n        percentage\n    };\n}\n// Generate release summary\nfunction generateReleaseSummary(release) {\n    const trackCount = release.tracks.length;\n    const totalDuration = formatDuration(calculateReleaseDuration(release.tracks));\n    const status = getReleaseStatusText(release.status);\n    const platforms = release.platforms.length;\n    return {\n        trackCount,\n        totalDuration,\n        status,\n        platforms\n    };\n}\n// Check if release can be edited\nfunction canEditRelease(release) {\n    return release.status === \"DRAFT\" || release.status === \"REJECTED\";\n}\n// Check if release can be deleted\nfunction canDeleteRelease(release) {\n    return release.status === \"DRAFT\";\n}\n// Get release type display name\nfunction getReleaseTypeDisplayName(type) {\n    switch(type){\n        case \"SINGLE\":\n            return \"Single\";\n        case \"EP\":\n            return \"EP\";\n        case \"ALBUM\":\n            return \"Album\";\n        default:\n            return \"Unknown\";\n    }\n}\n// Generate release filename\nfunction generateReleaseFilename(release) {\n    const artist = release.metadata.artist.replace(/[^a-zA-Z0-9]/g, \"_\");\n    const title = release.metadata.title.replace(/[^a-zA-Z0-9]/g, \"_\");\n    const type = release.metadata.type.toLowerCase();\n    return `${artist}_${title}_${type}_${release.id}`;\n}\n// Validate release date\nfunction validateReleaseDate(dateString) {\n    const date = new Date(dateString);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    if (isNaN(date.getTime())) {\n        return {\n            valid: false,\n            error: \"Invalid date format\"\n        };\n    }\n    if (date < today) {\n        return {\n            valid: false,\n            error: \"Release date cannot be in the past\"\n        };\n    }\n    const maxFutureDate = new Date();\n    maxFutureDate.setFullYear(maxFutureDate.getFullYear() + 2);\n    if (date > maxFutureDate) {\n        return {\n            valid: false,\n            error: \"Release date cannot be more than 2 years in the future\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFFaEQsT0FBTyxDQUFDLEVBQUVKLE1BQU0sQ0FBQyxFQUFFVyxLQUFLLENBQUMsRUFBRVEsUUFBUWtDLEVBQUUsQ0FBQyxDQUFDO0FBQ25EO0FBRUEsd0JBQXdCO0FBQ2pCLFNBQVNDLG9CQUFvQkMsVUFBa0I7SUFDcEQsTUFBTUMsT0FBTyxJQUFJaEUsS0FBSytEO0lBQ3RCLE1BQU1qRCxRQUFRLElBQUlkO0lBQ2xCYyxNQUFNQyxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7SUFFeEIsSUFBSWtELE1BQU1ELEtBQUtFLE9BQU8sS0FBSztRQUN6QixPQUFPO1lBQUU5QyxPQUFPO1lBQU8rQyxPQUFPO1FBQXNCO0lBQ3REO0lBRUEsSUFBSUgsT0FBT2xELE9BQU87UUFDaEIsT0FBTztZQUFFTSxPQUFPO1lBQU8rQyxPQUFPO1FBQXFDO0lBQ3JFO0lBRUEsTUFBTUMsZ0JBQWdCLElBQUlwRTtJQUMxQm9FLGNBQWNDLFdBQVcsQ0FBQ0QsY0FBY25FLFdBQVcsS0FBSztJQUV4RCxJQUFJK0QsT0FBT0ksZUFBZTtRQUN4QixPQUFPO1lBQUVoRCxPQUFPO1lBQU8rQyxPQUFPO1FBQXlEO0lBQ3pGO0lBRUEsT0FBTztRQUFFL0MsT0FBTztJQUFLO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3VzaHR1bmVzLW1vYmlsZS1hcHAvLi9saWIvcmVsZWFzZS1sb2dpYy50cz9hNmM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJhbmRvbUJ5dGVzIH0gZnJvbSAnY3J5cHRvJztcblxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlTWV0YWRhdGEge1xuICB0aXRsZTogc3RyaW5nO1xuICBhcnRpc3Q6IHN0cmluZztcbiAgcmVsZWFzZURhdGU6IHN0cmluZztcbiAgZ2VucmU6IHN0cmluZztcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgdHlwZTogJ1NJTkdMRScgfCAnRVAnIHwgJ0FMQlVNJztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIGNvcHlyaWdodD86IHN0cmluZztcbiAgdXBjPzogc3RyaW5nO1xuICBpc3JjPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgdHJhY2tOdW1iZXI6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgaXNyYz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIG1ldGFkYXRhOiBSZWxlYXNlTWV0YWRhdGE7XG4gIHRyYWNrczogVHJhY2tbXTtcbiAgYXJ0d29ya1BhdGg/OiBzdHJpbmc7XG4gIHN0YXR1czogJ0RSQUZUJyB8ICdTVUJNSVRURUQnIHwgJ1BST0NFU1NJTkcnIHwgJ0RJU1RSSUJVVEVEJyB8ICdSRUpFQ1RFRCc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICBkaXN0cmlidXRpb25EYXRlPzogRGF0ZTtcbiAgcGxhdGZvcm1zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaXN0cmlidXRpb25QbGF0Zm9ybSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhdHVzOiAnUEVORElORycgfCAnQVBQUk9WRUQnIHwgJ1JFSkVDVEVEJyB8ICdMSVZFJztcbiAgc3VibWl0dGVkQXQ/OiBEYXRlO1xuICBhcHByb3ZlZEF0PzogRGF0ZTtcbiAgbGl2ZUF0PzogRGF0ZTtcbiAgcmVqZWN0aW9uUmVhc29uPzogc3RyaW5nO1xufVxuXG4vLyBHZW5lcmF0ZSByZWxlYXNlIElEXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZWxlYXNlSWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuICdSRUxfJyArIHJhbmRvbUJ5dGVzKDgpLnRvU3RyaW5nKCdoZXgnKS50b1VwcGVyQ2FzZSgpO1xufVxuXG4vLyBHZW5lcmF0ZSBVUEMgKFVuaXZlcnNhbCBQcm9kdWN0IENvZGUpXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVUEMoKTogc3RyaW5nIHtcbiAgLy8gR2VuZXJhdGUgYSAxMi1kaWdpdCBVUENcbiAgY29uc3QgdXBjID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwMDAwMCkudG9TdHJpbmcoKS5wYWRTdGFydCgxMiwgJzAnKTtcbiAgcmV0dXJuIHVwYztcbn1cblxuLy8gR2VuZXJhdGUgSVNSQyAoSW50ZXJuYXRpb25hbCBTdGFuZGFyZCBSZWNvcmRpbmcgQ29kZSlcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUlTUkMoY291bnRyeUNvZGU6IHN0cmluZyA9ICdVUycpOiBzdHJpbmcge1xuICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc2xpY2UoLTIpO1xuICBjb25zdCByZWdpc3RyYW50ID0gcmFuZG9tQnl0ZXMoMykudG9TdHJpbmcoJ2hleCcpLnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IGRlc2lnbmF0aW9uID0gcmFuZG9tQnl0ZXMoMykudG9TdHJpbmcoJ2hleCcpLnRvVXBwZXJDYXNlKCk7XG4gIFxuICByZXR1cm4gYCR7Y291bnRyeUNvZGV9JHt5ZWFyfSR7cmVnaXN0cmFudH0ke2Rlc2lnbmF0aW9ufWA7XG59XG5cbi8vIFZhbGlkYXRlIHJlbGVhc2UgbWV0YWRhdGFcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlbGVhc2VNZXRhZGF0YShtZXRhZGF0YTogUmVsZWFzZU1ldGFkYXRhKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFtZXRhZGF0YS50aXRsZSB8fCBtZXRhZGF0YS50aXRsZS50cmltKCkubGVuZ3RoIDwgMSkge1xuICAgIGVycm9ycy5wdXNoKCdSZWxlYXNlIHRpdGxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghbWV0YWRhdGEuYXJ0aXN0IHx8IG1ldGFkYXRhLmFydGlzdC50cmltKCkubGVuZ3RoIDwgMSkge1xuICAgIGVycm9ycy5wdXNoKCdBcnRpc3QgbmFtZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIW1ldGFkYXRhLnJlbGVhc2VEYXRlKSB7XG4gICAgZXJyb3JzLnB1c2goJ1JlbGVhc2UgZGF0ZSBpcyByZXF1aXJlZCcpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlbGVhc2VEYXRlID0gbmV3IERhdGUobWV0YWRhdGEucmVsZWFzZURhdGUpO1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICBpZiAocmVsZWFzZURhdGUgPCB0b2RheSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1JlbGVhc2UgZGF0ZSBjYW5ub3QgYmUgaW4gdGhlIHBhc3QnKTtcbiAgICB9XG4gIH1cbiAgXG4gIGlmICghbWV0YWRhdGEuZ2VucmUpIHtcbiAgICBlcnJvcnMucHVzaCgnR2VucmUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFtZXRhZGF0YS5sYW5ndWFnZSkge1xuICAgIGVycm9ycy5wdXNoKCdMYW5ndWFnZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIVsnU0lOR0xFJywgJ0VQJywgJ0FMQlVNJ10uaW5jbHVkZXMobWV0YWRhdGEudHlwZSkpIHtcbiAgICBlcnJvcnMucHVzaCgnSW52YWxpZCByZWxlYXNlIHR5cGUnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnNcbiAgfTtcbn1cblxuLy8gVmFsaWRhdGUgdHJhY2sgZGF0YVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVHJhY2sodHJhY2s6IFRyYWNrKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCF0cmFjay50aXRsZSB8fCB0cmFjay50aXRsZS50cmltKCkubGVuZ3RoIDwgMSkge1xuICAgIGVycm9ycy5wdXNoKCdUcmFjayB0aXRsZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAodHJhY2sudHJhY2tOdW1iZXIgPCAxKSB7XG4gICAgZXJyb3JzLnB1c2goJ1RyYWNrIG51bWJlciBtdXN0IGJlIGF0IGxlYXN0IDEnKTtcbiAgfVxuICBcbiAgaWYgKHRyYWNrLmR1cmF0aW9uIDwgMzApIHtcbiAgICBlcnJvcnMucHVzaCgnVHJhY2sgZHVyYXRpb24gbXVzdCBiZSBhdCBsZWFzdCAzMCBzZWNvbmRzJyk7XG4gIH1cbiAgXG4gIGlmICghdHJhY2suZmlsZVBhdGgpIHtcbiAgICBlcnJvcnMucHVzaCgnQXVkaW8gZmlsZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9yc1xuICB9O1xufVxuXG4vLyBWYWxpZGF0ZSByZWxlYXNlIGZvciBkaXN0cmlidXRpb25cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlbGVhc2VGb3JEaXN0cmlidXRpb24ocmVsZWFzZTogUmVsZWFzZSk6IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIC8vIFZhbGlkYXRlIG1ldGFkYXRhXG4gIGNvbnN0IG1ldGFkYXRhVmFsaWRhdGlvbiA9IHZhbGlkYXRlUmVsZWFzZU1ldGFkYXRhKHJlbGVhc2UubWV0YWRhdGEpO1xuICBpZiAoIW1ldGFkYXRhVmFsaWRhdGlvbi52YWxpZCkge1xuICAgIGVycm9ycy5wdXNoKC4uLm1ldGFkYXRhVmFsaWRhdGlvbi5lcnJvcnMpO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSB0cmFja3NcbiAgaWYgKHJlbGVhc2UudHJhY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdBdCBsZWFzdCBvbmUgdHJhY2sgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgcmVsZWFzZS50cmFja3MuZm9yRWFjaCgodHJhY2ssIGluZGV4KSA9PiB7XG4gICAgY29uc3QgdHJhY2tWYWxpZGF0aW9uID0gdmFsaWRhdGVUcmFjayh0cmFjayk7XG4gICAgaWYgKCF0cmFja1ZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgIGVycm9ycy5wdXNoKGBUcmFjayAke2luZGV4ICsgMX06ICR7dHJhY2tWYWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBWYWxpZGF0ZSBhcnR3b3JrXG4gIGlmICghcmVsZWFzZS5hcnR3b3JrUGF0aCkge1xuICAgIGVycm9ycy5wdXNoKCdDb3ZlciBhcnR3b3JrIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIC8vIFZhbGlkYXRlIHJlbGVhc2UgdHlwZSB2cyB0cmFjayBjb3VudFxuICBpZiAocmVsZWFzZS5tZXRhZGF0YS50eXBlID09PSAnU0lOR0xFJyAmJiByZWxlYXNlLnRyYWNrcy5sZW5ndGggIT09IDEpIHtcbiAgICBlcnJvcnMucHVzaCgnU2luZ2xlIHJlbGVhc2VzIG11c3QgaGF2ZSBleGFjdGx5IDEgdHJhY2snKTtcbiAgfVxuICBcbiAgaWYgKHJlbGVhc2UubWV0YWRhdGEudHlwZSA9PT0gJ0VQJyAmJiAocmVsZWFzZS50cmFja3MubGVuZ3RoIDwgMiB8fCByZWxlYXNlLnRyYWNrcy5sZW5ndGggPiA2KSkge1xuICAgIGVycm9ycy5wdXNoKCdFUCByZWxlYXNlcyBtdXN0IGhhdmUgMi02IHRyYWNrcycpO1xuICB9XG4gIFxuICBpZiAocmVsZWFzZS5tZXRhZGF0YS50eXBlID09PSAnQUxCVU0nICYmIHJlbGVhc2UudHJhY2tzLmxlbmd0aCA8IDcpIHtcbiAgICBlcnJvcnMucHVzaCgnQWxidW0gcmVsZWFzZXMgbXVzdCBoYXZlIGF0IGxlYXN0IDcgdHJhY2tzJyk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzXG4gIH07XG59XG5cbi8vIENhbGN1bGF0ZSByZWxlYXNlIGR1cmF0aW9uXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUmVsZWFzZUR1cmF0aW9uKHRyYWNrczogVHJhY2tbXSk6IG51bWJlciB7XG4gIHJldHVybiB0cmFja3MucmVkdWNlKCh0b3RhbCwgdHJhY2spID0+IHRvdGFsICsgdHJhY2suZHVyYXRpb24sIDApO1xufVxuXG4vLyBGb3JtYXQgZHVyYXRpb24gaW4gTU06U1MgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgY29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IHNlY29uZHMgJSA2MDtcbiAgcmV0dXJuIGAke21pbnV0ZXN9OiR7cmVtYWluaW5nU2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn1cblxuLy8gR2V0IHJlbGVhc2Ugc3RhdHVzIGNvbG9yXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVsZWFzZVN0YXR1c0NvbG9yKHN0YXR1czogUmVsZWFzZVsnc3RhdHVzJ10pOiBzdHJpbmcge1xuICBzd2l0Y2ggKHN0YXR1cykge1xuICAgIGNhc2UgJ0RSQUZUJzogcmV0dXJuICdncmF5JztcbiAgICBjYXNlICdTVUJNSVRURUQnOiByZXR1cm4gJ2JsdWUnO1xuICAgIGNhc2UgJ1BST0NFU1NJTkcnOiByZXR1cm4gJ3llbGxvdyc7XG4gICAgY2FzZSAnRElTVFJJQlVURUQnOiByZXR1cm4gJ2dyZWVuJztcbiAgICBjYXNlICdSRUpFQ1RFRCc6IHJldHVybiAncmVkJztcbiAgICBkZWZhdWx0OiByZXR1cm4gJ2dyYXknO1xuICB9XG59XG5cbi8vIEdldCByZWxlYXNlIHN0YXR1cyB0ZXh0XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVsZWFzZVN0YXR1c1RleHQoc3RhdHVzOiBSZWxlYXNlWydzdGF0dXMnXSk6IHN0cmluZyB7XG4gIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgY2FzZSAnRFJBRlQnOiByZXR1cm4gJ0RyYWZ0JztcbiAgICBjYXNlICdTVUJNSVRURUQnOiByZXR1cm4gJ1N1Ym1pdHRlZCc7XG4gICAgY2FzZSAnUFJPQ0VTU0lORyc6IHJldHVybiAnUHJvY2Vzc2luZyc7XG4gICAgY2FzZSAnRElTVFJJQlVURUQnOiByZXR1cm4gJ0xpdmUnO1xuICAgIGNhc2UgJ1JFSkVDVEVEJzogcmV0dXJuICdSZWplY3RlZCc7XG4gICAgZGVmYXVsdDogcmV0dXJuICdVbmtub3duJztcbiAgfVxufVxuXG4vLyBDYWxjdWxhdGUgZGlzdHJpYnV0aW9uIHByb2dyZXNzXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdHJpYnV0aW9uUHJvZ3Jlc3MocGxhdGZvcm1zOiBEaXN0cmlidXRpb25QbGF0Zm9ybVtdKToge1xuICB0b3RhbDogbnVtYmVyO1xuICBjb21wbGV0ZWQ6IG51bWJlcjtcbiAgcGVyY2VudGFnZTogbnVtYmVyO1xufSB7XG4gIGNvbnN0IHRvdGFsID0gcGxhdGZvcm1zLmxlbmd0aDtcbiAgY29uc3QgY29tcGxldGVkID0gcGxhdGZvcm1zLmZpbHRlcihwID0+IHAuc3RhdHVzID09PSAnTElWRScpLmxlbmd0aDtcbiAgY29uc3QgcGVyY2VudGFnZSA9IHRvdGFsID4gMCA/IE1hdGgucm91bmQoKGNvbXBsZXRlZCAvIHRvdGFsKSAqIDEwMCkgOiAwO1xuICBcbiAgcmV0dXJuIHsgdG90YWwsIGNvbXBsZXRlZCwgcGVyY2VudGFnZSB9O1xufVxuXG4vLyBHZW5lcmF0ZSByZWxlYXNlIHN1bW1hcnlcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJlbGVhc2VTdW1tYXJ5KHJlbGVhc2U6IFJlbGVhc2UpOiB7XG4gIHRyYWNrQ291bnQ6IG51bWJlcjtcbiAgdG90YWxEdXJhdGlvbjogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgcGxhdGZvcm1zOiBudW1iZXI7XG59IHtcbiAgY29uc3QgdHJhY2tDb3VudCA9IHJlbGVhc2UudHJhY2tzLmxlbmd0aDtcbiAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKGNhbGN1bGF0ZVJlbGVhc2VEdXJhdGlvbihyZWxlYXNlLnRyYWNrcykpO1xuICBjb25zdCBzdGF0dXMgPSBnZXRSZWxlYXNlU3RhdHVzVGV4dChyZWxlYXNlLnN0YXR1cyk7XG4gIGNvbnN0IHBsYXRmb3JtcyA9IHJlbGVhc2UucGxhdGZvcm1zLmxlbmd0aDtcbiAgXG4gIHJldHVybiB7XG4gICAgdHJhY2tDb3VudCxcbiAgICB0b3RhbER1cmF0aW9uLFxuICAgIHN0YXR1cyxcbiAgICBwbGF0Zm9ybXNcbiAgfTtcbn1cblxuLy8gQ2hlY2sgaWYgcmVsZWFzZSBjYW4gYmUgZWRpdGVkXG5leHBvcnQgZnVuY3Rpb24gY2FuRWRpdFJlbGVhc2UocmVsZWFzZTogUmVsZWFzZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcmVsZWFzZS5zdGF0dXMgPT09ICdEUkFGVCcgfHwgcmVsZWFzZS5zdGF0dXMgPT09ICdSRUpFQ1RFRCc7XG59XG5cbi8vIENoZWNrIGlmIHJlbGVhc2UgY2FuIGJlIGRlbGV0ZWRcbmV4cG9ydCBmdW5jdGlvbiBjYW5EZWxldGVSZWxlYXNlKHJlbGVhc2U6IFJlbGVhc2UpOiBib29sZWFuIHtcbiAgcmV0dXJuIHJlbGVhc2Uuc3RhdHVzID09PSAnRFJBRlQnO1xufVxuXG4vLyBHZXQgcmVsZWFzZSB0eXBlIGRpc3BsYXkgbmFtZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbGVhc2VUeXBlRGlzcGxheU5hbWUodHlwZTogUmVsZWFzZU1ldGFkYXRhWyd0eXBlJ10pOiBzdHJpbmcge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdTSU5HTEUnOiByZXR1cm4gJ1NpbmdsZSc7XG4gICAgY2FzZSAnRVAnOiByZXR1cm4gJ0VQJztcbiAgICBjYXNlICdBTEJVTSc6IHJldHVybiAnQWxidW0nO1xuICAgIGRlZmF1bHQ6IHJldHVybiAnVW5rbm93bic7XG4gIH1cbn1cblxuLy8gR2VuZXJhdGUgcmVsZWFzZSBmaWxlbmFtZVxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUmVsZWFzZUZpbGVuYW1lKHJlbGVhc2U6IFJlbGVhc2UpOiBzdHJpbmcge1xuICBjb25zdCBhcnRpc3QgPSByZWxlYXNlLm1ldGFkYXRhLmFydGlzdC5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKTtcbiAgY29uc3QgdGl0bGUgPSByZWxlYXNlLm1ldGFkYXRhLnRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xuICBjb25zdCB0eXBlID0gcmVsZWFzZS5tZXRhZGF0YS50eXBlLnRvTG93ZXJDYXNlKCk7XG4gIFxuICByZXR1cm4gYCR7YXJ0aXN0fV8ke3RpdGxlfV8ke3R5cGV9XyR7cmVsZWFzZS5pZH1gO1xufVxuXG4vLyBWYWxpZGF0ZSByZWxlYXNlIGRhdGVcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlbGVhc2VEYXRlKGRhdGVTdHJpbmc6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0ge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIFxuICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgZGF0ZSBmb3JtYXQnIH07XG4gIH1cbiAgXG4gIGlmIChkYXRlIDwgdG9kYXkpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnUmVsZWFzZSBkYXRlIGNhbm5vdCBiZSBpbiB0aGUgcGFzdCcgfTtcbiAgfVxuICBcbiAgY29uc3QgbWF4RnV0dXJlRGF0ZSA9IG5ldyBEYXRlKCk7XG4gIG1heEZ1dHVyZURhdGUuc2V0RnVsbFllYXIobWF4RnV0dXJlRGF0ZS5nZXRGdWxsWWVhcigpICsgMik7XG4gIFxuICBpZiAoZGF0ZSA+IG1heEZ1dHVyZURhdGUpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnUmVsZWFzZSBkYXRlIGNhbm5vdCBiZSBtb3JlIHRoYW4gMiB5ZWFycyBpbiB0aGUgZnV0dXJlJyB9O1xuICB9XG4gIFxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xufVxuIl0sIm5hbWVzIjpbInJhbmRvbUJ5dGVzIiwiZ2VuZXJhdGVSZWxlYXNlSWQiLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwiZ2VuZXJhdGVVUEMiLCJ1cGMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsImdlbmVyYXRlSVNSQyIsImNvdW50cnlDb2RlIiwieWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInNsaWNlIiwicmVnaXN0cmFudCIsImRlc2lnbmF0aW9uIiwidmFsaWRhdGVSZWxlYXNlTWV0YWRhdGEiLCJtZXRhZGF0YSIsImVycm9ycyIsInRpdGxlIiwidHJpbSIsImxlbmd0aCIsInB1c2giLCJhcnRpc3QiLCJyZWxlYXNlRGF0ZSIsInRvZGF5Iiwic2V0SG91cnMiLCJnZW5yZSIsImxhbmd1YWdlIiwiaW5jbHVkZXMiLCJ0eXBlIiwidmFsaWQiLCJ2YWxpZGF0ZVRyYWNrIiwidHJhY2siLCJ0cmFja051bWJlciIsImR1cmF0aW9uIiwiZmlsZVBhdGgiLCJ2YWxpZGF0ZVJlbGVhc2VGb3JEaXN0cmlidXRpb24iLCJyZWxlYXNlIiwibWV0YWRhdGFWYWxpZGF0aW9uIiwidHJhY2tzIiwiZm9yRWFjaCIsImluZGV4IiwidHJhY2tWYWxpZGF0aW9uIiwiam9pbiIsImFydHdvcmtQYXRoIiwiY2FsY3VsYXRlUmVsZWFzZUR1cmF0aW9uIiwicmVkdWNlIiwidG90YWwiLCJmb3JtYXREdXJhdGlvbiIsInNlY29uZHMiLCJtaW51dGVzIiwicmVtYWluaW5nU2Vjb25kcyIsImdldFJlbGVhc2VTdGF0dXNDb2xvciIsInN0YXR1cyIsImdldFJlbGVhc2VTdGF0dXNUZXh0IiwiY2FsY3VsYXRlRGlzdHJpYnV0aW9uUHJvZ3Jlc3MiLCJwbGF0Zm9ybXMiLCJjb21wbGV0ZWQiLCJmaWx0ZXIiLCJwIiwicGVyY2VudGFnZSIsInJvdW5kIiwiZ2VuZXJhdGVSZWxlYXNlU3VtbWFyeSIsInRyYWNrQ291bnQiLCJ0b3RhbER1cmF0aW9uIiwiY2FuRWRpdFJlbGVhc2UiLCJjYW5EZWxldGVSZWxlYXNlIiwiZ2V0UmVsZWFzZVR5cGVEaXNwbGF5TmFtZSIsImdlbmVyYXRlUmVsZWFzZUZpbGVuYW1lIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwiaWQiLCJ2YWxpZGF0ZVJlbGVhc2VEYXRlIiwiZGF0ZVN0cmluZyIsImRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJlcnJvciIsIm1heEZ1dHVyZURhdGUiLCJzZXRGdWxsWWVhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/release-logic.ts\n");

/***/ }),

/***/ "(rsc)/./lib/upload-logic.ts":
/*!*****************************!*\
  !*** ./lib/upload-logic.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FILE_CONSTRAINTS: () => (/* binding */ FILE_CONSTRAINTS),\n/* harmony export */   checkFileExists: () => (/* binding */ checkFileExists),\n/* harmony export */   cleanupTempFiles: () => (/* binding */ cleanupTempFiles),\n/* harmony export */   createUploadDirectories: () => (/* binding */ createUploadDirectories),\n/* harmony export */   formatFileSize: () => (/* binding */ formatFileSize),\n/* harmony export */   generateFileHash: () => (/* binding */ generateFileHash),\n/* harmony export */   generateFileId: () => (/* binding */ generateFileId),\n/* harmony export */   generateSafeFilename: () => (/* binding */ generateSafeFilename),\n/* harmony export */   getFileCategory: () => (/* binding */ getFileCategory),\n/* harmony export */   processAudioMetadata: () => (/* binding */ processAudioMetadata),\n/* harmony export */   processImageMetadata: () => (/* binding */ processImageMetadata),\n/* harmony export */   saveUploadedFile: () => (/* binding */ saveUploadedFile),\n/* harmony export */   validateAudioFile: () => (/* binding */ validateAudioFile),\n/* harmony export */   validateImageFile: () => (/* binding */ validateImageFile),\n/* harmony export */   validateUploadProgress: () => (/* binding */ validateUploadProgress)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// File validation constants\nconst FILE_CONSTRAINTS = {\n    AUDIO: {\n        MAX_SIZE: 50 * 1024 * 1024,\n        ALLOWED_TYPES: [\n            \"audio/mpeg\",\n            \"audio/wav\",\n            \"audio/flac\",\n            \"audio/mp3\"\n        ],\n        ALLOWED_EXTENSIONS: [\n            \".mp3\",\n            \".wav\",\n            \".flac\"\n        ]\n    },\n    IMAGE: {\n        MAX_SIZE: 2 * 1024 * 1024,\n        ALLOWED_TYPES: [\n            \"image/jpeg\",\n            \"image/jpg\",\n            \"image/png\",\n            \"image/webp\"\n        ],\n        ALLOWED_EXTENSIONS: [\n            \".jpg\",\n            \".jpeg\",\n            \".png\",\n            \".webp\"\n        ]\n    }\n};\n// Validate audio file\nfunction validateAudioFile(file) {\n    const { MAX_SIZE, ALLOWED_TYPES, ALLOWED_EXTENSIONS } = FILE_CONSTRAINTS.AUDIO;\n    // Check file type\n    if (!ALLOWED_TYPES.includes(file.type)) {\n        return {\n            valid: false,\n            error: \"Please upload MP3, WAV, or FLAC files only\"\n        };\n    }\n    // Check file size\n    if (file.size > MAX_SIZE) {\n        return {\n            valid: false,\n            error: `File size must be less than ${Math.round(MAX_SIZE / (1024 * 1024))}MB`\n        };\n    }\n    // Get file extension\n    const extension = \".\" + file.name.split(\".\").pop()?.toLowerCase();\n    if (!ALLOWED_EXTENSIONS.includes(extension)) {\n        return {\n            valid: false,\n            error: \"Invalid file extension\"\n        };\n    }\n    return {\n        valid: true,\n        fileInfo: {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            extension\n        }\n    };\n}\n// Validate image file\nfunction validateImageFile(file) {\n    const { MAX_SIZE, ALLOWED_TYPES, ALLOWED_EXTENSIONS } = FILE_CONSTRAINTS.IMAGE;\n    // Check file type\n    if (!ALLOWED_TYPES.includes(file.type)) {\n        return {\n            valid: false,\n            error: \"Please upload JPG, PNG, or WebP files only\"\n        };\n    }\n    // Check file size\n    if (file.size > MAX_SIZE) {\n        return {\n            valid: false,\n            error: `File size must be less than ${Math.round(MAX_SIZE / (1024 * 1024))}MB`\n        };\n    }\n    // Get file extension\n    const extension = \".\" + file.name.split(\".\").pop()?.toLowerCase();\n    if (!ALLOWED_EXTENSIONS.includes(extension)) {\n        return {\n            valid: false,\n            error: \"Invalid file extension\"\n        };\n    }\n    return {\n        valid: true,\n        fileInfo: {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            extension\n        }\n    };\n}\n// Generate unique file ID\nfunction generateFileId() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(16).toString(\"hex\");\n}\n// Generate safe filename\nfunction generateSafeFilename(originalName, fileId) {\n    const extension = originalName.split(\".\").pop()?.toLowerCase() || \"\";\n    const sanitizedName = originalName.replace(/[^a-zA-Z0-9.-]/g, \"_\").replace(/_{2,}/g, \"_\").toLowerCase();\n    return `${fileId}_${sanitizedName}`;\n}\n// Create upload directory structure\nasync function createUploadDirectories(userId) {\n    const baseDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), \"uploads\");\n    const userDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(baseDir, userId);\n    const audioDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(userDir, \"audio\");\n    const imageDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(userDir, \"images\");\n    // Create directories if they don't exist\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(baseDir)) await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(baseDir, {\n        recursive: true\n    });\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(userDir)) await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(userDir, {\n        recursive: true\n    });\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(audioDir)) await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(audioDir, {\n        recursive: true\n    });\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(imageDir)) await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(imageDir, {\n        recursive: true\n    });\n    return userDir;\n}\n// Save uploaded file\nasync function saveUploadedFile(file, userId, fileType) {\n    try {\n        const fileId = generateFileId();\n        const safeFilename = generateSafeFilename(file.name, fileId);\n        const userDir = await createUploadDirectories(userId);\n        const filePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(userDir, fileType, safeFilename);\n        // Convert File to Buffer\n        const arrayBuffer = await file.arrayBuffer();\n        const buffer = Buffer.from(arrayBuffer);\n        // Write file to disk\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n        return {\n            success: true,\n            filePath: filePath.replace(process.cwd(), \"\")\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Failed to save file\"\n        };\n    }\n}\n// Process audio file metadata\nasync function processAudioMetadata(filePath) {\n    // This would typically use a library like node-ffmpeg or music-metadata\n    // For now, return mock data\n    return {\n        duration: 180,\n        bitrate: 320,\n        sampleRate: 44100,\n        channels: 2,\n        format: \"mp3\"\n    };\n}\n// Process image metadata\nasync function processImageMetadata(filePath) {\n    // This would typically use a library like sharp or jimp\n    // For now, return mock data\n    return {\n        width: 3000,\n        height: 3000,\n        format: \"jpeg\",\n        colorSpace: \"sRGB\"\n    };\n}\n// Generate file hash for deduplication\nasync function generateFileHash(buffer) {\n    const crypto = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! crypto */ \"crypto\", 23));\n    return crypto.createHash(\"sha256\").update(buffer).digest(\"hex\");\n}\n// Check if file already exists (deduplication)\nasync function checkFileExists(hash) {\n    // This would check against a database of file hashes\n    // For now, return false\n    return false;\n}\n// Clean up temporary files\nasync function cleanupTempFiles(filePaths) {\n    const { unlink } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs/promises */ \"fs/promises\", 23));\n    for (const filePath of filePaths){\n        try {\n            await unlink(filePath);\n        } catch (error) {\n            console.error(`Failed to delete temp file ${filePath}:`, error);\n        }\n    }\n}\n// Get file size in human readable format\nfunction formatFileSize(bytes) {\n    const sizes = [\n        \"Bytes\",\n        \"KB\",\n        \"MB\",\n        \"GB\"\n    ];\n    if (bytes === 0) return \"0 Bytes\";\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + \" \" + sizes[i];\n}\n// Get file type category\nfunction getFileCategory(mimeType) {\n    if (mimeType.startsWith(\"audio/\")) return \"audio\";\n    if (mimeType.startsWith(\"image/\")) return \"image\";\n    return \"other\";\n}\n// Validate file upload progress\nfunction validateUploadProgress(progress) {\n    return progress.progress >= 0 && progress.progress <= 100 && [\n        \"uploading\",\n        \"processing\",\n        \"completed\",\n        \"error\"\n    ].includes(progress.status);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxHQUFHLE1BQU0sNEhBQU87SUFFaEMsS0FBSyxNQUFNM0IsWUFBWTBCLFVBQVc7UUFDaEMsSUFBSTtZQUNGLE1BQU1DLE9BQU8zQjtRQUNmLEVBQUUsT0FBTzlCLE9BQU87WUFDZDBELFFBQVExRCxLQUFLLENBQUMsQ0FBQywyQkFBMkIsRUFBRThCLFNBQVMsQ0FBQyxDQUFDLEVBQUU5QjtRQUMzRDtJQUNGO0FBQ0Y7QUFFQSx5Q0FBeUM7QUFDbEMsU0FBUzJELGVBQWVDLEtBQWE7SUFDMUMsTUFBTUMsUUFBUTtRQUFDO1FBQVM7UUFBTTtRQUFNO0tBQUs7SUFDekMsSUFBSUQsVUFBVSxHQUFHLE9BQU87SUFFeEIsTUFBTUUsSUFBSTVELEtBQUs2RCxLQUFLLENBQUM3RCxLQUFLOEQsR0FBRyxDQUFDSixTQUFTMUQsS0FBSzhELEdBQUcsQ0FBQztJQUNoRCxPQUFPOUQsS0FBS0MsS0FBSyxDQUFDeUQsUUFBUTFELEtBQUsrRCxHQUFHLENBQUMsTUFBTUgsS0FBSyxPQUFPLE1BQU0sTUFBTUQsS0FBSyxDQUFDQyxFQUFFO0FBQzNFO0FBRUEseUJBQXlCO0FBQ2xCLFNBQVNJLGdCQUFnQkMsUUFBZ0I7SUFDOUMsSUFBSUEsU0FBU0MsVUFBVSxDQUFDLFdBQVcsT0FBTztJQUMxQyxJQUFJRCxTQUFTQyxVQUFVLENBQUMsV0FBVyxPQUFPO0lBQzFDLE9BQU87QUFDVDtBQUVBLGdDQUFnQztBQUN6QixTQUFTQyx1QkFBdUJDLFFBQXdCO0lBQzdELE9BQ0VBLFNBQVNBLFFBQVEsSUFBSSxLQUNyQkEsU0FBU0EsUUFBUSxJQUFJLE9BQ3JCO1FBQUM7UUFBYTtRQUFjO1FBQWE7S0FBUSxDQUFDekUsUUFBUSxDQUFDeUUsU0FBU0MsTUFBTTtBQUU5RSIsInNvdXJjZXMiOlsid2VicGFjazovL2t1c2h0dW5lcy1tb2JpbGUtYXBwLy4vbGliL3VwbG9hZC1sb2dpYy50cz9jODg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJhbmRvbUJ5dGVzIH0gZnJvbSAnY3J5cHRvJztcbmltcG9ydCB7IHdyaXRlRmlsZSwgbWtkaXIgfSBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xuICBmaWxlSW5mbz86IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc2l6ZTogbnVtYmVyO1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBleHRlbnNpb246IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGxvYWRQcm9ncmVzcyB7XG4gIGZpbGVJZDogc3RyaW5nO1xuICBmaWxlTmFtZTogc3RyaW5nO1xuICBwcm9ncmVzczogbnVtYmVyO1xuICBzdGF0dXM6ICd1cGxvYWRpbmcnIHwgJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuLy8gRmlsZSB2YWxpZGF0aW9uIGNvbnN0YW50c1xuZXhwb3J0IGNvbnN0IEZJTEVfQ09OU1RSQUlOVFMgPSB7XG4gIEFVRElPOiB7XG4gICAgTUFYX1NJWkU6IDUwICogMTAyNCAqIDEwMjQsIC8vIDUwTUJcbiAgICBBTExPV0VEX1RZUEVTOiBbJ2F1ZGlvL21wZWcnLCAnYXVkaW8vd2F2JywgJ2F1ZGlvL2ZsYWMnLCAnYXVkaW8vbXAzJ10sXG4gICAgQUxMT1dFRF9FWFRFTlNJT05TOiBbJy5tcDMnLCAnLndhdicsICcuZmxhYyddXG4gIH0sXG4gIElNQUdFOiB7XG4gICAgTUFYX1NJWkU6IDIgKiAxMDI0ICogMTAyNCwgLy8gMk1CXG4gICAgQUxMT1dFRF9UWVBFUzogWydpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZycsICdpbWFnZS9wbmcnLCAnaW1hZ2Uvd2VicCddLFxuICAgIEFMTE9XRURfRVhURU5TSU9OUzogWycuanBnJywgJy5qcGVnJywgJy5wbmcnLCAnLndlYnAnXVxuICB9XG59O1xuXG4vLyBWYWxpZGF0ZSBhdWRpbyBmaWxlXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBdWRpb0ZpbGUoZmlsZTogRmlsZSk6IEZpbGVWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgeyBNQVhfU0laRSwgQUxMT1dFRF9UWVBFUywgQUxMT1dFRF9FWFRFTlNJT05TIH0gPSBGSUxFX0NPTlNUUkFJTlRTLkFVRElPO1xuICBcbiAgLy8gQ2hlY2sgZmlsZSB0eXBlXG4gIGlmICghQUxMT1dFRF9UWVBFUy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnUGxlYXNlIHVwbG9hZCBNUDMsIFdBViwgb3IgRkxBQyBmaWxlcyBvbmx5J1xuICAgIH07XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZpbGUgc2l6ZVxuICBpZiAoZmlsZS5zaXplID4gTUFYX1NJWkUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IGBGaWxlIHNpemUgbXVzdCBiZSBsZXNzIHRoYW4gJHtNYXRoLnJvdW5kKE1BWF9TSVpFIC8gKDEwMjQgKiAxMDI0KSl9TUJgXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gR2V0IGZpbGUgZXh0ZW5zaW9uXG4gIGNvbnN0IGV4dGVuc2lvbiA9ICcuJyArIGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIUFMTE9XRURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnSW52YWxpZCBmaWxlIGV4dGVuc2lvbidcbiAgICB9O1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIHZhbGlkOiB0cnVlLFxuICAgIGZpbGVJbmZvOiB7XG4gICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICBleHRlbnNpb25cbiAgICB9XG4gIH07XG59XG5cbi8vIFZhbGlkYXRlIGltYWdlIGZpbGVcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUltYWdlRmlsZShmaWxlOiBGaWxlKTogRmlsZVZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCB7IE1BWF9TSVpFLCBBTExPV0VEX1RZUEVTLCBBTExPV0VEX0VYVEVOU0lPTlMgfSA9IEZJTEVfQ09OU1RSQUlOVFMuSU1BR0U7XG4gIFxuICAvLyBDaGVjayBmaWxlIHR5cGVcbiAgaWYgKCFBTExPV0VEX1RZUEVTLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdQbGVhc2UgdXBsb2FkIEpQRywgUE5HLCBvciBXZWJQIGZpbGVzIG9ubHknXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZmlsZSBzaXplXG4gIGlmIChmaWxlLnNpemUgPiBNQVhfU0laRSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogYEZpbGUgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiAke01hdGgucm91bmQoTUFYX1NJWkUgLyAoMTAyNCAqIDEwMjQpKX1NQmBcbiAgICB9O1xuICB9XG4gIFxuICAvLyBHZXQgZmlsZSBleHRlbnNpb25cbiAgY29uc3QgZXh0ZW5zaW9uID0gJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG4gIGlmICghQUxMT1dFRF9FWFRFTlNJT05TLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdJbnZhbGlkIGZpbGUgZXh0ZW5zaW9uJ1xuICAgIH07XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHRydWUsXG4gICAgZmlsZUluZm86IHtcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgIGV4dGVuc2lvblxuICAgIH1cbiAgfTtcbn1cblxuLy8gR2VuZXJhdGUgdW5pcXVlIGZpbGUgSURcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVJZCgpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLy8gR2VuZXJhdGUgc2FmZSBmaWxlbmFtZVxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2FmZUZpbGVuYW1lKG9yaWdpbmFsTmFtZTogc3RyaW5nLCBmaWxlSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGV4dGVuc2lvbiA9IG9yaWdpbmFsTmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICBjb25zdCBzYW5pdGl6ZWROYW1lID0gb3JpZ2luYWxOYW1lXG4gICAgLnJlcGxhY2UoL1teYS16QS1aMC05Li1dL2csICdfJylcbiAgICAucmVwbGFjZSgvX3syLH0vZywgJ18nKVxuICAgIC50b0xvd2VyQ2FzZSgpO1xuICBcbiAgcmV0dXJuIGAke2ZpbGVJZH1fJHtzYW5pdGl6ZWROYW1lfWA7XG59XG5cbi8vIENyZWF0ZSB1cGxvYWQgZGlyZWN0b3J5IHN0cnVjdHVyZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVwbG9hZERpcmVjdG9yaWVzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgYmFzZURpciA9IGpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3VwbG9hZHMnKTtcbiAgY29uc3QgdXNlckRpciA9IGpvaW4oYmFzZURpciwgdXNlcklkKTtcbiAgY29uc3QgYXVkaW9EaXIgPSBqb2luKHVzZXJEaXIsICdhdWRpbycpO1xuICBjb25zdCBpbWFnZURpciA9IGpvaW4odXNlckRpciwgJ2ltYWdlcycpO1xuICBcbiAgLy8gQ3JlYXRlIGRpcmVjdG9yaWVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgaWYgKCFleGlzdHNTeW5jKGJhc2VEaXIpKSBhd2FpdCBta2RpcihiYXNlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgaWYgKCFleGlzdHNTeW5jKHVzZXJEaXIpKSBhd2FpdCBta2Rpcih1c2VyRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgaWYgKCFleGlzdHNTeW5jKGF1ZGlvRGlyKSkgYXdhaXQgbWtkaXIoYXVkaW9EaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBpZiAoIWV4aXN0c1N5bmMoaW1hZ2VEaXIpKSBhd2FpdCBta2RpcihpbWFnZURpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIFxuICByZXR1cm4gdXNlckRpcjtcbn1cblxuLy8gU2F2ZSB1cGxvYWRlZCBmaWxlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVVwbG9hZGVkRmlsZShcbiAgZmlsZTogRmlsZSxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGZpbGVUeXBlOiAnYXVkaW8nIHwgJ2ltYWdlJ1xuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGZpbGVQYXRoPzogc3RyaW5nOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZmlsZUlkID0gZ2VuZXJhdGVGaWxlSWQoKTtcbiAgICBjb25zdCBzYWZlRmlsZW5hbWUgPSBnZW5lcmF0ZVNhZmVGaWxlbmFtZShmaWxlLm5hbWUsIGZpbGVJZCk7XG4gICAgY29uc3QgdXNlckRpciA9IGF3YWl0IGNyZWF0ZVVwbG9hZERpcmVjdG9yaWVzKHVzZXJJZCk7XG4gICAgXG4gICAgY29uc3QgZmlsZVBhdGggPSBqb2luKHVzZXJEaXIsIGZpbGVUeXBlLCBzYWZlRmlsZW5hbWUpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgRmlsZSB0byBCdWZmZXJcbiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG4gICAgXG4gICAgLy8gV3JpdGUgZmlsZSB0byBkaXNrXG4gICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBidWZmZXIpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZmlsZVBhdGg6IGZpbGVQYXRoLnJlcGxhY2UocHJvY2Vzcy5jd2QoKSwgJycpXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNhdmUgZmlsZSdcbiAgICB9O1xuICB9XG59XG5cbi8vIFByb2Nlc3MgYXVkaW8gZmlsZSBtZXRhZGF0YVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NBdWRpb01ldGFkYXRhKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJpdHJhdGU/OiBudW1iZXI7XG4gIHNhbXBsZVJhdGU/OiBudW1iZXI7XG4gIGNoYW5uZWxzPzogbnVtYmVyO1xuICBmb3JtYXQ/OiBzdHJpbmc7XG59PiB7XG4gIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IHVzZSBhIGxpYnJhcnkgbGlrZSBub2RlLWZmbXBlZyBvciBtdXNpYy1tZXRhZGF0YVxuICAvLyBGb3Igbm93LCByZXR1cm4gbW9jayBkYXRhXG4gIHJldHVybiB7XG4gICAgZHVyYXRpb246IDE4MCwgLy8gMyBtaW51dGVzXG4gICAgYml0cmF0ZTogMzIwLFxuICAgIHNhbXBsZVJhdGU6IDQ0MTAwLFxuICAgIGNoYW5uZWxzOiAyLFxuICAgIGZvcm1hdDogJ21wMydcbiAgfTtcbn1cblxuLy8gUHJvY2VzcyBpbWFnZSBtZXRhZGF0YVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NJbWFnZU1ldGFkYXRhKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgZm9ybWF0Pzogc3RyaW5nO1xuICBjb2xvclNwYWNlPzogc3RyaW5nO1xufT4ge1xuICAvLyBUaGlzIHdvdWxkIHR5cGljYWxseSB1c2UgYSBsaWJyYXJ5IGxpa2Ugc2hhcnAgb3IgamltcFxuICAvLyBGb3Igbm93LCByZXR1cm4gbW9jayBkYXRhXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IDMwMDAsXG4gICAgaGVpZ2h0OiAzMDAwLFxuICAgIGZvcm1hdDogJ2pwZWcnLFxuICAgIGNvbG9yU3BhY2U6ICdzUkdCJ1xuICB9O1xufVxuXG4vLyBHZW5lcmF0ZSBmaWxlIGhhc2ggZm9yIGRlZHVwbGljYXRpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVIYXNoKGJ1ZmZlcjogQnVmZmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgY3J5cHRvID0gYXdhaXQgaW1wb3J0KCdjcnlwdG8nKTtcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoJ2hleCcpO1xufVxuXG4vLyBDaGVjayBpZiBmaWxlIGFscmVhZHkgZXhpc3RzIChkZWR1cGxpY2F0aW9uKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRmlsZUV4aXN0cyhoYXNoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgLy8gVGhpcyB3b3VsZCBjaGVjayBhZ2FpbnN0IGEgZGF0YWJhc2Ugb2YgZmlsZSBoYXNoZXNcbiAgLy8gRm9yIG5vdywgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gQ2xlYW4gdXAgdGVtcG9yYXJ5IGZpbGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cFRlbXBGaWxlcyhmaWxlUGF0aHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgdW5saW5rIH0gPSBhd2FpdCBpbXBvcnQoJ2ZzL3Byb21pc2VzJyk7XG4gIFxuICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVQYXRocykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1bmxpbmsoZmlsZVBhdGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHRlbXAgZmlsZSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8vIEdldCBmaWxlIHNpemUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQiddO1xuICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCeXRlcyc7XG4gIFxuICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZygxMDI0KSk7XG4gIHJldHVybiBNYXRoLnJvdW5kKGJ5dGVzIC8gTWF0aC5wb3coMTAyNCwgaSkgKiAxMDApIC8gMTAwICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8vIEdldCBmaWxlIHR5cGUgY2F0ZWdvcnlcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlQ2F0ZWdvcnkobWltZVR5cGU6IHN0cmluZyk6ICdhdWRpbycgfCAnaW1hZ2UnIHwgJ290aGVyJyB7XG4gIGlmIChtaW1lVHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuICdhdWRpbyc7XG4gIGlmIChtaW1lVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkgcmV0dXJuICdpbWFnZSc7XG4gIHJldHVybiAnb3RoZXInO1xufVxuXG4vLyBWYWxpZGF0ZSBmaWxlIHVwbG9hZCBwcm9ncmVzc1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXBsb2FkUHJvZ3Jlc3MocHJvZ3Jlc3M6IFVwbG9hZFByb2dyZXNzKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgcHJvZ3Jlc3MucHJvZ3Jlc3MgPj0gMCAmJlxuICAgIHByb2dyZXNzLnByb2dyZXNzIDw9IDEwMCAmJlxuICAgIFsndXBsb2FkaW5nJywgJ3Byb2Nlc3NpbmcnLCAnY29tcGxldGVkJywgJ2Vycm9yJ10uaW5jbHVkZXMocHJvZ3Jlc3Muc3RhdHVzKVxuICApO1xufVxuIl0sIm5hbWVzIjpbInJhbmRvbUJ5dGVzIiwid3JpdGVGaWxlIiwibWtkaXIiLCJqb2luIiwiZXhpc3RzU3luYyIsIkZJTEVfQ09OU1RSQUlOVFMiLCJBVURJTyIsIk1BWF9TSVpFIiwiQUxMT1dFRF9UWVBFUyIsIkFMTE9XRURfRVhURU5TSU9OUyIsIklNQUdFIiwidmFsaWRhdGVBdWRpb0ZpbGUiLCJmaWxlIiwiaW5jbHVkZXMiLCJ0eXBlIiwidmFsaWQiLCJlcnJvciIsInNpemUiLCJNYXRoIiwicm91bmQiLCJleHRlbnNpb24iLCJuYW1lIiwic3BsaXQiLCJwb3AiLCJ0b0xvd2VyQ2FzZSIsImZpbGVJbmZvIiwidmFsaWRhdGVJbWFnZUZpbGUiLCJnZW5lcmF0ZUZpbGVJZCIsInRvU3RyaW5nIiwiZ2VuZXJhdGVTYWZlRmlsZW5hbWUiLCJvcmlnaW5hbE5hbWUiLCJmaWxlSWQiLCJzYW5pdGl6ZWROYW1lIiwicmVwbGFjZSIsImNyZWF0ZVVwbG9hZERpcmVjdG9yaWVzIiwidXNlcklkIiwiYmFzZURpciIsInByb2Nlc3MiLCJjd2QiLCJ1c2VyRGlyIiwiYXVkaW9EaXIiLCJpbWFnZURpciIsInJlY3Vyc2l2ZSIsInNhdmVVcGxvYWRlZEZpbGUiLCJmaWxlVHlwZSIsInNhZmVGaWxlbmFtZSIsImZpbGVQYXRoIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwic3VjY2VzcyIsIkVycm9yIiwibWVzc2FnZSIsInByb2Nlc3NBdWRpb01ldGFkYXRhIiwiZHVyYXRpb24iLCJiaXRyYXRlIiwic2FtcGxlUmF0ZSIsImNoYW5uZWxzIiwiZm9ybWF0IiwicHJvY2Vzc0ltYWdlTWV0YWRhdGEiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9yU3BhY2UiLCJnZW5lcmF0ZUZpbGVIYXNoIiwiY3J5cHRvIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImNoZWNrRmlsZUV4aXN0cyIsImhhc2giLCJjbGVhbnVwVGVtcEZpbGVzIiwiZmlsZVBhdGhzIiwidW5saW5rIiwiY29uc29sZSIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJzaXplcyIsImkiLCJmbG9vciIsImxvZyIsInBvdyIsImdldEZpbGVDYXRlZ29yeSIsIm1pbWVUeXBlIiwic3RhcnRzV2l0aCIsInZhbGlkYXRlVXBsb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/upload-logic.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/prisma","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/@prisma"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwizloxssd%2FDownloads%2Fkushtunes-starter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();