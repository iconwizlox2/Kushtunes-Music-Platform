(()=>{var e={};e.id=476,e.ids=[476],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},3239:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var i=a(7096),t=a(6132),r=a(7284),l=a.n(r),n=a(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let o=["",{children:["verify-email",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3687)),"/Users/wizloxssd/Downloads/kushtunes-starter/app/verify-email/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6678)),"/Users/wizloxssd/Downloads/kushtunes-starter/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/wizloxssd/Downloads/kushtunes-starter/app/verify-email/page.tsx"],m="/verify-email/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/verify-email/page",pathname:"/verify-email",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1033:(e,s,a)=>{Promise.resolve().then(a.bind(a,2710))},2710:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>VerifyEmailPage});var i=a(784),t=a(9885),r=a(7114),l=a(1440),n=a.n(l),c=a(1381),o=a(2820),d=a(3823);function VerifyEmailPage(){let e=(0,r.useSearchParams)(),s=e.get("token"),a=e.get("email"),[l,m]=(0,t.useState)("loading"),[u,x]=(0,t.useState)(""),[h,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!s||!a){m("missing"),x("Missing verification token or email");return}handleVerification()},[s,a]);let handleVerification=async()=>{if(s&&a){f(!0);try{let e=await fetch("/api/auth/verify-email",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,email:a})}),i=await e.json();i.success?(m("success"),x("Your email has been verified successfully!")):(m("error"),x(i.message||"Email verification failed"))}catch(e){console.error("Verification error:",e),m("error"),x("Email verification failed. Please try again.")}finally{f(!1)}}},resendVerification=async()=>{if(a){f(!0);try{let e=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),s=await e.json();s.success?x("Verification email sent! Please check your inbox."):x(s.message||"Failed to send verification email")}catch(e){console.error("Resend error:",e),x("Failed to send verification email. Please try again.")}finally{f(!1)}}};return i.jsx(c.o,{children:i.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"max-w-md w-full",children:[i.jsx(o.ZH,{className:"p-8",children:(()=>{switch(l){case"loading":return(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(o.TK,{className:"h-8 w-8 text-blue-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Email"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Please wait while we verify your email address..."})]});case"success":return(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(d.rE,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your email address has been successfully verified. You can now access all features of Kushtunes."}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:()=>window.location.href="/dashboard",children:["Go to Dashboard",i.jsx(d.LZ,{className:"ml-2 h-5 w-5"})]}),i.jsx(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/upload",children:"Upload Music"})]})]});case"error":return(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(d.LP,{className:"h-8 w-8 text-red-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),i.jsx("p",{className:"text-gray-600 mb-6",children:u}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:resendVerification,disabled:h,children:h?(0,i.jsxs)(i.Fragment,{children:[i.jsx(o.TK,{className:"mr-2"}),"Sending..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(d.bV,{className:"mr-2 h-5 w-5"}),"Resend Verification Email"]})}),i.jsx(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/login",children:"Back to Login"})]})]});case"missing":return(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(d.LP,{className:"h-8 w-8 text-yellow-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Link"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"This verification link is invalid or has expired. Please request a new verification email."}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(o.DL,{variant:"primary",size:"lg",className:"w-full",onClick:()=>window.location.href="/login",children:"Go to Login"}),i.jsx(o.DL,{variant:"outline",size:"lg",className:"w-full",onClick:()=>window.location.href="/register",children:"Create New Account"})]})]});default:return null}})()}),i.jsx("div",{className:"mt-6 text-center",children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Need help?"," ",i.jsx(n(),{href:"/support",className:"font-medium text-blue-600 hover:text-blue-500",children:"Contact Support"})]})})]})})})}},3687:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>c});var i=a(5153);let t=(0,i.createProxy)(String.raw`/Users/wizloxssd/Downloads/kushtunes-starter/app/verify-email/page.tsx`),{__esModule:r,$$typeof:l}=t,n=t.default,c=n},7114:(e,s,a)=>{e.exports=a(4979)}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[611,440,320,391],()=>__webpack_exec__(3239));module.exports=a})();